C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE PRJ
OBJECT MODULE PLACED IN .\Hex\prj.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE src\prj.c LARGE OPTIMIZE(9,SPEED) REGFILE(.\Hex\Prj.ORC) BROWSE DEBUG OBJEC
                    -TEXTEND CODE LISTINCLUDE SYMBOLS PRINT(.\prj.lst) PREPRINT(.\prj.i) OBJECT(.\Hex\prj.obj)

line level    source

   1          /********************************************************************************************
   2          ³ÌÐòÃû£º ¡¡¡¡ ÃÔÄãÒôÀÖÆµÆ×ÏÔÊ¾Æ÷
   3          ±àÐ´ÈË£º ¡¡¡¡ 
   4          ±àÐ´Ê±¼ä£º¡¡¡¡
   5          Ó²¼þÖ§³Ö£º¡¡¡¡2¸ö8*8µãÕó  STC12C5A60S2¡¡Íâ²¿32.768MHz¾§Õñ 
   6          ½Ó¿ÚËµÃ÷£º¡¡¡¡¼û½Ó¿ÚËµÃ÷ÎÄµµ¡¡
   7          *********************************************************************************************/
   8          #include "src\STC12C5A.h"                
   1      =1  /*------------------------------------------------*/
   2      =1  /* --- ºê¾§¿Æ¼¼ STCMCU ---------------------------*/
   3      =1  /* --- Mobile: (86)13922805190 -------------------*/
   4      =1  /* --- Fax: 86-755-82944243 ----------------------*/
   5      =1  /* --- Tel: 86-755-82948412 ----------------------*/
   6      =1  /* --- Web: www.STCMCU.com -----------------------*/
   7      =1  /* ÊÊÓÃÓÚ: STC12C5AxxX   STC12LE5AxxX ------------*/
   8      =1  /* ------- STC12C5AxxCPP STC12LE5AxxCPP ----------*/
   9      =1  /* ------- STC12C5AxxAD  STC12LE5AxxAD  ----------*/
  10      =1  /* ------- STC12C5AxxS2  STC12LE5AxxS2  ----------*/
  11      =1  /* ------- IAP12C5Axx    IAP12LE5Axx    ----------*/
  12      =1  /* ------- IAP12C5AxxCPP IAP12LE5AxxCPP ----------*/
  13      =1  /* ------- IAP12C5AxxAD  IAP12LE5AxxAD  ----------*/
  14      =1  /* ------- IAP12C5AxxS2  IAP12LE5AxxS2  ----------*/
  15      =1  /*------------------------------------------------*/
  16      =1  
  17      =1  #ifndef __STC12C5A_H__
  18      =1  #define __STC12C5A_H__
  19      =1  
  20      =1  //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -//////
  21      =1  
  22      =1  sfr  PSW        =   0xd0;       //³ÌÐò×´Ì¬×Ö            Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
  23      =1                                  //Î»ÃèÊö                CY      AC      F0      RS1     RS0     OV      F1
             -      P
  24      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
  25      =1  
  26      =1  sbit CY         =   PSW^7;      //½øÎ»±êÖ¾
  27      =1  sbit AC         =   PSW^6;      //¸¨Öú½øÎ»±êÖ¾
  28      =1  sbit F0         =   PSW^5;      //ÓÃ»§±êÖ¾
  29      =1  sbit RS1        =   PSW^4;      //¼Ä´æÆ÷×éÑ¡ÔñÎ»1
  30      =1  sbit RS0        =   PSW^3;      //¼Ä´æÆ÷×éÑ¡ÔñÎ»0
  31      =1  sbit OV         =   PSW^2;      //Òç³ö±êÖ¾
  32      =1  sbit P          =   PSW^0;      //ACCµÄÅ¼Ð£ÑéÎ»
  33      =1  
  34      =1  /////////////////////////////////
  35      =1  
  36      =1  sfr  ACC        =   0xe0;       //ÀÛ¼ÓÆ÷                Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
  37      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
  38      =1  
  39      =1  sbit ACC7       =   ACC^7;      //ÀÛ¼ÓÆ÷µÚ7Î»
  40      =1  sbit ACC6       =   ACC^6;      //ÀÛ¼ÓÆ÷µÚ6Î»
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 2   

  41      =1  sbit ACC5       =   ACC^5;      //ÀÛ¼ÓÆ÷µÚ5Î»
  42      =1  sbit ACC4       =   ACC^4;      //ÀÛ¼ÓÆ÷µÚ4Î»
  43      =1  sbit ACC3       =   ACC^3;      //ÀÛ¼ÓÆ÷µÚ3Î»
  44      =1  sbit ACC2       =   ACC^2;      //ÀÛ¼ÓÆ÷µÚ2Î»
  45      =1  sbit ACC1       =   ACC^1;      //ÀÛ¼ÓÆ÷µÚ1Î»
  46      =1  sbit ACC0       =   ACC^0;      //ÀÛ¼ÓÆ÷µÚ0Î»
  47      =1  
  48      =1  /////////////////////////////////
  49      =1  
  50      =1  sfr  B          =   0xf0;       //B¼Ä´æÆ÷               Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
  51      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
  52      =1  
  53      =1  /////////////////////////////////
  54      =1  
  55      =1  sfr  SP         =   0x81;       //¶ÑÕ»Ö¸Õë              Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
  56      =1                                  //³õÊ¼Öµ=0000,0111      0       0       0       0       0       1       1 
             -      1
  57      =1  
  58      =1  /////////////////////////////////
  59      =1  
  60      =1  sfr  DPL        =   0x82;       //Êý¾ÝÖ¸ÕëµÍ×Ö½Ú        Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
  61      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
  62      =1  
  63      =1  /////////////////////////////////
  64      =1  
  65      =1  sfr  DPH        =   0x83;       //Êý¾ÝÖ¸Õë¸ß×Ö½Ú        Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
  66      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
  67      =1  
  68      =1  //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -//////
  69      =1  
  70      =1  sfr  PCON       =   0x87;       //µçÔ´¿ØÖÆ¼Ä´æÆ÷        Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
  71      =1                                  //Î»ÃèÊö                SMOD    SMOD0   LVDF    POF     GF1     GF0     PD
             -      IDL
  72      =1                                  //³õÊ¼Öµ=0011,0000      0       0       1       1       0       0       0 
             -      0
  73      =1  
  74      =1  #define SMOD        0x80        //´®¿Ú²¨ÌØÂÊ±¶ËÙÎ»,ÖÃ1¿ÉÊ¹²¨ÌØÂÊ¿ì1±¶
  75      =1  #define SMOD0       0x40        //FE/SM0Ñ¡ÔñÎ»,0:SCON.7ÎªSM0 1:SCON.7ÎªFE
  76      =1  #define LVDF        0x20        //µÍÑ¹¼ì²âÖÐ¶ÏÇëÇóÎ»,ÓÉÓ²¼þÖÃ1,ÐèÓÉÈí¼þÇå0
  77      =1  #define POF         0x10        //ÉÏµç¸´Î»±êÖ¾Î»,ÉÏµçÊ±ÓÉÓ²¼þÖÃ1,ÐèÓÉÈí¼þÇå0
  78      =1  #define GF1         0x08        //Í¨ÓÃ±êÖ¾Î»1
  79      =1  #define GF0         0x04        //Í¨ÓÃ±êÖ¾Î»0
  80      =1  #define PD          0x02        //µôµç¿ØÖÆÎ»,Ð´1¿ÉÒÔÊ¹MCU½øÈëPowerDownÄ£Ê½
  81      =1  #define IDL         0x01        //¿ÕÏÐ¿ØÖÆÎ»,Ð´1¿ÉÒÔÊ¹MCU½øÈëIdleÄ£Ê½
  82      =1  
  83      =1  /////////////////////////////////
  84      =1  
  85      =1  sfr  WAKE_CLKO  =   0x8f;       //µôµç»½ÐÑ/Ê±ÖÓÊä³ö¿ØÖÆ Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
  86      =1                                  //Î»ÃèÊö          PCAWAKEUP RXDPINIE T1PINIE T0PINIE LVD_WAKEUP BRTCLKO T1
             -VLKO  T0CLKO
  87      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 3   

  88      =1  
  89      =1  #define PCAWAKEUP   0x80        //ÔÊÐíPCAµÄÉÏÉýÑØ/ÏÂ½µÑØÖÐ¶Ï»½ÐÑµôµçMCU
  90      =1  #define RXD_PIN_IE  0x40        //ÔÊÐíRXD(P3.0)ÏÂ½µÑØÖÃÎ»RIÖÐ¶ÏÊ±»½ÐÑµôµçMCU(±ØÐë´ò¿ªÏàÓ¦ÖÐ¶Ï)
  91      =1  #define T1_PIN_IE   0x20        //ÔÊÐíT1(P3.5)ÏÂ½µÑØÖÃÎ»T1ÖÐ¶ÏÊ±»½ÐÑµôµçMCU(±ØÐë´ò¿ªÏàÓ¦ÖÐ¶Ï)
  92      =1  #define T0_PIN_IE   0x10        //ÔÊÐíT0(P3.4)ÏÂ½µÑØÖÃÎ»T0ÖÐ¶ÏÊ±»½ÐÑµôµçMCU(±ØÐë´ò¿ªÏàÓ¦ÖÐ¶Ï)
  93      =1  #define LVD_WAKEUP  0x08        //ÔÊÐíLVD(P4.6)µÄµÍÑ¹¼ì²âÖÐ¶Ï»½ÐÑµôµçMCU(±ØÐë´ò¿ªÏàÓ¦ÖÐ¶Ï)
  94      =1  #define BRTCLKOEN   0x04        //´ò¿ªP1.0½ÅµÄBRTÊ±ÖÓÒç³öÂö³å,Êä³öµÄÊ±ÖÓÆµÂÊÎª1/2±¶µÄBRTÒç³öÂÊ
  95      =1  #define T1CLKOEN    0x02        //´ò¿ªP3.5½ÅµÄ¶¨Ê±Æ÷1Ê±ÖÓÒç³öÂö³å,Êä³öµÄÊ±ÖÓÆµÂÊÎª1/2±¶µÄT1Òç³öÂÊ
  96      =1  #define T0CLKOEN    0x01        //´ò¿ªP3.4½ÅµÄ¶¨Ê±Æ÷0Ê±ÖÓÒç³öÂö³å,Êä³öµÄÊ±ÖÓÆµÂÊÎª1/2±¶µÄT0Òç³öÂÊ
  97      =1  
  98      =1  /////////////////////////////////
  99      =1  
 100      =1  sfr  CLK_DIV    =   0x97;       //Ê±ÖÓ·ÖÆµ¼Ä´æÆ÷        Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 101      =1                                  //Î»ÃèÊö                -       -       -       -       -       CLKS2   CL
             -KS1   CLKS0
 102      =1                                  //³õÊ¼Öµ=xxxx,x000      x       x       x       x       x       0       0 
             -      0
 103      =1  
 104      =1  #define FOSCD1      0x00        //ÏµÍ³Ê±ÖÓÎªFosc
 105      =1  #define FOSCD2      0x01        //ÏµÍ³Ê±ÖÓÎªFosc/2
 106      =1  #define FOSCD4      0x02        //ÏµÍ³Ê±ÖÓÎªFosc/4
 107      =1  #define FOSCD8      0x03        //ÏµÍ³Ê±ÖÓÎªFosc/8
 108      =1  #define FOSCD16     0x04        //ÏµÍ³Ê±ÖÓÎªFosc/16
 109      =1  #define FOSCD32     0x05        //ÏµÍ³Ê±ÖÓÎªFosc/32
 110      =1  #define FOSCD64     0x06        //ÏµÍ³Ê±ÖÓÎªFosc/64
 111      =1  #define FOSCD128    0x07        //ÏµÍ³Ê±ÖÓÎªFosc/128
 112      =1  
 113      =1  /////////////////////////////////
 114      =1  
 115      =1  sfr  BUS_SPEED  =   0xa1;       //Êý¾Ý×ÜÏßËÙ¶È¿ØÖÆÆ÷    Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 116      =1                                  //Î»ÃèÊö                -       -       ALES1   ALES0   -       RWS2    RW
             -S1    RWS0
 117      =1                                  //³õÊ¼Öµ=xx10,x011      x       x       1       0       x       0       1 
             -      1
 118      =1  
 119      =1  #define ALES1       0x20        //P0µØÖ·½¨Á¢Ê±¼äºÍ±£³ÖÊ±¼äµ½ALEÐÅºÅµÄÏÂ½µÑØµÄÊ±ÖÓÊý
 120      =1  #define ALES0       0x10        //ALES1/ALES0=0/0:1¸öÊ±ÖÓ 0/1:2¸öÊ±ÖÓ 1/0:3¸öÊ±ÖÓ 1/1:4¸öÊ±ÖÓ
 121      =1  
 122      =1  #define RWS2        0x04        //MOVXÖ¸ÁîµÄÊ±ÖÓÊý
 123      =1  #define RWS1        0x02        //RWS2/RWS1/RWS0=000:1¸öÊ±ÖÓ 001:2¸öÊ±ÖÓ 010:3¸öÊ±ÖÓ 011:4¸öÊ±ÖÓ
 124      =1  #define RWS0        0x01        //               100:5¸öÊ±ÖÓ 101:6¸öÊ±ÖÓ 110:7¸öÊ±ÖÓ 111:8¸öÊ±ÖÓ
 125      =1  
 126      =1  /////////////////////////////////
 127      =1  
 128      =1  sfr  WDT_CONTR  =   0xc1;       //¿´ÃÅ¹·¶¨Ê±Æ÷¿ØÖÆÆ÷    Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 129      =1                                  //Î»ÃèÊö             WDT_FLAG   -       EN_WDT  CLR_WDT IDL_WDT PS2     PS
             -1     PS0
 130      =1                                  //³õÊ¼Öµ=0x00,0000      0       x       0       0       0       0       0 
             -      0
 131      =1  
 132      =1  #define WDT_FLAG    0x80        //¿´ÃÅ¹·¸´Î»±êÖ¾,µ±¿´ÃÅ¹·Òç³ö²úÉú¸´Î»ºó,Ó²¼þ×Ô¶¯ÖÃ1,ÐèÒªÓÉÈí¼þÇå0
 133      =1  #define EN_WDT      0x20        //Èí¼þÊ¹ÄÜ¿´ÃÅ¹·,´ò¿ªºó²»ÄÜÓÃÈí¼þµÄ·½Ê½¹Ø±Õ
 134      =1  #define CLR_WDT     0x10        //Çå¿´ÃÅ¹·¶¨Ê±Æ÷
 135      =1  #define IDLE_WDT    0x08        //IDLEÄ£Ê½ÏÂ,¿´ÃÅ¹·¶¨Ê±Æ÷ÊÇ·ñ¼ÌÐø¼ÆÊ±
 136      =1  
 137      =1  //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -//////
 138      =1  
 139      =1  sfr  AUXR       =   0x8e;       //¸¨Öú¼Ä´æÆ÷            Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 4   

             -t1    Bit0
 140      =1                                  //Î»ÃèÊö                T0x12   T1x12   UM0x6   BRTR    S2SMOD  BRTx12  EX
             -TRAM  S1BRS
 141      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 142      =1  
 143      =1  #define T0x12       0x80        //¶¨Ê±Æ÷0Ê±ÖÓ¿ØÖÆ,0:Fosc/12(´«Í³µÄ12·ÖÆµ) 1:Fosc/1(1TÄ£Ê½,²»·ÖÆµ,¼´12±¶ÓÚ´
             -«Í³ËÙ¶È)
 144      =1  #define T1x12       0x40        //¶¨Ê±Æ÷1Ê±ÖÓ¿ØÖÆ,0:Fosc/12(´«Í³µÄ12·ÖÆµ) 1:Fosc/1(1TÄ£Ê½,²»·ÖÆµ,¼´12±¶ÓÚ´
             -«Í³ËÙ¶È)
 145      =1  #define UR0x6       0x20        //´®¿ÚÄ£Ê½0µÄÊ±ÖÓ¿ØÖÆ,0:Fosc/12(´«Í³µÄ12·ÖÆµ) 1:Fosc/2(2·ÖÆµ,,¼´6±¶ÓÚ´«Í³Ë
             -Ù¶È)
 146      =1  #define BRTR        0x10        //¶ÀÁ¢²¨ÌØÂÊ·¢ÉúÆ÷Æô¶¯¿ØÖÆÎ»,1:Æô¶¯¶ÀÁ¢²¨ÌØÂÊ·¢ÉúÆ÷ 0:Í£Ö¹¶ÀÁ¢²¨ÌØÂÊ·¢ÉúÆ÷
 147      =1  #define S2SMOD      0x08        //´®¿Ú2²¨ÌØÂÊ±¶ËÙÎ»,ÖÃ1¿ÉÊ¹´®¿Ú2µÄ²¨ÌØÂÊ¿ì1±¶
 148      =1  #define BRTx12      0x04        //¶ÀÁ¢²¨ÌØÂÊ·¢ÉúÆ÷Ê±ÖÓ¿ØÖÆ,0:Fosc/12(´«Í³µÄ12·ÖÆµ) 1:Fosc/1(1TÄ£Ê½,²»·ÖÆµ,
             -¼´12±¶ÓÚ´«Í³ËÙ¶È)
 149      =1  #define EXTRAM      0x02        //ÄÚ²¿À©Õ¹RAM½ûÄÜÎ»,0:ÄÚ²¿À©Õ¹RAMÓÐÐ§ 1:½ûÓÃÄÚ²¿À©Õ¹RAM
 150      =1  #define S1BRS       0x01        //´®¿Ú1µÄ²¨ÌØÂÊ·¢ÉúÆ÷Ñ¡ÔñÎ»,0:¶¨Ê±Æ÷1 1:¶ÀÁ¢²¨ÌØÂÊ·¢ÉúÆ÷(×¢Òâ´®¿Ú2Ö»ÄÜ¹»Ê¹
             -ÓÃ¶ÀÁ¢²¨ÌØÂÊ·¢ÉúÆ÷)
 151      =1  
 152      =1  /////////////////////////////////
 153      =1  
 154      =1  sfr  AUXR1      =   0xa2;       //¸¨Öú¼Ä´æÆ÷1           Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 155      =1                                  //Î»ÃèÊö                -       PCA_P4  SPI_P4  S2_P4   GF2     ADRJ    - 
             -      DPS
 156      =1                                  //³õÊ¼Öµ=x000,00x0      x       0       0       0       0       0       x 
             -      0
 157      =1  
 158      =1  #define PCA_P4      0x40        //½«PCA¿ÚÓ³Éäµ½P4¿Ú,0:ECI(P1.2)CEX0(P1.3)CEX1(P1.4) 1:ECI(P4.1)CEX0(P4.2)C
             -EX1(P4.3)
 159      =1  #define SPI_P4      0x20        //½«SPI¿ÚÓ³Éäµ½P4¿Ú,0:SCLK(P1.7)MISO(P1.6)MOSI(P1.5)SS(P1.4) 1:SCLK(P4.3)M
             -ISO(P4.2)MOSI(P4.1)SS(P4.0)
 160      =1  #define S2_P4       0x10        //½«´®¿Ú2Ó³Éäµ½P4¿Ú,0:RXD2(P1.2)TXD2(P1.3) 1:RXD2(P4.2)TXD2(P4.3)
 161      =1  #define GF2         0x08        //Í¨ÓÃ±êÖ¾Î»2
 162      =1  #define ADRJ        0x04        //ADC½á¹ûµ÷Õû,0:{ADC_RES[9876,5432],ADC_RESL[----,--10]} 1:{ADC_RES[----,-
             --98],ADC_RESL[7654,3210]}
 163      =1  #define DPS         0x01        //DPTR0/DPTR1Ñ¡ÔñÎ»,0:DPTR0 1:DPTR1
 164      =1  
 165      =1  //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -//////
 166      =1  
 167      =1  sfr  P0         =   0x80;       //I/O¶Ë¿Ú0              Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 168      =1                                  //Î»ÃèÊö                P0.7    P0.6    P0.5    P0.4    P0.3    P0.2    P0
             -.1    P0.0
 169      =1                                  //³õÊ¼Öµ=1111,1111      1       1       1       1       1       1       1 
             -      1
 170      =1  
 171      =1  sbit P07        =   P0^7;       //I/O¿ÚP0.7
 172      =1  sbit P06        =   P0^6;       //I/O¿ÚP0.6
 173      =1  sbit P05        =   P0^5;       //I/O¿ÚP0.5
 174      =1  sbit P04        =   P0^4;       //I/O¿ÚP0.4
 175      =1  sbit P03        =   P0^3;       //I/O¿ÚP0.3
 176      =1  sbit P02        =   P0^2;       //I/O¿ÚP0.2
 177      =1  sbit P01        =   P0^1;       //I/O¿ÚP0.1
 178      =1  sbit P00        =   P0^0;       //I/O¿ÚP0.0
 179      =1  
 180      =1  /////////////////////////////////
 181      =1  
 182      =1  sfr  P1         =   0x90;       //I/O¶Ë¿Ú0              Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 5   

 183      =1                                  //Î»ÃèÊö                P1.7    P1.6    P1.5    P1.4    P1.3    P1.2    P1
             -.1    P1.0
 184      =1                                  //³õÊ¼Öµ=1111,1111      1       1       1       1       1       1       1 
             -      1
 185      =1  
 186      =1  sbit P17        =   P1^7;       //I/O¿ÚP1.7
 187      =1  sbit P16        =   P1^6;       //I/O¿ÚP1.6
 188      =1  sbit P15        =   P1^5;       //I/O¿ÚP1.5
 189      =1  sbit P14        =   P1^4;       //I/O¿ÚP1.4
 190      =1  sbit P13        =   P1^3;       //I/O¿ÚP1.3
 191      =1  sbit P12        =   P1^2;       //I/O¿ÚP1.2
 192      =1  sbit P11        =   P1^1;       //I/O¿ÚP1.1
 193      =1  sbit P10        =   P1^0;       //I/O¿ÚP1.0
 194      =1  
 195      =1  sbit ADCIN7     =   P1^7;       //ADCÍ¨µÀ7µÄÄ£ÄâÐÅºÅÊäÈë½Å
 196      =1  sbit ADCIN6     =   P1^6;       //ADCÍ¨µÀ6µÄÄ£ÄâÐÅºÅÊäÈë½Å
 197      =1  sbit ADCIN5     =   P1^5;       //ADCÍ¨µÀ5µÄÄ£ÄâÐÅºÅÊäÈë½Å
 198      =1  sbit ADCIN4     =   P1^4;       //ADCÍ¨µÀ4µÄÄ£ÄâÐÅºÅÊäÈë½Å
 199      =1  sbit ADCIN3     =   P1^3;       //ADCÍ¨µÀ3µÄÄ£ÄâÐÅºÅÊäÈë½Å
 200      =1  sbit ADCIN2     =   P1^2;       //ADCÍ¨µÀ2µÄÄ£ÄâÐÅºÅÊäÈë½Å
 201      =1  sbit ADCIN1     =   P1^1;       //ADCÍ¨µÀ1µÄÄ£ÄâÐÅºÅÊäÈë½Å
 202      =1  sbit ADCIN0     =   P1^0;       //ADCÍ¨µÀ0µÄÄ£ÄâÐÅºÅÊäÈë½Å
 203      =1  
 204      =1  sbit SPISCLK    =   P1^7;       //SPI×ÜÏßµÄÊ±ÖÓ½Å
 205      =1  sbit SPIMISO    =   P1^6;       //SPI×ÜÏßµÄÖ÷³ö´ÓÈë½Å
 206      =1  sbit SPIMOSI    =   P1^5;       //SPI×ÜÏßµÄÖ÷Èë´Ó³ö½Å
 207      =1  sbit SPISS      =   P1^4;       //SPI×ÜÏßµÄ´Ó»úÑ¡Ôñ½Å
 208      =1  
 209      =1  sbit CEX1       =   P1^4;       //±È½Ï/²¶»ñ/PWM1Íâ²¿Òý½Å
 210      =1  sbit CEX0       =   P1^3;       //±È½Ï/²¶»ñ/PWM0Íâ²¿Òý½Å
 211      =1  sbit ECI        =   P1^2;       //±È½Ï/²¶»ñ/PWMÄ£¿éµÄÍâ²¿Ê±ÖÓÊäÈë½Å(×î´óÖµÎªFosc/2)
 212      =1  
 213      =1  sbit TXD2       =   P1^3;       //´®¿Ú2Êý¾ÝÊä³ö½Å
 214      =1  sbit RXD2       =   P1^2;       //´®¿Ú2Êý¾ÝÊäÈë½Å
 215      =1  
 216      =1  sbit BRTCLKO    =   P1^0;       //BRTÊ±ÖÓÒç³öÂö³åÊä³ö½Å
 217      =1  
 218      =1  /////////////////////////////////
 219      =1  
 220      =1  sfr  P2         =   0xa0;       //I/O¶Ë¿Ú2              Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 221      =1                                  //Î»ÃèÊö                P2.7    P2.6    P2.5    P2.4    P2.3    P2.2    P2
             -.1    P2.0
 222      =1                                  //³õÊ¼Öµ=1111,1111      1       1       1       1       1       1       1 
             -      1
 223      =1  
 224      =1  sbit P27        =   P2^7;       //I/O¿ÚP2.7
 225      =1  sbit P26        =   P2^6;       //I/O¿ÚP2.6
 226      =1  sbit P25        =   P2^5;       //I/O¿ÚP2.5
 227      =1  sbit P24        =   P2^4;       //I/O¿ÚP2.4
 228      =1  sbit P23        =   P2^3;       //I/O¿ÚP2.3
 229      =1  sbit P22        =   P2^2;       //I/O¿ÚP2.2
 230      =1  sbit P21        =   P2^1;       //I/O¿ÚP2.1
 231      =1  sbit P20        =   P2^0;       //I/O¿ÚP2.0
 232      =1  
 233      =1  /////////////////////////////////
 234      =1  
 235      =1  sfr  P3         =   0xb0;       //I/O¶Ë¿Ú3              Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 236      =1                                  //Î»ÃèÊö                P3.7    P3.6    P3.5    P3.4    P3.3    P3.2    P3
             -.1    P3.0
 237      =1                                  //³õÊ¼Öµ=1111,1111      1       1       1       1       1       1       1 
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 6   

             -      1
 238      =1  
 239      =1  sbit P37        =   P3^7;       //I/O¿ÚP3.7
 240      =1  sbit P36        =   P3^6;       //I/O¿ÚP3.6
 241      =1  sbit P35        =   P3^5;       //I/O¿ÚP3.5
 242      =1  sbit P34        =   P3^4;       //I/O¿ÚP3.4
 243      =1  sbit P33        =   P3^3;       //I/O¿ÚP3.3
 244      =1  sbit P32        =   P3^2;       //I/O¿ÚP3.2
 245      =1  sbit P31        =   P3^1;       //I/O¿ÚP3.1
 246      =1  sbit P30        =   P3^0;       //I/O¿ÚP3.0
 247      =1  
 248      =1  sbit RXD        =   P3^0;       //´®¿Ú1µÄÊý¾Ý½ÓÊÕ¿Ú
 249      =1  sbit TXD        =   P3^1;       //´®¿Ú1µÄÊý¾Ý·¢ËÍ¿Ú
 250      =1  sbit INT0       =   P3^2;       //Íâ²¿ÖÐ¶Ï0µÄÐÅºÅÊäÈë¿Ú
 251      =1  sbit INT1       =   P3^3;       //Íâ²¿ÖÐ¶Ï1µÄÐÅºÅÊä³ö¿Ú
 252      =1  sbit T0         =   P3^4;       //¶¨Ê±Æ÷0µÄÍâ²¿ÐÅºÅÊäÈë¿Ú
 253      =1  sbit T1         =   P3^5;       //¶¨Ê±Æ÷1µÄÍâ²¿ÐÅºÅÊäÈë¿Ú
 254      =1  sbit WR         =   P3^6;       //Íâ²¿Êý¾Ý´æ´¢Æ÷µÄÐ´ÐÅºÅ
 255      =1  sbit RD         =   P3^7;       //Íâ²¿Êý¾Ý´æ´¢Æ÷µÄ¶ÁÐÅºÅ
 256      =1  
 257      =1  sbit T0CLKO     =   P3^4;       //¶¨Ê±Æ÷0µÄÊ±ÖÓÒç³öÂö³åÊä³ö½Å
 258      =1  sbit T1CLKO     =   P3^5;       //¶¨Ê±Æ÷1µÄÊ±ÖÓÒç³öÂö³åÊä³ö½Å
 259      =1  
 260      =1  /////////////////////////////////
 261      =1  
 262      =1  sfr  P4         =   0xc0;       //I/O¶Ë¿Ú4              Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 263      =1                                  //Î»ÃèÊö                P4.7    P4.6    P4.5    P4.4    P4.3    P4.2    P4
             -.1    P4.0
 264      =1                                  //³õÊ¼Öµ=1111,1111      1       1       1       1       1       1       1 
             -      1
 265      =1  
 266      =1  sbit P47        =   P4^7;       //I/O¿ÚP4.7
 267      =1  sbit P46        =   P4^6;       //I/O¿ÚP4.6
 268      =1  sbit P45        =   P4^5;       //I/O¿ÚP4.5
 269      =1  sbit P44        =   P4^4;       //I/O¿ÚP4.4
 270      =1  sbit P43        =   P4^3;       //I/O¿ÚP4.3
 271      =1  sbit P42        =   P4^2;       //I/O¿ÚP4.2
 272      =1  sbit P41        =   P4^1;       //I/O¿ÚP4.1
 273      =1  sbit P40        =   P4^0;       //I/O¿ÚP4.0
 274      =1  
 275      =1  sbit RST        =   P4^7;       //¸´Î»½Å,¿ÉÍ¨¹ý±à³ÌÆ÷ÉèÖÃ
 276      =1  sbit EX_LVD     =   P4^6;       //Íâ²¿µÍÑ¹¼ì²âÒý½Å
 277      =1  
 278      =1  sbit P4SPISCLK  =   P4^3;       //SPI×ÜÏßµÄÊ±ÖÓ½Å
 279      =1  sbit P4SPIMISO  =   P4^2;       //SPI×ÜÏßµÄÖ÷³ö´ÓÈë½Å
 280      =1  sbit P4SPIMOSI  =   P4^1;       //SPI×ÜÏßµÄÖ÷Èë´Ó³ö½Å
 281      =1  sbit P4SPISS    =   P4^0;       //SPI×ÜÏßµÄ´Ó»úÑ¡Ôñ½Å
 282      =1  
 283      =1  sbit P4CEX1     =   P4^3;       //±È½Ï/²¶»ñ/PWM1Íâ²¿Òý½Å
 284      =1  sbit P4CEX0     =   P4^2;       //±È½Ï/²¶»ñ/PWM0Íâ²¿Òý½Å
 285      =1  sbit P4ECI      =   P4^1;       //±È½Ï/²¶»ñ/PWMÄ£¿éµÄÍâ²¿Ê±ÖÓÊäÈë½Å(×î´óÖµÎªFosc/2)
 286      =1  
 287      =1  sbit P4TXD2     =   P4^3;       //´®¿Ú2Êý¾ÝÊä³ö½Å
 288      =1  sbit P4RXD2     =   P4^2;       //´®¿Ú2Êý¾ÝÊäÈë½Å
 289      =1  
 290      =1  /////////////////////////////////
 291      =1  
 292      =1  sfr  P5         =   0xc8;       //I/O¶Ë¿Ú5              Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 293      =1                                  //Î»ÃèÊö                -       -       -       -       P5.3    P5.2    P5
             -.1    P5.0
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 7   

 294      =1                                  //³õÊ¼Öµ=xxxx,1111      x       x       x       x       1       1       1 
             -      1
 295      =1  
 296      =1  sbit P53        =   P5^3;       //I/O¿ÚP5.3
 297      =1  sbit P52        =   P5^2;       //I/O¿ÚP5.2
 298      =1  sbit P51        =   P5^1;       //I/O¿ÚP5.1
 299      =1  sbit P50        =   P5^0;       //I/O¿ÚP5.0
 300      =1  
 301      =1  /////////////////////////////////
 302      =1  
 303      =1  sfr  P1M1       =   0x91;       //I/O¿Ú1Ä£Ê½¿ØÖÆÆ÷1     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 304      =1                                  //³õ/Ê¼Öµ=0000,0000     0       0       0       0       0       0       0 
             -      0
 305      =1  
 306      =1  /////////////////////////////////
 307      =1  
 308      =1  sfr  P1M0       =   0x92;       //I/O¿Ú1Ä£Ê½¿ØÖÆÆ÷0     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 309      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 310      =1  
 311      =1  /////////////////////////////////
 312      =1  
 313      =1  sfr  P0M1       =   0x93;       //I/O¿Ú0Ä£Ê½¿ØÖÆÆ÷1     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 314      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 315      =1  
 316      =1  /////////////////////////////////
 317      =1  
 318      =1  sfr  P0M0       =   0x94;       //I/O¿Ú0Ä£Ê½¿ØÖÆÆ÷0     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 319      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 320      =1  
 321      =1  /////////////////////////////////
 322      =1  
 323      =1  sfr  P2M1       =   0x95;       //I/O¿Ú2Ä£Ê½¿ØÖÆÆ÷1     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 324      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 325      =1  
 326      =1  /////////////////////////////////
 327      =1  
 328      =1  sfr  P2M0       =   0x96;       //I/O¿Ú2Ä£Ê½¿ØÖÆÆ÷0     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 329      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 330      =1  
 331      =1  /////////////////////////////////
 332      =1  
 333      =1  sfr  P3M1       =   0xb1;       //I/O¿Ú3Ä£Ê½¿ØÖÆÆ÷1     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 334      =1                                  //³õ/Ê¼Öµ=0000,0000     0       0       0       0       0       0       0 
             -      0
 335      =1  
 336      =1  /////////////////////////////////
 337      =1  
 338      =1  sfr  P3M0       =   0xb2;       //I/O¿Ú3Ä£Ê½¿ØÖÆÆ÷0     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 339      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 8   

             -      0
 340      =1  
 341      =1  /////////////////////////////////
 342      =1  
 343      =1  sfr  P4M1       =   0xb3;       //I/O¿Ú4Ä£Ê½¿ØÖÆÆ÷1     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 344      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 345      =1  
 346      =1  /////////////////////////////////
 347      =1  
 348      =1  sfr  P4M0       =   0xb4;       //I/O¿Ú4Ä£Ê½¿ØÖÆÆ÷0     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 349      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 350      =1  
 351      =1  /////////////////////////////////
 352      =1  
 353      =1  sfr  P5M1       =   0xc9;       //I/O¿Ú5Ä£Ê½¿ØÖÆÆ÷1     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 354      =1                                  //³õÊ¼Öµ=xxxx,0000      x       x       x       x       0       0       0 
             -      0
 355      =1  
 356      =1  /////////////////////////////////
 357      =1  
 358      =1  sfr  P5M0       =   0xca;       //I/O¿Ú5Ä£Ê½¿ØÖÆÆ÷0     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 359      =1                                  //³õÊ¼Öµ=xxxx,0000      x       x       x       x       0       0       0 
             -      0
 360      =1  
 361      =1  /////////////////////////////////
 362      =1  
 363      =1  // PxM1 PxM0
 364      =1  //  0    0     ×¼Ë«Ïò¿Ú
 365      =1  //  0    1     Ç¿ÍÆÍìÊä³ö
 366      =1  //  1    0     ¸ß×èÊäÈëÌ¬
 367      =1  //  1    1     ¿ªÂ©Êä³ö
 368      =1  
 369      =1  /////////////////////////////////
 370      =1  
 371      =1  sfr  P1ASF      =   0x9d;       //P1¿ÚÄ£Äâ¹¦ÄÜ¿ØÖÆÎ»    Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 372      =1                                  //Î»ÃèÊö                P17ASF  P16ASF  P15ASF  P14ASF  P13ASF  P12ASF  P1
             -1ASF  P10ASF
 373      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 374      =1  
 375      =1  #define P17ASF      0x80        //P1.7¿ÚÎªADCÊäÈë½Å
 376      =1  #define P16ASF      0x40        //P1.7¿ÚÎªADCÊäÈë½Å
 377      =1  #define P15ASF      0x20        //P1.7¿ÚÎªADCÊäÈë½Å
 378      =1  #define P14ASF      0x10        //P1.7¿ÚÎªADCÊäÈë½Å
 379      =1  #define P13ASF      0x08        //P1.7¿ÚÎªADCÊäÈë½Å
 380      =1  #define P12ASF      0x04        //P1.7¿ÚÎªADCÊäÈë½Å
 381      =1  #define P11ASF      0x02        //P1.7¿ÚÎªADCÊäÈë½Å
 382      =1  #define P10ASF      0x01        //P1.7¿ÚÎªADCÊäÈë½Å
 383      =1  
 384      =1  /////////////////////////////////
 385      =1  
 386      =1  sfr  P4SW       =   0xbb;       //P4¿ÚµÄ¹¦ÄÜ¿ª¹Ø        Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 387      =1                                  //Î»ÃèÊö                -    LVD_P4.6 ALE_P4.5 NA_P4.4  -       -       - 
             -      -
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 9   

 388      =1                                  //³õÊ¼Öµ=x000,xxxx      x       0       0       0       x       x       x 
             -      x
 389      =1  
 390      =1  #define P46EN       0x40        //´«Í³µÄEA½Å 0:ÎªLVDµÄÐÅºÅÒýÈë½Å 1:ÎªP4.6
 391      =1  #define P45EN       0x20        //´«Í³µÄALE½Å 0:ÈÔÎªALE 1:ÎªP4.5
 392      =1  #define P44EN       0x10        //´«Í³µÄPSEN½Å 0:ÎÞÈÎºÎ¹¦ÄÜ 1:ÎªP4.4
 393      =1  
 394      =1  //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -//////
 395      =1  
 396      =1  sfr  IE         =   0xa8;       //ÖÐ¶ÏÊ¹ÄÜ¼Ä´æÆ÷        Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 397      =1                                  //Î»ÃèÊö                EA      ELVD    EADC    ES      ET1     EX1     ET
             -0     EX0
 398      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 399      =1  
 400      =1  sbit EA         =   IE^7;       //×ÜÖÐ¶Ï¿ª¹Ø
 401      =1  sbit ELVD       =   IE^6;       //LVDÖÐ¶ÏÊ¹ÄÜÎ»
 402      =1  sbit EADC       =   IE^5;       //ADCÖÐ¶ÏÊ¹ÄÜÎ»
 403      =1  sbit ES         =   IE^4;       //´®¿ÚÖÐ¶ÏÊ¹ÄÜÎ»
 404      =1  sbit ET1        =   IE^3;       //¶¨Ê±Æ÷1ÖÐ¶ÏÊ¹ÄÜÎ»
 405      =1  sbit EX1        =   IE^2;       //Íâ²¿ÖÐ¶Ï1ÖÐ¶ÏÊ¹ÄÜÎ»
 406      =1  sbit ET0        =   IE^1;       //¶¨Ê±Æ÷0ÖÐ¶ÏÊ¹ÄÜÎ»
 407      =1  sbit EX0        =   IE^0;       //Íâ²¿ÖÐ¶Ï0ÖÐ¶ÏÊ¹ÄÜÎ»
 408      =1  
 409      =1  /////////////////////////////////
 410      =1  
 411      =1  sfr  IE2        =   0xaf;       //ÖÐ¶ÏÊ¹ÄÜ¼Ä´æÆ÷2       Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 412      =1                                  //Î»ÃèÊö                -       -       -       -       -       -       ES
             -PI    ES2
 413      =1                                  //³õÊ¼Öµ=xxxx,xx00      x       x       x       x       x       x       0 
             -      0
 414      =1  
 415      =1  #define ESPI        0x02        //SPIÖÐ¶ÏÊ¹ÄÜÎ»
 416      =1  #define ES2         0x01        //´®¿Ú2ÖÐ¶ÏÊ¹ÄÜÎ»
 417      =1  
 418      =1  /////////////////////////////////
 419      =1  
 420      =1  #define X0_INTNO    0           //Íâ²¿ÖÐ¶Ï0ÖÐ¶ÏºÅ,Èë¿ÚµØÖ·Îª0003H
 421      =1  #define T0_INTNO    1           //¶¨Ê±Æ÷0ÖÐ¶ÏºÅ,Èë¿ÚµØÖ·Îª000BH
 422      =1  #define X1_INTNO    2           //Íâ²¿ÖÐ¶Ï1ÖÐ¶ÏºÅ,Èë¿ÚµØÖ·Îª0013H
 423      =1  #define T1_INTNO    3           //¶¨Ê±Æ÷1ÖÐ¶ÏºÅ,Èë¿ÚµØÖ·Îª001BH
 424      =1  #define UART_INTNO  4           //´®¿ÚÖÐ¶ÏºÅ,Èë¿ÚµØÖ·Îª0023H
 425      =1  #define ADC_INTNO   5           //ADCÖÐ¶ÏºÅ,Èë¿ÚµØÖ·Îª002BH
 426      =1  #define LVD_INTNO   6           //LVDÖÐ¶ÏºÅ,Èë¿ÚµØÖ·Îª0033H
 427      =1  #define UART2_INTNO 8           //´®¿Ú2ÖÐ¶ÏºÅ,Èë¿ÚµØÖ·Îª0043H
 428      =1  #define SPI_INTNO   9           //SPIÖÐ¶ÏºÅ,Èë¿ÚµØÖ·Îª004BH
 429      =1  
 430      =1  /////////////////////////////////
 431      =1  
 432      =1  sfr  IP2        =   0xb5;       //ÖÐ¶ÏÓÅÏÈ¼¶¼Ä´æÆ÷2     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 433      =1                                  //Î»ÃèÊö                -       -       -       -       -       -       PS
             -PI    PS2
 434      =1                                  //³õÊ¼Öµ=xxxx,xx00      x       x       x       x       x       x       0 
             -      0
 435      =1  
 436      =1  #define PSPI        0x02        //SPIÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆµÍÎ»
 437      =1  #define PS2         0x01        //´®¿Ú2ÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆµÍÎ»
 438      =1  
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 10  

 439      =1  /////////////////////////////////
 440      =1  
 441      =1  sfr  IP2H       =   0xb6;       //ÖÐ¶ÏÓÅÏÈ¼¶¼Ä´æÆ÷2¸ßÎ» Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 442      =1                                  //Î»ÃèÊö                -       -       -       -       -       -       PS
             -PIH   PS2H
 443      =1                                  //³õÊ¼Öµ=xxxx,xx00      x       x       x       x       x       x       0 
             -      0
 444      =1  
 445      =1  #define PSPIH       0x02        //SPIÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆ¸ßÎ»
 446      =1  #define PS2H        0x01        //´®¿Ú2ÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆ¸ßÎ»
 447      =1  
 448      =1  /////////////////////////////////
 449      =1  
 450      =1  sfr  IPH        =   0xb7;       //ÖÐ¶ÏÓÅÏÈ¼¶¼Ä´æÆ÷¸ßÎ»  Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 451      =1                                  //Î»ÃèÊö                PPCAH   PLVDH   PADCH   PSH     PT1H    PX1H    PT
             -0H    PX0H
 452      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 453      =1  
 454      =1  #define PPCAH       0x80        //PCAÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆ¸ßÎ»
 455      =1  #define PLVDH       0x40        //LVDÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆ¸ßÎ»
 456      =1  #define PADCH       0x20        //ADCÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆ¸ßÎ»
 457      =1  #define PSH         0x10        //´®¿ÚÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆ¸ßÎ»
 458      =1  #define PT1H        0x08        //¶¨Ê±Æ÷1ÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆ¸ßÎ»
 459      =1  #define PX1H        0x04        //Íâ²¿ÖÐ¶Ï1ÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆ¸ßÎ»
 460      =1  #define PT0H        0x02        //¶¨Ê±Æ÷0ÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆ¸ßÎ»
 461      =1  #define PX0H        0x01        //Íâ²¿ÖÐ¶Ï0ÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆ¸ßÎ»
 462      =1  
 463      =1  /////////////////////////////////
 464      =1  
 465      =1  sfr  IP         =   0xb8;       //ÖÐ¶ÏÓÅÏÈ¼¶¼Ä´æÆ÷      Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 466      =1                                  //Î»ÃèÊö                PPCA    PLVD    PADC    PS      PT1     PX1     PT
             -0     PX0
 467      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 468      =1  
 469      =1  sbit PPCA       =   IP^7;       //PCAÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆµÍÎ»
 470      =1  sbit PLVD       =   IP^6;       //LVDÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆµÍÎ»
 471      =1  sbit PADC       =   IP^5;       //ADCÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆµÍÎ»
 472      =1  sbit PS         =   IP^4;       //´®¿ÚÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆµÍÎ»
 473      =1  sbit PT1        =   IP^3;       //¶¨Ê±Æ÷1ÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆµÍÎ»
 474      =1  sbit PX1        =   IP^2;       //Íâ²¿ÖÐ¶Ï1ÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆµÍÎ»
 475      =1  sbit PT0        =   IP^1;       //¶¨Ê±Æ÷0ÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆµÍÎ»
 476      =1  sbit PX0        =   IP^0;       //Íâ²¿ÖÐ¶Ï0ÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆµÍÎ»
 477      =1  
 478      =1  //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -//////
 479      =1  
 480      =1  sfr  TCON       =   0x88;       //¶¨Ê±Æ÷0/1¿ØÖÆ¼Ä´æÆ÷   Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 481      =1                                  //Î»ÃèÊö                TF1     TR1     TF0     TR0     IE1     IT1     IE
             -0     IT0
 482      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 483      =1  
 484      =1  sbit TF1        = TCON^7;       //¶¨Ê±Æ÷1Òç³ö±êÖ¾,ÓÉÓ²¼þÖÃ1,¿ÉÓÉÈí¼þÇå0»òÕßÔÚÖÐ¶Ï´¦Àí³ÌÐòÍê³ÉºóÓÉÓ²¼þ×Ô¶¯Ç
             -å0
 485      =1  sbit TR1        = TCON^6;       //¶¨Ê±Æ÷1µÄÆô¶¯¿ØÖÆÎ»,1:Æô¶¯¶¨Ê±Æ÷ 0:Í£Ö¹¶¨Ê±Æ÷
 486      =1  sbit TF0        = TCON^5;       //¶¨Ê±Æ÷0Òç³ö±êÖ¾,ÓÉÓ²¼þÖÃ1,¿ÉÓÉÈí¼þÇå0»òÕßÔÚÖÐ¶Ï´¦Àí³ÌÐòÍê³ÉºóÓÉÓ²¼þ×Ô¶¯Ç
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 11  

             -å0
 487      =1  sbit TR0        = TCON^4;       //¶¨Ê±Æ÷0µÄÆô¶¯¿ØÖÆÎ»,1:Æô¶¯¶¨Ê±Æ÷ 0:Í£Ö¹¶¨Ê±Æ÷
 488      =1  sbit IE1        = TCON^3;       //Íâ²¿ÖÐ¶Ï1µÄÖÐ¶ÏÇëÇóÎ»,ÓÉÓ²¼þÖÃ1,¿ÉÓÉÈí¼þÇå0»òÕßÔÚÖÐ¶Ï´¦Àí³ÌÐòÍê³ÉºóÓÉÓ²¼
             -þ×Ô¶¯Çå0
 489      =1  sbit IT1        = TCON^2;       //Íâ²¿ÖÐ¶Ï1µÄ´¥·¢ÀàÐÍ,0:µÍµçÆ½´¥·¢Íâ²¿ÖÐ¶Ï 1:ÏÂ½µÑØ´¥·¢Íâ²¿ÖÐ¶Ï
 490      =1  sbit IE0        = TCON^1;       //Íâ²¿ÖÐ¶Ï0µÄÖÐ¶ÏÇëÇóÎ»,ÓÉÓ²¼þÖÃ1,¿ÉÓÉÈí¼þÇå0»òÕßÔÚÖÐ¶Ï´¦Àí³ÌÐòÍê³ÉºóÓÉÓ²¼
             -þ×Ô¶¯Çå0
 491      =1  sbit IT0        = TCON^0;       //Íâ²¿ÖÐ¶Ï0µÄ´¥·¢ÀàÐÍ,0:µÍµçÆ½´¥·¢Íâ²¿ÖÐ¶Ï 1:ÏÂ½µÑØ´¥·¢Íâ²¿ÖÐ¶Ï
 492      =1  
 493      =1  /////////////////////////////////
 494      =1  
 495      =1  sfr  TMOD       =   0x89;       //¶¨Ê±Æ÷0/1Ä£Ê½¼Ä´æÆ÷   Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 496      =1                                  //Î»ÃèÊö                GATE    C/T#    M1      M0      GATE    C/T#    M1
             -      M0
 497      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 498      =1  
 499      =1  #define GATE1       0x80        //¶¨Ê±Æ÷1Æô¶¯¿ØÖÆÎ»,0:TR1Îª1Ê±Æô¶¯¶¨Ê±Æ÷1 1:TR1Îª1ÇÒINT1Îª¸ßµçÆ½Ê±²ÅÆô¶¯¶¨
             -Ê±Æ÷1
 500      =1  #define C_T1        0x40        //¶¨Ê±Æ÷/¼ÆÊýÆ÷Ñ¡ÔñÎ»,0:¶¨Ê±Æ÷(Ê±ÖÓÔ´ÎªÄÚ²¿Ê±ÖÓ) 1:¼ÆÊýÆ÷(Ê±ÖÓÔ´ÎªT1Òý½ÅµÄ
             -Íâ²¿Ê±ÖÓ)
 501      =1  #define T1_M0       0x00        //¶¨Ê±Æ÷1²Ù×÷Ä£Ê½0:13Î»¶¨Ê±Æ÷
 502      =1  #define T1_M1       0x10        //¶¨Ê±Æ÷1²Ù×÷Ä£Ê½1:16Î»¶¨Ê±Æ÷
 503      =1  #define T1_M2       0x20        //¶¨Ê±Æ÷1²Ù×÷Ä£Ê½2:8Î»×Ô¶¯ÖØÔØ¶¨Ê±Æ÷
 504      =1  #define T1_M3       0x30        //¶¨Ê±Æ÷1²Ù×÷Ä£Ê½3:¶¨Ê±Æ÷1Í£Ö¹
 505      =1  #define GATE0       0x08        //¶¨Ê±Æ÷1Æô¶¯¿ØÖÆÎ»,0:TR0Îª1Ê±Æô¶¯¶¨Ê±Æ÷1 1:TR0Îª1ÇÒINT0Îª¸ßµçÆ½Ê±²ÅÆô¶¯¶¨
             -Ê±Æ÷0
 506      =1  #define C_T0        0x04        //¶¨Ê±Æ÷/¼ÆÊýÆ÷Ñ¡ÔñÎ»,0:¶¨Ê±Æ÷(Ê±ÖÓÔ´ÎªÄÚ²¿Ê±ÖÓ) 1:¼ÆÊýÆ÷(Ê±ÖÓÔ´ÎªT0Òý½ÅµÄ
             -Íâ²¿Ê±ÖÓ)
 507      =1  #define T0_M0       0x00        //¶¨Ê±Æ÷0²Ù×÷Ä£Ê½0:13Î»¶¨Ê±Æ÷
 508      =1  #define T0_M1       0x01        //¶¨Ê±Æ÷0²Ù×÷Ä£Ê½1:16Î»¶¨Ê±Æ÷
 509      =1  #define T0_M2       0x02        //¶¨Ê±Æ÷0²Ù×÷Ä£Ê½2:8Î»×Ô¶¯ÖØÔØ¶¨Ê±Æ÷
 510      =1  #define T0_M3       0x03        //¶¨Ê±Æ÷0²Ù×÷Ä£Ê½3:TL0ºÍTH0ÎªÁ½×é¶ÀÁ¢8Î»¶¨Ê±Æ÷
 511      =1  
 512      =1  /////////////////////////////////
 513      =1  
 514      =1  sfr  TL0        = 0x8a;         //¶¨Ê±Æ÷0µÄµÍ8Î»¼ÆÊýÖµ  Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 515      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 516      =1  
 517      =1  /////////////////////////////////
 518      =1  
 519      =1  sfr  TL1        = 0x8b;         //¶¨Ê±Æ÷1µÄµÍ8Î»¼ÆÊýÖµ  Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 520      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 521      =1  
 522      =1  /////////////////////////////////
 523      =1  
 524      =1  sfr  TH0        = 0x8c;         //¶¨Ê±Æ÷0µÄ¸ß8Î»¼ÆÊýÖµ  Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 525      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 526      =1  
 527      =1  /////////////////////////////////
 528      =1  
 529      =1  sfr  TH1        = 0x8d;         //¶¨Ê±Æ÷1µÄ¸ß8Î»¼ÆÊýÖµ  Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 530      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 12  

 531      =1  
 532      =1  //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -//////
 533      =1  
 534      =1  sfr  SCON       =   0x98;       //´®¿Ú¿ØÖÆ¼Ä´æÆ÷        Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 535      =1                                  //Î»ÃèÊö                SM0/FE  SM1     SM2     REN     TB8     RB8     TI
             -      Ri
 536      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 537      =1  
 538      =1  sbit FE         =   SCON^7;     //Ö¡´íÎó¼ì²âÎ»,µ±´®¿ÚÄ£¿éÔÚ½ÓÊÕÊý¾ÝÊ±Ã»ÓÐ¼ì²âµ½ÕýÈ·µÄÍ£Ö¹Î»Ê±,FE±»Ó²¼þÖÃ1,
             -ÐèÒªÓÉÈí¼þÀ´Çå0(µ±SMOD0Îª1Ê±,FEÓÐÐ§)
 539      =1  sbit SM0        =   SCON^7;     //´®¿ÚÄ£Ê½ÉèÖÃÎ»
 540      =1  sbit SM1        =   SCON^6;     //SM0/SM1=0/0:ÒÆÎ»¼Ä´æÆ÷ 0/1:8Î»¿É±ä²¨ÌØÂÊ 1/0:9Î»¹Ì¶¨²¨ÌØÂÊ 1/1:9Î»¿É±ä²¨
             -ÌØÂÊ
 541      =1  sbit SM2        =   SCON^5;     //×Ô¶¯µØÖ·Ê¶±ðÊ¹ÄÜÎ»
 542      =1  sbit REN        =   SCON^4;     //Ê¹ÄÜ´®¿Ú½ÓÊÕÄ£¿é
 543      =1  sbit TB8        =   SCON^3;     //·¢ËÍµÄµÚ9Î»Êý¾Ý
 544      =1  sbit RB8        =   SCON^2;     //½ÓÊÕµÄµÚ9Î»Êý¾Ý
 545      =1  sbit TI         =   SCON^1;     //·¢ËÍÍê³ÉÖÐ¶Ï±êÖ¾
 546      =1  sbit RI         =   SCON^0;     //½ÓÊÕÍê³ÉÖÐ¶Ï±êÖ¾
 547      =1  
 548      =1  /////////////////////////////////
 549      =1  
 550      =1  sfr  SBUF       =   0x99;       //´®¿Ú½ÓÊÕ/·¢ËÍÊý¾Ý     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 551      =1                                  //³õÊ¼Öµ=xxxx,xxxx      x       x       x       x       x       x       x 
             -      x
 552      =1  
 553      =1  /////////////////////////////////
 554      =1  
 555      =1  sfr  S2CON      =   0x9a;       //´®¿Ú2¿ØÖÆ¼Ä´æÆ÷       Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 556      =1                                  //Î»ÃèÊö                SM0/FE  SM1     SM2     REN     TB8     RB8     TI
             -      Ri
 557      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 558      =1  
 559      =1  #define S2SM0       0x80        //´®¿Ú2Ä£Ê½ÉèÖÃÎ»
 560      =1  #define S2SM1       0x40        //SM0/SM1=0/0:ÒÆÎ»¼Ä´æÆ÷ 0/1:8Î»¿É±ä²¨ÌØÂÊ 1/0:9Î»¹Ì¶¨²¨ÌØÂÊ 1/1:9Î»¿É±ä²¨
             -ÌØÂÊ
 561      =1  #define S2SM2       0x20        //×Ô¶¯µØÖ·Ê¶±ðÊ¹ÄÜÎ»
 562      =1  #define S2REN       0x10        //Ê¹ÄÜ´®¿Ú2½ÓÊÕÄ£¿é
 563      =1  #define S2TB8       0x08        //·¢ËÍµÄµÚ9Î»Êý¾Ý
 564      =1  #define S2RB8       0x04        //½ÓÊÕµÄµÚ9Î»Êý¾Ý
 565      =1  #define S2TI        0x02        //·¢ËÍÍê³ÉÖÐ¶Ï±êÖ¾
 566      =1  #define S2RI        0x01        //½ÓÊÕÍê³ÉÖÐ¶Ï±êÖ¾
 567      =1  
 568      =1  /////////////////////////////////
 569      =1  
 570      =1  sfr  S2BUF      =   0x9b;       //´®¿Ú2½ÓÊÕ/·¢ËÍÊý¾Ý    Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 571      =1                                  //³õÊ¼Öµ=xxxx,xxxx      x       x       x       x       x       x       x 
             -      x
 572      =1  
 573      =1  /////////////////////////////////
 574      =1  
 575      =1  sfr  SADDR      =   0xa9;       //´®¿ÚÉè±¸´ÓµØÖ·¼Ä´æÆ÷  Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 576      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 13  

 577      =1  
 578      =1  /////////////////////////////////
 579      =1  
 580      =1  sfr  SADEN      =   0xb9;       //´®¿ÚÉè±¸´ÓµØÖ·ÆÁ±ÎÎ»  Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 581      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 582      =1  
 583      =1  /////////////////////////////////
 584      =1  
 585      =1  sfr  BRT        =   0x9c;       //¶ÀÁ¢²¨ÌØÂÊ·¢ÉúÆ÷ÖØÔØÖµBit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 586      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 587      =1  
 588      =1  //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -//////
 589      =1  
 590      =1  sfr  ADC_CONTR  =   0xbc;       //ADC¿ØÖÆ¼Ä´æÆ÷         Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 591      =1                                  //Î»ÃèÊö            ADC_POWER  SPEED1 SPEED0 ADC_FLAG ADC_START CHS2    CH
             -S1    CHS0
 592      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 593      =1  
 594      =1  #define ADC_POWER   0x80        //ADCÄ£¿éµçÔ´¿ØÖÆÎ»
 595      =1  #define ADC_SPEEDLL 0x00        //Ã¿´Î×ª»»ÐèÒª420¸öÊ±ÖÓÖÜÆÚ
 596      =1  #define ADC_SPEEDL  0x20        //Ã¿´Î×ª»»ÐèÒª280¸öÊ±ÖÓÖÜÆÚ
 597      =1  #define ADC_SPEEDH  0x40        //Ã¿´Î×ª»»ÐèÒª140¸öÊ±ÖÓÖÜÆÚ
 598      =1  #define ADC_SPEEDHH 0x60        //Ã¿´Î×ª»»ÐèÒª70¸öÊ±ÖÓÖÜÆÚ
 599      =1  #define ADC_FLAG    0x10        //ADC×ª»»Íê³É±êÖ¾
 600      =1  #define ADC_START   0x08        //ADC¿ªÊ¼×ª»»¿ØÖÆÎ»
 601      =1  #define ADC_CHS2    0x04        //ADCÍ¨µÀÑ¡ÔñÎ»2
 602      =1  #define ADC_CHS1    0x02        //ADCÍ¨µÀÑ¡ÔñÎ»1
 603      =1  #define ADC_CHS0    0x01        //ADCÍ¨µÀÑ¡ÔñÎ»0
 604      =1  
 605      =1  /////////////////////////////////
 606      =1  
 607      =1  sfr  ADC_RES    =   0xbd;       //ADC½á¹û¸ß×Ö½Ú         Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 608      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 609      =1  
 610      =1  /////////////////////////////////
 611      =1  
 612      =1  sfr  ADC_RESL   =   0xbe;       //ADC½á¹ûµÍ×Ö½Ú         Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 613      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 614      =1  
 615      =1  //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -//////
 616      =1  
 617      =1  sfr  IAP_DATA   =   0xc2;       //IAPÊý¾Ý¼Ä´æÆ÷         Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 618      =1                                  //³õÊ¼Öµ=1111,1111      1       1       1       1       1       1       1 
             -      1
 619      =1  
 620      =1  /////////////////////////////////
 621      =1  
 622      =1  sfr  IAP_ADDRH  =   0xc3;       //IAPµØÖ·¸ßÎ»¼Ä´æÆ÷     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 14  

 623      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 624      =1  
 625      =1  /////////////////////////////////
 626      =1  
 627      =1  sfr  IAP_ADDRL  =   0xc4;       //IAPµØÖ·µÍÎ»¼Ä´æÆ÷     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 628      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 629      =1  
 630      =1  /////////////////////////////////
 631      =1  
 632      =1  sfr  IAP_CMD    =   0xc5;       //IAPÃüÁî¼Ä´æÆ÷         Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 633      =1                                  //³õÊ¼Öµ=xxxx,xx00      x       x       x       x       x       x       0 
             -      0
 634      =1  
 635      =1  #define IAP_IDLE    0x00        //IAP´ý»úÃüÁî
 636      =1  #define IAP_READ    0x01        //IAP¶Á×Ö½ÚÊý¾ÝÃüÁî
 637      =1  #define IAP_PROGRAM 0x02        //IAP×Ö½Ú±à³ÌÃüÁî
 638      =1  #define IAP_ERASE   0x03        //IAPÉÈÇø²Á³ýÃüÁî(Ã¿ÉÈÇø512×Ö½Ú))
 639      =1  
 640      =1  /////////////////////////////////
 641      =1  
 642      =1  sfr  IAP_TRIG   =   0xc6;       //IAPÃüÁî´¥·¢¼Ä´æÆ÷     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 643      =1                                  //³õÊ¼Öµ=xxxx,xxxx      x       x       x       x       x       x       x 
             -      x
 644      =1  
 645      =1  #define IAP_TRIG0   0x5a        //IAP¹¦ÄÜ´¥·¢ÃüÁî1
 646      =1  #define IAP_TRIG1   0xa5        //IAP¹¦ÄÜ´¥·¢ÃüÁî2
 647      =1  
 648      =1  /////////////////////////////////
 649      =1  
 650      =1  sfr  IAP_CONTR  =   0xc7;       //IAP¿ØÖÆ¼Ä´æÆ÷         Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 651      =1                                  //Î»ÃèÊö                IAPEN   SWBS    SWRST   CMD_FAIL -      WT2     WT
             -1     WT0
 652      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 653      =1  
 654      =1  #define IAPEN       0x80        //IAPÊ¹ÄÜ¿ª¹Ø
 655      =1  #define SWBS        0x40        //ÈíÆô¶¯Ñ¡Ôñ,0:´ÓÓÃ»§APÆô¶¯ 1:´ÓISPÆô¶¯
 656      =1  #define SWRST       0x20        //´¥·¢Èí¼þ¸´Î»
 657      =1  #define CMD_FAIL    0x10        //IAPÃüÁîÊ§°Ü±êÖ¾
 658      =1  
 659      =1  //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -//////
 660      =1  
 661      =1  sfr  SPSTAT     =   0xcd;       //SPI×´Ì¬¼Ä´æÆ÷         Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 662      =1                                  //Î»ÃèÊö                SPIF    WCOL    -       -       -       -       - 
             -      -
 663      =1                                  //³õÊ¼Öµ=11xx,xxxx      1       1       x       x       x       x       x 
             -      x
 664      =1  
 665      =1  #define SPIF        0x80        //SPI´«ÊäÍê³É±êÖ¾,µ±SPIÖÐ¶ÏÊ¹ÄÜÊ±»á´¥·¢SPIÖÐ¶ÏÇëÇó,ÐèÒªÓÃÈí¼þÏò´ËÎ»Ð´"1"À´
             -Çå0
 666      =1  #define WCOL        0x40        //SPIÐ´³åÍ»±êÖ¾,ÐèÒªÓÃÈí¼þÏò´ËÎ»Ð´"1"À´Çå0
 667      =1  
 668      =1  /////////////////////////////////
 669      =1  
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 15  

 670      =1  sfr  SPCTL      =   0xce;       //SPI¿ØÖÆ¼Ä´æÆ÷         Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 671      =1                                  //Î»ÃèÊö                SSIG    SPEN    DORD    MSTR    CPOL    CPHA    SP
             -R1    SPR0
 672      =1                                  //³õÊ¼Öµ=0000,0100      0       0       0       0       0       1       0 
             -      0
 673      =1  
 674      =1  #define SSIG        0x80        //SSºöÂÔÎ»,1:ÓÉMSTRÈ·¶¨Ö÷/´Ó 0:ÓÉSS½ÅÈ·¶¨Ö÷/´Ó
 675      =1  #define SPEN        0x40        //SPIÄ£¿éÊ¹ÄÜÎ»
 676      =1  #define DORD        0x20        //SPIÊý¾ÝË³Ðò,1:LSB(ÏÈÊÕ/·¢×îµÍÎ») 0:MSB(ÏÈÊÕ/·¢×î¸ßÎ»)
 677      =1  #define MSTR        0x10        //Ö÷/´ÓÄ£Ê½Ñ¡ÔñÎ»
 678      =1  #define CPOL        0x08        //SPIÊ±ÖÓ¼«ÐÔ
 679      =1  #define CPHA        0x04        //SPIÏàÎ»Ñ¡Ôñ
 680      =1  #define SPSPEEDHH   0x00        //×î¿ìµÄËÙ¶È,CPU_CLK/4
 681      =1  #define SPSPEEDH    0x01        //×î¿ìµÄËÙ¶È,CPU_CLK/16
 682      =1  #define SPSPEEDL    0x02        //×î¿ìµÄËÙ¶È,CPU_CLK/64
 683      =1  #define SPSPEEDLL   0x03        //×î¿ìµÄËÙ¶È,CPU_CLK/128
 684      =1  
 685      =1  /////////////////////////////////
 686      =1  
 687      =1  sfr  SPDAT      =   0xcf;       //SPIÊý¾Ý¼Ä´æÆ÷         Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 688      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 689      =1  
 690      =1  //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -//////
 691      =1  
 692      =1  sfr  CCON       =   0xd8;       //PCA¿ØÖÆ¼Ä´æÆ÷         Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 693      =1                                  //Î»ÃèÊö                CF      CR      -       -       -       -       CC
             -F1    CCF0
 694      =1                                  //³õÊ¼Öµ=00xx,xx00      0       0       x       x       x       x       0 
             -      0
 695      =1  
 696      =1  sbit CF         =   CCON^7;     //PCA¼ÆÊýÆ÷Òç³ö±êÖ¾,µ±PCAÖÐ¶ÏÊ¹ÄÜÊ±»á´¥·¢PCAÖÐ¶ÏÇëÇó,ÐèÒªÓÃÈí¼þÇå0
 697      =1  sbit CR         =   CCON^6;     //PCA¼ÆÊýÆ÷Æô¶¯¿ØÖÆÎ»,Ð´"1"Æô¶¯¶«¼ÆÊýÆ÷
 698      =1  sbit CCF1       =   CCON^1;     //PCAÄ£¿é1ÖÐ¶Ï±êÖ¾,ÐèÒªÓÃÈí¼þÇå0
 699      =1  sbit CCF0       =   CCON^0;     //PCAÄ£¿é0ÖÐ¶Ï±êÖ¾,ÐèÒªÓÃÈí¼þÇå0
 700      =1  
 701      =1  /////////////////////////////////
 702      =1  
 703      =1  sfr  CMOD       =   0xd9;       //PCAÄ£Ê½¼Ä´æÆ÷         Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 704      =1                                  //Î»ÃèÊö                CIDL    -       -       -       CPS2    CPS1    CP
             -S0    ECF
 705      =1                                  //³õÊ¼Öµ=0xxx,0000      0       x       x       x       0       0       0 
             -      0
 706      =1  
 707      =1  #define CIDL        0x80        //¼ÆÊ±Æ÷ÕóÁÐ¿ÕÏÐ¿ØÖÆ,0:¿ÕÏÐÄ£Ê½ÏÂPCA¼ÌÐø¹¤×÷ 1:¿ÕÏÐÄ£Ê½ÏÂPCAÍ£Ö¹¹¤×÷
 708      =1  #define PCACLK0     0x00        //Fosc/12
 709      =1  #define PCACLK1     0x02        //Fosc/2
 710      =1  #define PCACLK2     0x04        //¶¨Ê±Æ÷0µÄÒç³öÂÊ
 711      =1  #define PCACLK3     0x06        //ECIÍâ²¿Ê±ÖÓ
 712      =1  #define PCACLK4     0x08        //Fosc/1
 713      =1  #define PCACLK5     0x0a        //Fosc/4
 714      =1  #define PCACLK6     0x0c        //Fosc/6
 715      =1  #define PCACLK7     0x0e        //Fosc/8
 716      =1  #define ECF         0x01        //PCA¼ÆÊýÆ÷Òç³öÖÐ¶ÏÔÊÐíÎ»
 717      =1  
 718      =1  /////////////////////////////////
 719      =1  
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 16  

 720      =1  sfr  CCAPM0     =   0xda;       //PCAÄ£¿é0Ä£Ê½¼Ä´æÆ÷    Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 721      =1                                  //Î»ÃèÊö                -       ECOM0   CAPP0   CAPN0   MAT0    TOG0    PW
             -M0    ECCF0
 722      =1                                  //³õÊ¼Öµ=x000,0000      x       0       0       0       0       0       0 
             -      0
 723      =1  
 724      =1  #define PCA0_ECOM   0x40        //Ê¹ÄÜ±È½ÏÆ÷0
 725      =1  #define PCA0_CAPP   0x20        //Ê¹ÄÜPCAÄ£¿é0µÄÉÏÉýÑØ²¶»ñ
 726      =1  #define PCA0_CAPN   0x10        //Ê¹ÄÜPCAÄ£¿é0µÄÏÂ½µÑØ²¶»ñ
 727      =1  #define PCA0_MAT    0x08        //Æ¥ÅäÊ¹ÄÜ,µ±PCAµÄ¼ÆÊýÖµÓëÄ£¿é0Éè¶¨µÄÖµÏàÆ¥ÅäÊ±,ÖÃCCON.CCF0
 728      =1  #define PCA0_TOG    0x04        //·­×ª¿ØÖÆÎ»,µ±PCAµÄ¼ÆÊýÖµÓëÄ£¿é0Éè¶¨µÄÖµÏàÆ¥ÅäÊ±,·­×ªCEX0µÄµçÆ½
 729      =1  #define PCA0_PWM    0x02        //Âö¿íµ÷ÖÆÄ£Ê½,Ê¹ÄÜCEX0ÎªÂö¿íµ÷ÖÆÊä³ö¿Ú
 730      =1  #define PCA0_ECCF   0x01        //Ê¹ÄÜCCF0ÖÐ¶Ï
 731      =1  
 732      =1  /////////////////////////////////
 733      =1  
 734      =1  sfr  CCAPM1     =   0xdb;       //PCAÄ£¿é1Ä£Ê½¼Ä´æÆ÷    Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 735      =1                                  //Î»ÃèÊö                -       ECOM1   CAPP1   CAPN1   MAT1    TOG1    PW
             -M1    ECCF1
 736      =1                                  //³õÊ¼Öµ=x000,0000      x       0       0       0       0       0       0 
             -      0
 737      =1  
 738      =1  #define PCA1_ECOM   0x40        //Ê¹ÄÜ±È½ÏÆ÷1
 739      =1  #define PCA1_CAPP   0x20        //Ê¹ÄÜPCAÄ£¿é1µÄÉÏÉýÑØ²¶»ñ
 740      =1  #define PCA1_CAPN   0x10        //Ê¹ÄÜPCAÄ£¿é1µÄÏÂ½µÑØ²¶»ñ
 741      =1  #define PCA1_MAT    0x08        //Æ¥ÅäÊ¹ÄÜ,µ±PCAµÄ¼ÆÊýÖµÓëÄ£¿é1Éè¶¨µÄÖµÏàÆ¥ÅäÊ±,ÖÃCCON.CCF1
 742      =1  #define PCA1_TOG    0x04        //·­×ª¿ØÖÆÎ»,µ±PCAµÄ¼ÆÊýÖµÓëÄ£¿é1Éè¶¨µÄÖµÏàÆ¥ÅäÊ±,·­×ªCEX1µÄµçÆ½
 743      =1  #define PCA1_PWM    0x02        //Âö¿íµ÷ÖÆÄ£Ê½,Ê¹ÄÜCEX1ÎªÂö¿íµ÷ÖÆÊä³ö¿Ú
 744      =1  #define PCA1_ECCF   0x01        //Ê¹ÄÜCCF1ÖÐ¶Ï
 745      =1  
 746      =1  /////////////////////////////////
 747      =1  
 748      =1  //CCAPM0   -   ECOM CAPP CAPN MAT  TOG  PWM  CCF
 749      =1  // 00H     0    0    0    0    0    0    0    0     ÎÞ²Ù×÷,´ý»ú×´Ì¬
 750      =1  // 42H     0    1    0    0    0    0    1    0     8Î»PWMÊä³ö,ÎÞÖÐ¶Ï
 751      =1  // 63H     0    1    1    0    0    0    1    1     8Î»PWMÊä³ö,²úÉúCEX0ÉÏÉýÑØÖÐ¶Ï
 752      =1  // 53H     0    1    0    1    0    0    1    1     8Î»PWMÊä³ö,²úÉúCEX0ÏÂ½µÑØÖÐ¶Ï
 753      =1  // 73H     0    1    1    1    0    0    1    1     8Î»PWMÊä³ö,²úÉúCEX0Ìø±äÖÐ¶Ï
 754      =1  // 20H     0    x    1    0    0    0    0    0     16Î»²¶»ñÄ£Ê½,CEX0ÉÏÉýÑØ´¥·¢²¶»ñ
 755      =1  // 10H     0    x    0    1    0    0    0    0     16Î»²¶»ñÄ£Ê½,CEX0ÏÂ½µÑØ´¥·¢²¶»ñ
 756      =1  // 30H     0    x    1    1    0    0    0    0     16Î»²¶»ñÄ£Ê½,CEX0Ìø±ä´¥·¢²¶»ñ
 757      =1  // 48H     0    1    0    0    1    0    0    0     16Î»Èí¼þ¶¨Ê±Æ÷
 758      =1  // 4CH     0    1    0    0    1    1    0    0     16Î»¸ßËÙÂö³åÊä³ö
 759      =1  
 760      =1  /////////////////////////////////
 761      =1  
 762      =1  sfr  CL         =   0xe9;       //PCA¼ÆÊýÆ÷µÍ8Î»        Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 763      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 764      =1  
 765      =1  /////////////////////////////////
 766      =1  
 767      =1  sfr  CH         =   0xf9;       //PCA¼ÆÊýÆ÷¸ß8Î»        Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 768      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 769      =1  
 770      =1  /////////////////////////////////
 771      =1  
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 17  

 772      =1  sfr  CCAP0L     =   0xea;       //PCAÄ£¿é0¼Ä´æÆ÷µÍ8Î»   Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 773      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 774      =1  
 775      =1  /////////////////////////////////
 776      =1  
 777      =1  sfr  CCAP1L     =   0xeb;       //PCAÄ£¿é1¼Ä´æÆ÷µÍ8Î»   Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 778      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 779      =1  
 780      =1  /////////////////////////////////
 781      =1  
 782      =1  sfr  CCAP0H     =   0xfa;       //PCAÄ£¿é0¼Ä´æÆ÷¸ß8Î»   Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 783      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 784      =1  
 785      =1  /////////////////////////////////
 786      =1  
 787      =1  sfr  CCAP1H     =   0xfb;       //PCAÄ£¿é1¼Ä´æÆ÷¸ß8Î»   Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 788      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 789      =1  
 790      =1  /////////////////////////////////
 791      =1  
 792      =1  sfr  PCA_PWM0   =   0xf2;       //PCA0Ä£Ê½PWM¸¨Öú¼Ä´æÆ÷ Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 793      =1                                  //Î»ÃèÊö                -       -       -       -       -       -       EP
             -C0H   EPC0L
 794      =1                                  //³õÊ¼Öµ=xxxx,xx00      x       x       x       x       x       x       0 
             -      0
 795      =1  
 796      =1  /////////////////////////////////
 797      =1  
 798      =1  sfr  PCA_PWM1   =   0xf3;       //PCA1Ä£Ê½PWM¸¨Öú¼Ä´æÆ÷ Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 799      =1                                  //Î»ÃèÊö                -       -       -       -       -       -       EP
             -C1H   EPC1L
 800      =1                                  //³õÊ¼Öµ=xxxx,xx00      x       x       x       x       x       x       0 
             -      0
 801      =1  
 802      =1  //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -//////
 803      =1  
 804      =1  #endif
   9          #include <intrins.h>    //51»ù±¾ÔËËã£¨°üÀ¨_nop_¿Õº¯Êý£©
   1      =1  /*--------------------------------------------------------------------------
   2      =1  INTRINS.H
   3      =1  
   4      =1  Intrinsic functions for C51.
   5      =1  Copyright (c) 1988-2004 Keil Elektronik GmbH and Keil Software, Inc.
   6      =1  All rights reserved.
   7      =1  --------------------------------------------------------------------------*/
   8      =1  
   9      =1  #ifndef __INTRINS_H__
  10      =1  #define __INTRINS_H__
  11      =1  
  12      =1  extern void          _nop_     (void);
  13      =1  extern bit           _testbit_ (bit);
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 18  

  14      =1  extern unsigned char _cror_    (unsigned char, unsigned char);
  15      =1  extern unsigned int  _iror_    (unsigned int,  unsigned char);
  16      =1  extern unsigned long _lror_    (unsigned long, unsigned char);
  17      =1  extern unsigned char _crol_    (unsigned char, unsigned char);
  18      =1  extern unsigned int  _irol_    (unsigned int,  unsigned char);
  19      =1  extern unsigned long _lrol_    (unsigned long, unsigned char);
  20      =1  extern unsigned char _chkfloat_(float);
  21      =1  extern void          _push_    (unsigned char _sfr);
  22      =1  extern void          _pop_     (unsigned char _sfr);
  23      =1  
  24      =1  #endif
  25      =1  
  10          #include <math.h>
   1      =1  /*--------------------------------------------------------------------------
   2      =1  MATH.H
   3      =1  
   4      =1  Prototypes for mathematic functions.
   5      =1  Copyright (c) 1988-2002 Keil Elektronik GmbH and Keil Software, Inc.
   6      =1  All rights reserved.
   7      =1  --------------------------------------------------------------------------*/
   8      =1  
   9      =1  #ifndef __MATH_H__
  10      =1  #define __MATH_H__
  11      =1  
  12      =1  #pragma SAVE
  13      =1  #pragma REGPARMS
  14      =1  extern char  cabs  (char  val);
  15      =1  extern int    abs  (int   val);
  16      =1  extern long  labs  (long  val);
  17      =1  extern float fabs  (float val);
  18      =1  extern float sqrt  (float val);
  19      =1  extern float exp   (float val);
  20      =1  extern float log   (float val);
  21      =1  extern float log10 (float val);
  22      =1  extern float sin   (float val);
  23      =1  extern float cos   (float val);
  24      =1  extern float tan   (float val);
  25      =1  extern float asin  (float val);
  26      =1  extern float acos  (float val);
  27      =1  extern float atan  (float val);
  28      =1  extern float sinh  (float val);
  29      =1  extern float cosh  (float val);
  30      =1  extern float tanh  (float val);
  31      =1  extern float atan2 (float y, float x);
  32      =1  
  33      =1  extern float ceil  (float val);
  34      =1  extern float floor (float val);
  35      =1  extern float modf  (float val, float *n);
  36      =1  extern float fmod  (float x, float y);
  37      =1  extern float pow   (float x, float y);
  38      =1  
  39      =1  #pragma RESTORE
  40      =1  
  41      =1  #endif
  11          #include "src\Define.h"
   1      =1  
   2      =1  #ifndef uchar
   3      =1  #define uchar unsigned char
   4      =1  #endif
   5      =1  
   6      =1  #ifndef uint
   7      =1  #define uint  unsigned int
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 19  

   8      =1  #endif
   9      =1  
  10      =1  #define uint8    unsigned char
  11      =1  #define uint16   unsigned short int
  12      =1  #define uint32   unsigned long int
  13      =1  #define uint64   unsigned long long int
  14      =1  #define int8     signed char
  15      =1  #define int16    signed short int
  16      =1  #define int32    signed long int
  17      =1  #define int64    signed long long int
  18      =1  
  19      =1  
  20      =1  //BinToHex         //P0=bin(00110011);
  21      =1  #define LongToBin(n) (((n>>21)&0x80)|((n>>18)&0x40)|((n>>15)&0x20)|((n>>12)&0x10)|((n>>9)& 0x08)|((n>>6)&0
             -x04)|((n>>3)&0x02)|((n)&0x01))
  22      =1  #define B(n) LongToBin(0x##n##l)
  23      =1  
  24      =1  /****************Hardware Interface***************/
  25      =1  
  26      =1  //#define KUp 4
  27      =1  
  28      =1                                                                                                            
             -                           
  29      =1  //sbit BEEP = P0^1;           // ·äÃùÆ÷
  12          ///////È«¾Ö±äÁ¿///////
  13          uchar data DelayTime=10;
  14          uchar data INTTime=0x45;
  15          uchar data gain=1;
  16          uchar data Menu=0;
  17          uchar idata  refreshflag[40];
  18          //////////////////////
  19          void Delays(uint t)
  20          {  
  21   1              uint j;
  22   1              while(--t)
  23   1                      for(j=0;j<5;j++);    
  24   1      }
  25          uchar data LEDBuf[35];                   //15ÁÐ£»´Ó×óµ½ÓÒ£»ÁÁµÄÎ»ÎªÕæ£¨1£©£»
  26          #include "src\ADC.c"
   1      =1  
   2      =1  typedef unsigned char BYTE;
   3      =1  typedef unsigned int WORD;
   4      =1  
   5      =1  void InitADC();
   6      =1  BYTE GetADCResult(BYTE ch);
   7      =1  void Delay(WORD n);
   8      =1  
   9      =1  BYTE GetADCResult(BYTE ch)
  10      =1  {
  11   1  =1      ADC_CONTR = ADC_POWER | ADC_SPEEDLL | ch | ADC_START;
  12   1  =1      _nop_();                        //Must wait before inquiry
  13   1  =1      _nop_();
  14   1  =1      _nop_();
  15   1  =1      _nop_();
  16   1  =1      while (!(ADC_CONTR & ADC_FLAG));//Wait complete flag
  17   1  =1      ADC_CONTR &= ~ADC_FLAG;         //Close ADC
  18   1  =1  
  19   1  =1      return ADC_RES;                 //Return ADC result
  20   1  =1  }
  21      =1  
  22      =1  void InitADC()
  23      =1  {
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 20  

  24   1  =1      P1ASF = 0x01;                   //Open 8 channels ADC function
  25   1  =1      ADC_RES = 0;                    //Clear previous result
  26   1  =1      ADC_CONTR = ADC_POWER | ADC_SPEEDLL;
  27   1  =1      Delay(2);                       //ADC power-on and delay
  28   1  =1  }
  29      =1  
  30      =1  void Delay(WORD n)
  31      =1  {
  32   1  =1      WORD x;
  33   1  =1  
  34   1  =1      while (n--)
  35   1  =1      {
  36   2  =1          x = 5000;
  37   2  =1          while (x--);
  38   2  =1      }
  39   1  =1  }
  27          #include "src\fft.h"
   1      =1  #ifndef _FFT_INCLUDED_
   2      =1  #define _FFT_INCLUDED_
   3      =1  
   4      =1  struct compx
   5      =1  {
   6      =1          float real;
   7      =1          float imag;
   8      =1  };//¶¨ÒåÊý¾Ý´æ·Å»ú¹¹Ìå 
   9      =1  
  10      =1  struct compx dd[65]; //FFTÊý¾Ý¶Î    
  11      =1  code float iw[64]=
  12      =1  {
  13      =1          1.000,0,0.9952,-0.0980,0.9808,-0.1951,0.9569,-0.2903,0.9239,-0.3827,0.8819,-0.4714,0.8315,-0.5556,
  14      =1          0.7730,-0.6344,0.7071,-0.7071,0.6344,-0.7730,0.5556,-0.8315,0.4714,-0.8819,0.3827,-0.9239,0.2903,-0.9569,
  15      =1          0.1951,-0.9808,0.0980,-0.9952,0.0,-1.0000,-0.0980,-0.9952,-0.1951,-0.9808,-0.2903,0.9569,-0.3827,-0.9239,
  16      =1          -0.4714,-0.8819,-0.5556,-0.8315,-0.6344,-0.7730,-0.7071,-0.7071,-0.7730,-0.6344,-0.8315,-0.5556,-0.8819,-
             -0.4714,
  17      =1          -0.9239,-0.3827,-0.9569,-0.2903,-0.9808,-0.1951,-0.9952,-0.0980
  18      =1  };//wÖµ»º´æÇø
  19      =1  
  20      =1  data struct compx temp;  
  21      =1  //¸´Êý³Ë·¨
  22      =1  void ee(struct compx b1,uchar data b2)
  23      =1  { 
  24   1  =1          temp.real=b1.real*iw[2*b2]-b1.imag*iw[2*b2+1];
  25   1  =1          temp.imag=b1.real*iw[2*b2+1]+b1.imag*iw[2*b2]; 
  26   1  =1  } 
  27      =1  //³Ë·½º¯Êý,¼ÆËã nbottom^ntop   
  28      =1  uint mypow(uchar data nbottom,uchar data ntop)
  29      =1  {
  30   1  =1      uint data result=1;
  31   1  =1      uchar data t;    
  32   1  =1      for(t=0;t<ntop;t++)result*=nbottom;//nbottom^ntop 
  33   1  =1      return result;
  34   1  =1  }
  35      =1  //¿ìËÙ¸µÁ¢Ò¶±ä»»  
  36      =1  void fft(struct compx *xin,uchar data N)
  37      =1  {
  38   1  =1          uchar data  fftnum,i,j,k,l,m,n,disbuff,dispos,dissec;
  39   1  =1          data struct compx t;
  40   1  =1          fftnum=N;//¸µÁ¢Ò¶±ä»»µÄµãÊý
  41   1  =1          for(m=1;(fftnum=fftnum/2)!=1;m++);//ÇóµÃMµÄÖµ 
  42   1  =1          for(k=0;k<=N-1;k++)//ÂëÎ»µ¹ÖÃ
  43   1  =1          {
  44   2  =1                  n=k;
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 21  

  45   2  =1                  j=0; 
  46   2  =1                  for(i=m;i>0;i--)//µ¹ÖÃ
  47   2  =1                  {
  48   3  =1                          j=j+((n%2)<<(i-1));
  49   3  =1                          n=n/2;
  50   3  =1                  } 
  51   2  =1                  if(k<j){t=xin[1+j];xin[1+j]=xin[1+k];xin[1+k]=t;}//½»»»Êý¾Ý
  52   2  =1          }  
  53   1  =1          for(l=1;l<=m;l++)//fftÔËËã
  54   1  =1          {
  55   2  =1                  disbuff=mypow(2,l);//ÇóµÃµú¼ä¾àÀë
  56   2  =1                  dispos=disbuff/2;//ÇóµÃµúÐÎÁ½µãÖ®¼äµÄ¾àÀë
  57   2  =1                  for(j=1;j<=dispos;j++)
  58   2  =1                          for(i=j;i<N;i=i+disbuff)//±éÀúM¼¶ËùÓÐµÄµúÐÎ
  59   2  =1                          {
  60   3  =1                                  dissec=i+dispos;//ÇóµÃµÚ¶þµãµÄÎ»ÖÃ
  61   3  =1                                  ee(xin[dissec],(uint)(j-1)*(uint)N/disbuff);//¸´Êý³Ë·¨
  62   3  =1                                  t=temp;
  63   3  =1                                  xin[dissec].real=xin[i].real-t.real;
  64   3  =1                                  xin[dissec].imag=xin[i].imag-t.imag;
  65   3  =1                                  xin[i].real=xin[i].real+t.real;
  66   3  =1                                  xin[i].imag=xin[i].imag+t.imag;
  67   3  =1                          }
  68   2  =1          }
  69   1  =1  } 
  70      =1  
  71      =1  //¶ÔfftÊý¾Ý½øÐÐ´¦Àí,µÃµ½¸÷¸öÆµÂÊ¶ÎµÄµçÑ¹·ùÖµ
  72      =1  void processfft( )
  73      =1  { 
  74   1  =1      uchar data pt=0,tmp; 
  75   1  =1      for(pt=1;pt<65;pt++)
  76   1  =1      {
  77   2  =1          dd[pt].imag=0; //ÇåÁãÐé²¿ 
  78   2  =1      }
  79   1  =1      fft(dd,64);//¶Ôµ±Ç°Êý¾Ý½øÐÐ¸µÁ¢Ò¶±ä»» 
  80   1  =1          dd[0].imag=0;  dd[0].real=0;
  81   1  =1      for(pt=1;pt<65;pt++)
  82   1  =1      {                                      
  83   2  =1          dd[pt].real=sqrt(dd[pt].real*dd[pt].real+dd[pt].imag*dd[pt].imag);//È¡¾ù·½¸ù 
  84   2  =1      }
  85   1  =1  
  86   1  =1          if(Menu==1)
  87   1  =1          {
  88   2  =1                  for(pt=2;pt<34;pt+=2)   
  89   2  =1              {       
  90   3  =1                          for(tmp=(dd[pt].real/32)+1,LEDBuf[pt]=0xFF;tmp>=1;tmp--)                  //tmp>1;²»±£Áô  ×îµÍÎ»ÄÇÒ»ÐÐ³£ÁÁ;{}Ò»´ÎÒ²²»
             -Ö´ÐÐ£»
  91   3  =1                          {
  92   4  =1                                  LEDBuf[pt]<<=1; 
  93   4  =1                                  
  94   4  =1                          }
  95   3  =1                          LEDBuf[pt]=~(LEDBuf[pt]);
  96   3  =1                  }
  97   2  =1          }
  98   1  =1          else if(Menu==2)
  99   1  =1          {
 100   2  =1  
 101   2  =1                  //ÏÂÂä¸ÐÆµÆ×
 102   2  =1                  for(pt=2;pt<34;pt+=2)   
 103   2  =1              {       
 104   3  =1                          tmp=(dd[pt].real/32)+1;
 105   3  =1                          if(refreshflag[pt]<tmp)           //Ë¢ÐÂÊý¾Ý,È¡½Ï´ó¸ß¶ÈÖµ ´æ´¢ÏÔÊ¾  
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 22  

 106   3  =1                          {
 107   4  =1                                  for(LEDBuf[pt]=0xFF;tmp>1;tmp--)                  //tmp>1;²»±£Áô  ×îµÍÎ»ÄÇÒ»ÐÐ³£ÁÁ;{}Ò»´ÎÒ²²»Ö´ÐÐ£»
 108   4  =1                                  {
 109   5  =1                                          LEDBuf[pt]<<=1; 
 110   5  =1                                          
 111   5  =1                                  }
 112   4  =1                                  refreshflag[pt]=(dd[pt].real/32)+1;
 113   4  =1                          }
 114   3  =1                          else
 115   3  =1                          {
 116   4  =1                                  if(refreshflag[pt]>1)refreshflag[pt]--;                            //¶¥¶ËÏÂÂäËÙ¶È¿ØÖÆ  ¸Ä±äÖµ¿ÉÒÔ¸Ä±ä
             -ÏÂ½µËÙ¶È
 117   4  =1                                  for(LEDBuf[pt]=0xFF,tmp=refreshflag[pt];tmp>1;tmp--)              //tmp>1;²»±£Áô  ×îµÍÎ»ÄÇÒ»ÐÐ³£ÁÁ;{}Ò»´ÎÒ²²»Ö´
             -ÐÐ£»
 118   4  =1                                  {
 119   5  =1                                          LEDBuf[pt]<<=1; 
 120   5  =1                                          
 121   5  =1                                  }
 122   4  =1  
 123   4  =1                          }
 124   3  =1          
 125   3  =1                  }
 126   2  =1  
 127   2  =1          } 
 128   1  =1          else if(Menu==0)
 129   1  =1          {
 130   2  =1                  //ÏÂÂä¸ÐÆµÆ×
 131   2  =1                  for(pt=2;pt<34;pt+=2)   
 132   2  =1              {       
 133   3  =1                          tmp=(dd[pt].real/32)+1;
 134   3  =1                          if(refreshflag[pt]<tmp)           //Ë¢ÐÂÊý¾Ý,È¡½Ï´ó¸ß¶ÈÖµ ´æ´¢ÏÔÊ¾  
 135   3  =1                          {
 136   4  =1                                  for(LEDBuf[pt]=0xFF;tmp>=1;tmp--)                 //tmp>1;²»±£Áô  ×îµÍÎ»ÄÇÒ»ÐÐ³£ÁÁ;{}Ò»´ÎÒ²²»Ö´ÐÐ£»
 137   4  =1                                  {
 138   5  =1                                          LEDBuf[pt]<<=1; 
 139   5  =1                                          
 140   5  =1                                  }
 141   4  =1                                  refreshflag[pt]=(dd[pt].real/32)+1;
 142   4  =1                          }
 143   3  =1                          else
 144   3  =1                          {
 145   4  =1                                  if(refreshflag[pt]>1)refreshflag[pt]--;                            //¶¥¶ËÏÂÂäËÙ¶È¿ØÖÆ  ¸Ä±äÖµ¿ÉÒÔ¸Ä±ä
             -ÏÂ½µËÙ¶È
 146   4  =1                                  for(LEDBuf[pt]=0xFF,tmp=refreshflag[pt];tmp>=1;tmp--)             //tmp>1;²»±£Áô  ×îµÍÎ»ÄÇÒ»ÐÐ³£ÁÁ;{}Ò»´ÎÒ²²»Ö
             -´ÐÐ£»
 147   4  =1                                  {
 148   5  =1                                          LEDBuf[pt]<<=1; 
 149   5  =1                                          
 150   5  =1                                  }
 151   4  =1  
 152   4  =1                          }
 153   3  =1                          LEDBuf[pt]=~(LEDBuf[pt]);
 154   3  =1          
 155   3  =1                  }
 156   2  =1  
 157   2  =1          }
 158   1  =1  
 159   1  =1  
 160   1  =1          
 161   1  =1  }  
 162      =1  #endif      
 163      =1  
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 23  

 164      =1  
 165      =1  
 166      =1  
 167      =1  
 168      =1  
 169      =1  
 170      =1  
 171      =1  
 172      =1  
 173      =1  
 174      =1  
 175      =1  
 176      =1  
 177      =1  
  28          #include "src\LED168D.h"
   1      =1  /*
   2      =1  /////////////////////////////////////
   3      =1               y
   4      =1               ^
   5      =1                           |
   6      =1  //   YL          |
   7      =1                   |
   8      =1             --|--------------------- > x 
   9      =1               |            //XL
  10      =1  */
  11      =1  uchar YL;
  12      =1  uint XL;
  13      =1  
  14      =1  
  15      =1  ////////////////////////////////////////
  16      =1  void LEDdelay(unsigned int dtime)         // 1msÑÓÊ±³ÌÐò£¨12MHz 10±¶ÓÚ51µ¥Æ¬»úËÙ¶ÈÊ±£©
  17      =1  { 
  18   1  =1          while( --dtime != 0);                              
  19   1  =1  }
  20      =1  
  21      =1  ///////////////////////ÁÐÑ¡¡ª//////////ÐÐÑ¡+///////////ÐÐÑ¡+//
  22      =1  void FFTMtL(uchar data VLX,uchar data VLY0,uchar data VLY1 ,uint data Dtime)  //Chang Data Form Virtual IO
             -(LY<=7,LX<=15) to MCU IO AND LED IO port;
  23      =1  {
  24   1  =1           char data ii=0,LY=0xFF,LX0=0xFF,LX1=0xFF;
  25   1  =1           
  26   1  =1                  switch (VLX)
  27   1  =1                  {
  28   2  =1                  
  29   2  =1                          case B(10000000):P11=0;P30=0;break;
  30   2  =1                          case B(01000000):P12=0;P31=0;break;
  31   2  =1                          case B(00100000):P16=0;P35=0;break;
  32   2  =1                          case B(00010000):P05=0;P25=0;break;
  33   2  =1                          case B(00001000):P17=0;P36=0;break;
  34   2  =1                          case B(00000100):P03=0;P27=0;break;
  35   2  =1                          case B(00000010):P02=0;P44=0;break;
  36   2  =1                          case B(00000001):P14=0;P33=0;break;
  37   2  =1                          
  38   2  =1                          case 0xff:  break;
  39   2  =1                          //default : break;
  40   2  =1                  }
  41   1  =1                  
  42   1  =1                  switch (VLY0)
  43   1  =1                  {
  44   2  =1                          
  45   2  =1                          case B(10000000):P47=1;break;
  46   2  =1                          case B(01000000):P13=1;break;
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 24  

  47   2  =1                          case B(00100000):P07=1;break;
  48   2  =1                          case B(00010000):P15=1;break;
  49   2  =1                          case B(00001000):P00=1;break;
  50   2  =1                          case B(00000100):P06=1;break;
  51   2  =1                          case B(00000010):P01=1;break;   
  52   2  =1                          case B(00000001):P04=1;break;
  53   2  =1  
  54   2  =1                          case 0xff:  break;
  55   2  =1                          //default: break;        //?
  56   2  =1                  }
  57   1  =1  
  58   1  =1                  switch (VLY1)
  59   1  =1                  {
  60   2  =1                          
  61   2  =1                          case B(10000000):P37=1;break;
  62   2  =1                          case B(01000000):P32=1;break;
  63   2  =1                          case B(00100000):P23=1;break;
  64   2  =1                          case B(00010000):P34=1;break;
  65   2  =1                          case B(00001000):P46=1;break;
  66   2  =1                          case B(00000100):P24=1;break;
  67   2  =1                          case B(00000010):P45=1;break;   
  68   2  =1                          case B(00000001):P26=1;break;
  69   2  =1  
  70   2  =1                          case 0xff:  break;
  71   2  =1                          //default: break;        //?
  72   2  =1                  }
  73   1  =1  
  74   1  =1          
  75   1  =1  
  76   1  =1  
  77   1  =1  
  78   1  =1                  //////////////////////////////Delay////
  79   1  =1                  LEDdelay(Dtime);
  80   1  =1                  ///////////////////////////// Close////
  81   1  =1                  
  82   1  =1                  switch (VLX)
  83   1  =1                  {
  84   2  =1                  
  85   2  =1                          case B(10000000):P11=1;P30=1;break;
  86   2  =1                          case B(01000000):P12=1;P31=1;break;
  87   2  =1                          case B(00100000):P16=1;P35=1;break;
  88   2  =1                          case B(00010000):P05=1;P25=1;break;
  89   2  =1                          case B(00001000):P17=1;P36=1;break;
  90   2  =1                          case B(00000100):P03=1;P27=1;break;
  91   2  =1                          case B(00000010):P02=1;P44=1;break;
  92   2  =1                          case B(00000001):P14=1;P33=1;break;
  93   2  =1                          
  94   2  =1                          case 0xff:  break;
  95   2  =1                          //default : break;
  96   2  =1                  }
  97   1  =1                  
  98   1  =1                  switch (VLY0)
  99   1  =1                  {
 100   2  =1                          
 101   2  =1                          case B(10000000):P47=0;break;
 102   2  =1                          case B(01000000):P13=0;break;
 103   2  =1                          case B(00100000):P07=0;break;
 104   2  =1                          case B(00010000):P15=0;break;
 105   2  =1                          case B(00001000):P00=0;break;
 106   2  =1                          case B(00000100):P06=0;break;
 107   2  =1                          case B(00000010):P01=0;break;   
 108   2  =1                          case B(00000001):P04=0;break;
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 25  

 109   2  =1  
 110   2  =1                          case 0xff:  break;
 111   2  =1                          //default: break;        //?
 112   2  =1                  }
 113   1  =1  
 114   1  =1                  switch (VLY1)
 115   1  =1                  {
 116   2  =1                          
 117   2  =1                          case B(10000000):P37=0;break;
 118   2  =1                          case B(01000000):P32=0;break;
 119   2  =1                          case B(00100000):P23=0;break;
 120   2  =1                          case B(00010000):P34=0;break;
 121   2  =1                          case B(00001000):P46=0;break;
 122   2  =1                          case B(00000100):P24=0;break;
 123   2  =1                          case B(00000010):P45=0;break;   
 124   2  =1                          case B(00000001):P26=0;break;
 125   2  =1  
 126   2  =1                          case 0xff:  break;
 127   2  =1                          //default: break;        //?
 128   2  =1                  }
 129   1  =1          
 130   1  =1  }
 131      =1  
 132      =1  
 133      =1  
 134      =1  
 135      =1  void BuftoLED168_Refresh()  //Refresh&Write Buf to LED168 ;
 136      =1  {
 137   1  =1           uchar data i,ty=1,tx=0x01;
 138   1  =1       for(tx=0x01,i=2;tx;tx<<=1,i+=2)                              //tx!=0; or tx<=0x08;
 139   1  =1       {
 140   2  =1                  for(ty=0x01;ty;ty<<=1)
 141   2  =1          {          
 142   3  =1                     FFTMtL(tx,ty&(LEDBuf[i]),ty&(LEDBuf[i+16]),200);        //ÁÁ¶Èµ÷½Ú£¨20¡«200£©           
 143   3  =1          }       
 144   2  =1       }
 145   1  =1          
 146   1  =1  }
  29          
  30          void LIOINIT( )
  31          {
  32   1              P4SW = 0xff;                              //Æô¶¯I/O£ºP4£»
  33   1      
  34   1              P0M1 = 0x00;        P0M0 = 0xff;          //I/OÇ¿ÉÏÀ­Ä£Ê½£»
  35   1              P1M1 = B(00000001);     P1M0 = B(11111110);   //P10(¹âÃôµç×è:AD£º¸ß×è»ò¿ªÂ©)
  36   1              P4M1 = 0x00;            P4M0 = 0xff;        
  37   1              P2M1 = B(00000000); P2M0 = B(11111001);   //P21,P20(Ç¿ÉÏÀ­)£»P22(´«Í³IO);
  38   1              P3M1 = 0x00;            P3M0 = 0xff;          //!!!
  39   1      
  40   1              P0 = 0xff;                                        //³õÊ¼»¯£»
  41   1              P1 = B(11111110);
  42   1              P4 = 0xff;
  43   1              P2 = B(11111100);
  44   1              P3 = 0xff;      
  45   1              ////////////////////////////////
  46   1              P04=0;P26=0;  //LY;
  47   1              P01=0;P45=0;
  48   1              P06=0;P24=0;
  49   1              P00=0;P46=0;
  50   1              P15=0;P34=0;
  51   1              P07=0;P23=0;
  52   1              P13=0;P32=0;
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 26  

  53   1              P47=0;P37=0;
  54   1              ////////////////////////////////
  55   1              P14=1; P33=1;  //LX0; //LX1; 
  56   1              P02=1; P44=1;         
  57   1              P03=1; P27=1;         
  58   1              P17=1; P36=1;         
  59   1              P05=1; P25=1;         
  60   1              P16=1; P35=1;         
  61   1              P12=1; P31=1;         
  62   1              P11=1; P30=1;                   
  63   1      }
  64          
  65          //////////////////////////////////////////////////////
  66          void LEDRefresh() interrupt 3 //using 3   
  67          { 
  68   1          TL1 = 0x00;      
  69   1          TH1 = INTTime;   //0x50~0x80 //0x6A
  70   1              BuftoLED168_Refresh();
  71   1      }  
  72          /////////////////////////////////////////////////////
  73          
  74          /*SFRÖÐÓë¶¨Ê±/¼ÆÊýÆ÷¹¤×÷·½Ê½ÓÐ¹ØµÄÉè¼Æ]
  75          -----------------------------------------------------------------------------
  76          M1      M0      ·½Ê½    ËµÃ÷
  77          0       0       0       13Î»T/C£¬ÓÉTLµÍ5Î»ºÍTHµÄ8Î»×é³É13Î»¼ÆÊýÆ÷
  78          0       1       1       16Î»T/C£¬TLºÍTH¹²16Î»¼ÆÊýÆ÷
  79          1       0       2       8Î»T/C£¬TLÓÃÓÚ¼ÆÊý£¬µ±TLÒç³öÊ±½«THÖÐµÄÖµ×Ô¶¯Ð´ÈëTL
  80          1       1       3       Á½×é8Î»T/C
  81          -----------------------------------------------------------------------------
  82          */
  83          void Timer_INT()
  84          {
  85   1              TMOD = 0x11; //¸ß4Î»¿ØÖÆT/C1 [ GATE£¬C/T£¬M1£¬M0£¬GATE£¬C/T£¬M1£¬M0 ]
  86   1              EA = 1; //ÖÐ¶Ï×Ü¿ª¹Ø
  87   1      
  88   1              TH1 = 0x00; //16Î»¼ÆÊý¼Ä´æÆ÷T1¸ß8Î»£¨Ð´Èë³õÖµ£©
  89   1              TL1 = 0x00; //16Î»¼ÆÊý¼Ä´æÆ÷T1µÍ8Î»
  90   1              ET1 = 1; //T/C1ÖÐ¶Ï¿ª¹Ø
  91   1          TR1 = 1; //T/C1Æô¶¯¿ª¹Ø
  92   1      }
  93          
  94          void Main()
  95          {  
  96   1              uint data Count=700;
  97   1              uchar data i,Cgain,LED=0,num=0;
  98   1              LIOINIT();        //I/OÇ¿ÉÏÀ­Ä£Ê½
  99   1              InitADC();    //Init ADC sfr    
 100   1              for(i=0;i<40;i++) refreshflag[i]=0x09;
 101   1              P20=0;            //LED¸º¼«
 102   1              Timer_INT();  //¶¨Ê±Æ÷³õÊ¼»¯
 103   1              while(1)
 104   1              {
 105   2                      for(i=0;i<65;i++)
 106   2                      {  
 107   3                              dd[i].real=(GetADCResult(0))<<gain;
 108   3                              dd[i].imag=0; //ÇåÁãÐé²¿ 
 109   3                      }
 110   2                       processfft();//¸µÁ¢Ò¶±ä»¯¼°´¦Àí
 111   2                       LED=!LED;
 112   2                       if(dd[2].real<32)
 113   2                       {
 114   3                              LED=1;
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 27  

 115   3                       }
 116   2                       else 
 117   2                       {
 118   3                               Count=1;
 119   3                               if(++num==0xAF)                                 //²¥·ÅÊ±£¬Auto gain£»
 120   3                               {
 121   4                                      num=0;
 122   4      
 123   4                                      P2M0 = B(11111011); 
 124   4                                      P21=1;                    //LEDÕý¼«
 125   4                                      Delays(2000);
 126   4                                      P21=0;                   //LEDÕý¼«
 127   4                                      P2M0 = B(11111001); 
 128   4      
 129   4                                      //×Ô¶¯ÔöÒæ£»Automatic gain;
 130   4                                      Cgain=dd[2].real/32;
 131   4                                      if(7<Cgain<=8) 
 132   4                                      {
 133   5                                              gain=2;
 134   5                                              
 135   5                                      }
 136   4                                      else if(4<Cgain<=6) 
 137   4                                      {
 138   5                                              gain=3;         
 139   5                                      }
 140   4                                      else if(2<Cgain<=4) 
 141   4                                      {
 142   5                                              gain=4;
 143   5                                      }
 144   4                                      else 
 145   4                                      {
 146   5                                              gain=5;
 147   5                                      }
 148   4                               }
 149   3                        }
 150   2      
 151   2                        P21=LED;       //LEDÕý¼«       
 152   2              }
 153   1      }
 154          /*****************************************************************************/
 155          //ÓðÒíµç×Ó¹¤×÷ÊÒ   http://yuyidianzi.taobao.com
 156          /*****************************************************************************/
 157          
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 28  

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION Com00C6 (BEGIN)
0000         L?0199:
0000         L?0200:
0000 75F008            MOV     B,#08H
0003 E500        R     MOV     A,pt
0005 A4                MUL     AB
0006 2400        R     ADD     A,#LOW dd
0008 F582              MOV     DPL,A
000A E5F0              MOV     A,B
000C 3400        R     ADDC    A,#HIGH dd
000E F583              MOV     DPH,A
0010 E0                MOVX    A,@DPTR
0011 FC                MOV     R4,A
0012 A3                INC     DPTR
0013 E0                MOVX    A,@DPTR
0014 FD                MOV     R5,A
0015 A3                INC     DPTR
0016 E0                MOVX    A,@DPTR
0017 FE                MOV     R6,A
0018 A3                INC     DPTR
0019 E0                MOVX    A,@DPTR
001A FF                MOV     R7,A
001B E4                CLR     A
001C FB                MOV     R3,A
001D FA                MOV     R2,A
001E F9                MOV     R1,A
001F 7842              MOV     R0,#042H
0021 120000      E     LCALL   ?C?FPDIV
0024 E4                CLR     A
0025 FB                MOV     R3,A
0026 FA                MOV     R2,A
0027 7980              MOV     R1,#080H
0029 783F              MOV     R0,#03FH
002B 120000      E     LCALL   ?C?FPADD
002E 020000      E     LJMP    ?C?CASTF
0031         L?0201:
0031         L?0202:
0031 75F008            MOV     B,#08H
0034 A4                MUL     AB
0035         L?0203:
0035 FF                MOV     R7,A
0036         L?0204:
0036 900000      R     MOV     DPTR,#xin
0039 E0                MOVX    A,@DPTR
003A FB                MOV     R3,A
003B A3                INC     DPTR
003C E0                MOVX    A,@DPTR
003D FA                MOV     R2,A
003E A3                INC     DPTR
003F E0                MOVX    A,@DPTR
0040 22                RET     
0041         L?0205:
0041 F583              MOV     DPH,A
0043 120000      E     LCALL   ?C?LLDCODE
0046 900000      R     MOV     DPTR,#b1+04H
0049         L?0206:
0049 E0                MOVX    A,@DPTR
004A F8                MOV     R0,A
004B A3                INC     DPTR
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 29  

004C E0                MOVX    A,@DPTR
004D F9                MOV     R1,A
004E A3                INC     DPTR
004F E0                MOVX    A,@DPTR
0050 FA                MOV     R2,A
0051 A3                INC     DPTR
0052 E0                MOVX    A,@DPTR
0053 FB                MOV     R3,A
0054 020000      E     LJMP    ?C?FPMUL
0057         L?0207:
0057 7E00              MOV     R6,#00H
0059 7F08              MOV     R7,#08H
005B 120000      E     LCALL   ?C?COPY
005E E500        R     MOV     A,k
0060         L?0208:
0060 2401              ADD     A,#01H
0062 FF                MOV     R7,A
0063 E4                CLR     A
0064 33                RLC     A
0065 FE                MOV     R6,A
0066 EF                MOV     A,R7
0067 7803              MOV     R0,#03H
0069 22                RET     
006A         L?0209:
006A E500        R     MOV     A,pt
006C         L?0210:
006C 75F008            MOV     B,#08H
006F A4                MUL     AB
0070 2400        R     ADD     A,#LOW dd+04H
0072 F582              MOV     DPL,A
0074 E5F0              MOV     A,B
0076 3400        R     ADDC    A,#HIGH dd+04H
0078 F583              MOV     DPH,A
007A 22                RET     
007B         L?0211:
007B E500        R     MOV     A,pt
007D         L?0212:
007D 75F008            MOV     B,#08H
0080 A4                MUL     AB
0081 2400        R     ADD     A,#LOW dd
0083 F582              MOV     DPL,A
0085 E5F0              MOV     A,B
0087 3400        R     ADDC    A,#HIGH dd
0089 F583              MOV     DPH,A
008B 22                RET     
008C         L?0213:
008C 7400        R     MOV     A,#LOW LEDBuf
008E 2500        R     ADD     A,pt
0090 F8                MOV     R0,A
0091 76FF              MOV     @R0,#0FFH
0093         L?0214:
0093 7400        R     MOV     A,#LOW refreshflag
0095 2500        R     ADD     A,pt
0097 F8                MOV     R0,A
0098 E6                MOV     A,@R0
0099 22                RET     
009A         L?0215:
009A E0                MOVX    A,@DPTR
009B FC                MOV     R4,A
009C A3                INC     DPTR
009D E0                MOVX    A,@DPTR
009E FD                MOV     R5,A
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 30  

009F A3                INC     DPTR
00A0 E0                MOVX    A,@DPTR
00A1 FE                MOV     R6,A
00A2 A3                INC     DPTR
00A3 E0                MOVX    A,@DPTR
00A4 FF                MOV     R7,A
00A5 A804              MOV     R0,AR4
00A7 A905              MOV     R1,AR5
00A9 AA06              MOV     R2,AR6
00AB FB                MOV     R3,A
00AC 020000      E     LJMP    ?C?FPMUL
00AF         L?0216:
00AF         L?0217:
00AF 900000      R     MOV     DPTR,#b2
00B2 E0                MOVX    A,@DPTR
00B3 75F008            MOV     B,#08H
00B6 A4                MUL     AB
00B7 22                RET     
00B8         L?0218:
00B8 7B00              MOV     R3,#00H
00BA         L?0219:
00BA 7E00              MOV     R6,#00H
00BC 7F08              MOV     R7,#08H
00BE 020000      E     LJMP    ?C?COPY
00C1         L?0220:
00C1 F9                MOV     R1,A
00C2 E500        R     MOV     A,i
00C4         L?0221:
00C4 75F008            MOV     B,#08H
00C7 A4                MUL     AB
00C8 F582              MOV     DPL,A
00CA 22                RET     
00CB         L?0222:
00CB 7400        R     MOV     A,#LOW LEDBuf
00CD 2500        R     ADD     A,pt
00CF F8                MOV     R0,A
00D0 E6                MOV     A,@R0
00D1 F4                CPL     A
00D2 F6                MOV     @R0,A
00D3 0500        R     INC     pt
00D5 0500        R     INC     pt
00D7 22                RET     
00D8         L?0223:
00D8         L?0224:
00D8 7400        R     MOV     A,#LOW LEDBuf
00DA 2500        R     ADD     A,pt
00DC F8                MOV     R0,A
00DD 76FF              MOV     @R0,#0FFH
00DF 22                RET     
00E0         L?0225:
00E0 2F                ADD     A,R7
00E1 F9                MOV     R1,A
00E2 EA                MOV     A,R2
00E3 3E                ADDC    A,R6
00E4 A801              MOV     R0,AR1
00E6 FC                MOV     R4,A
00E7 AD03              MOV     R5,AR3
00E9 22                RET     
00EA         L?0226:
00EA         L?0227:
00EA 2F                ADD     A,R7
00EB F9                MOV     R1,A
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 31  

00EC EA                MOV     A,R2
00ED 35F0              ADDC    A,B
00EF FA                MOV     R2,A
00F0 22                RET     
             ; FUNCTION Com00C6 (END)

             ; FUNCTION _Delays (BEGIN)
                                           ; SOURCE LINE # 19
;---- Variable 'j' assigned to Register 'R4/R5' ----
;---- Variable 't' assigned to Register 'R6/R7' ----
                                           ; SOURCE LINE # 20
0000         ?C0001:
                                           ; SOURCE LINE # 22
0000 EF                MOV     A,R7
0001 1F                DEC     R7
0002 7001              JNZ     ?C0183
0004 1E                DEC     R6
0005         ?C0183:
0005 14                DEC     A
0006 4E                ORL     A,R6
0007 6013              JZ      ?C0006
                                           ; SOURCE LINE # 23
0009 E4                CLR     A
000A FC                MOV     R4,A
000B FD                MOV     R5,A
000C         ?C0003:
000C C3                CLR     C
000D ED                MOV     A,R5
000E 9405              SUBB    A,#05H
0010 EC                MOV     A,R4
0011 9400              SUBB    A,#00H
0013 50EB              JNC     ?C0001
0015 0D                INC     R5
0016 BD0001            CJNE    R5,#00H,?C0184
0019 0C                INC     R4
001A         ?C0184:
001A 80F0              SJMP    ?C0003
                                           ; SOURCE LINE # 24
001C         ?C0006:
001C 22                RET     
             ; FUNCTION _Delays (END)

             ; FUNCTION _GetADCResult (BEGIN)
                                           ; SOURCE LINE # 9
;---- Variable 'ch' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 10
                                           ; SOURCE LINE # 11
0000 EF                MOV     A,R7
0001 4488              ORL     A,#088H
0003 F5BC              MOV     ADC_CONTR,A
                                           ; SOURCE LINE # 12
0005 00                NOP     
                                           ; SOURCE LINE # 13
0006 00                NOP     
                                           ; SOURCE LINE # 14
0007 00                NOP     
                                           ; SOURCE LINE # 15
0008 00                NOP     
0009         ?C0007:
                                           ; SOURCE LINE # 16
0009 E5BC              MOV     A,ADC_CONTR
000B 30E4FB            JNB     ACC.4,?C0007
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 32  

000E         ?C0008:
                                           ; SOURCE LINE # 17
000E 53BCEF            ANL     ADC_CONTR,#0EFH
                                           ; SOURCE LINE # 19
0011 AFBD              MOV     R7,ADC_RES
                                           ; SOURCE LINE # 20
0013         ?C0009:
0013 22                RET     
             ; FUNCTION _GetADCResult (END)

             ; FUNCTION InitADC (BEGIN)
                                           ; SOURCE LINE # 22
                                           ; SOURCE LINE # 23
                                           ; SOURCE LINE # 24
0000 759D01            MOV     P1ASF,#01H
                                           ; SOURCE LINE # 25
0003 E4                CLR     A
0004 F5BD              MOV     ADC_RES,A
                                           ; SOURCE LINE # 26
0006 75BC80            MOV     ADC_CONTR,#080H
                                           ; SOURCE LINE # 27
0009 7F02              MOV     R7,#02H
000B FE                MOV     R6,A
000C 020000      R     LJMP    _Delay
             ; FUNCTION InitADC (END)

             ; FUNCTION _Delay (BEGIN)
                                           ; SOURCE LINE # 30
;---- Variable 'x' assigned to Register 'R4/R5' ----
;---- Variable 'n' assigned to Register 'R6/R7' ----
                                           ; SOURCE LINE # 31
0000         ?C0011:
                                           ; SOURCE LINE # 34
0000 EF                MOV     A,R7
0001 1F                DEC     R7
0002 AA06              MOV     R2,AR6
0004 7001              JNZ     ?C0185
0006 1E                DEC     R6
0007         ?C0185:
0007 4A                ORL     A,R2
0008 6010              JZ      ?C0015
                                           ; SOURCE LINE # 35
                                           ; SOURCE LINE # 36
000A 7C13              MOV     R4,#013H
000C 7D88              MOV     R5,#088H
000E         ?C0013:
                                           ; SOURCE LINE # 37
000E ED                MOV     A,R5
000F 1D                DEC     R5
0010 AA04              MOV     R2,AR4
0012 7001              JNZ     ?C0186
0014 1C                DEC     R4
0015         ?C0186:
0015 4A                ORL     A,R2
0016 60E8              JZ      ?C0011
0018 80F4              SJMP    ?C0013
                                           ; SOURCE LINE # 39
001A         ?C0015:
001A 22                RET     
             ; FUNCTION _Delay (END)

             ; FUNCTION ee (BEGIN)
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 33  

                                           ; SOURCE LINE # 22
                                           ; SOURCE LINE # 23
                                           ; SOURCE LINE # 24
0000 120000      R     LCALL   L?0216
0003 2400        R     ADD     A,#LOW iw+04H
0005 F582              MOV     DPL,A
0007 E4                CLR     A
0008 3400        R     ADDC    A,#HIGH iw+04H
000A 120000      R     LCALL   L?0205
000D C004              PUSH    AR4
000F C005              PUSH    AR5
0011 C006              PUSH    AR6
0013 C007              PUSH    AR7
0015 120000      R     LCALL   L?0216
0018 2400        R     ADD     A,#LOW iw
001A F582              MOV     DPL,A
001C E4                CLR     A
001D 3400        R     ADDC    A,#HIGH iw
001F F583              MOV     DPH,A
0021 120000      E     LCALL   ?C?LLDCODE
0024 900000      R     MOV     DPTR,#b1
0027 120000      R     LCALL   L?0206
002A D003              POP     AR3
002C D002              POP     AR2
002E D001              POP     AR1
0030 D000              POP     AR0
0032 120000      E     LCALL   ?C?FPSUB
0035 8F00        R     MOV     temp+03H,R7
0037 8E00        R     MOV     temp+02H,R6
0039 8D00        R     MOV     temp+01H,R5
003B 8C00        R     MOV     temp,R4
                                           ; SOURCE LINE # 25
003D 120000      R     LCALL   L?0217
0040 2400        R     ADD     A,#LOW iw
0042 F582              MOV     DPL,A
0044 E4                CLR     A
0045 3400        R     ADDC    A,#HIGH iw
0047 120000      R     LCALL   L?0205
004A C004              PUSH    AR4
004C C005              PUSH    AR5
004E C006              PUSH    AR6
0050 C007              PUSH    AR7
0052 120000      R     LCALL   L?0217
0055 2400        R     ADD     A,#LOW iw+04H
0057 F582              MOV     DPL,A
0059 E4                CLR     A
005A 3400        R     ADDC    A,#HIGH iw+04H
005C F583              MOV     DPH,A
005E 120000      E     LCALL   ?C?LLDCODE
0061 900000      R     MOV     DPTR,#b1
0064 120000      R     LCALL   L?0206
0067 D003              POP     AR3
0069 D002              POP     AR2
006B D001              POP     AR1
006D D000              POP     AR0
006F 120000      E     LCALL   ?C?FPADD
0072 8F00        R     MOV     temp+07H,R7
0074 8E00        R     MOV     temp+06H,R6
0076 8D00        R     MOV     temp+05H,R5
0078 8C00        R     MOV     temp+04H,R4
                                           ; SOURCE LINE # 26
007A 22                RET     
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 34  

             ; FUNCTION ee (END)

             ; FUNCTION _mypow (BEGIN)
                                           ; SOURCE LINE # 28
;---- Variable 'ntop' assigned to Register 'R3' ----
0000 AB05              MOV     R3,AR5
;---- Variable 'nbottom' assigned to Register 'R2' ----
0002 AA07              MOV     R2,AR7
                                           ; SOURCE LINE # 29
                                           ; SOURCE LINE # 30
0004 750000      R     MOV     result,#00H
0007 750001      R     MOV     result+01H,#01H
                                           ; SOURCE LINE # 32
000A E4                CLR     A
000B F500        R     MOV     t,A
000D         ?C0017:
000D E500        R     MOV     A,t
000F C3                CLR     C
0010 9B                SUBB    A,R3
0011 5013              JNC     ?C0018
0013 AE00        R     MOV     R6,result
0015 AF00        R     MOV     R7,result+01H
0017 EA                MOV     A,R2
0018 FD                MOV     R5,A
0019 7C00              MOV     R4,#00H
001B 120000      E     LCALL   ?C?IMUL
001E 8E00        R     MOV     result,R6
0020 8F00        R     MOV     result+01H,R7
0022 0500        R     INC     t
0024 80E7              SJMP    ?C0017
0026         ?C0018:
                                           ; SOURCE LINE # 33
0026 AE00        R     MOV     R6,result
0028 AF00        R     MOV     R7,result+01H
                                           ; SOURCE LINE # 34
002A         ?C0020:
002A 22                RET     
             ; FUNCTION _mypow (END)

             ; FUNCTION _fft (BEGIN)
                                           ; SOURCE LINE # 36
0000 900000      R     MOV     DPTR,#xin
0003 EB                MOV     A,R3
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 EA                MOV     A,R2
0007 F0                MOVX    @DPTR,A
0008 A3                INC     DPTR
0009 E9                MOV     A,R1
000A F0                MOVX    @DPTR,A
000B A3                INC     DPTR
000C ED                MOV     A,R5
000D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 37
                                           ; SOURCE LINE # 40
000E F500        R     MOV     fftnum,A
                                           ; SOURCE LINE # 41
0010 750001      R     MOV     m,#01H
0013         ?C0021:
0013 AF00        R     MOV     R7,fftnum
0015 7E01              MOV     R6,#01H
0017 EF                MOV     A,R7
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 35  

0018 7801              MOV     R0,#01H
001A 08                INC     R0
001B 8002              SJMP    ?C0188
001D         ?C0187:
001D C3                CLR     C
001E 13                RRC     A
001F         ?C0188:
001F D8FC              DJNZ    R0,?C0187
0021 F500        R     MOV     fftnum,A
0023 6401              XRL     A,#01H
0025 6004              JZ      ?C0022
0027 0500        R     INC     m
0029 80E8              SJMP    ?C0021
002B         ?C0022:
                                           ; SOURCE LINE # 42
002B E4                CLR     A
002C F500        R     MOV     k,A
002E         ?C0024:
002E 900000      R     MOV     DPTR,#N
0031 E0                MOVX    A,@DPTR
0032 14                DEC     A
0033 FF                MOV     R7,A
0034 E500        R     MOV     A,k
0036 D3                SETB    C
0037 9F                SUBB    A,R7
0038 4003              JC      $ + 5H
003A 020000      R     LJMP    ?C0025
                                           ; SOURCE LINE # 43
                                           ; SOURCE LINE # 44
003D 850000      R     MOV     n,k
                                           ; SOURCE LINE # 45
0040 E4                CLR     A
0041 F500        R     MOV     j,A
                                           ; SOURCE LINE # 46
0043 850000      R     MOV     i,m
0046         ?C0027:
0046 E500        R     MOV     A,i
0048 D3                SETB    C
0049 9400              SUBB    A,#00H
004B 4020              JC      ?C0028
                                           ; SOURCE LINE # 47
                                           ; SOURCE LINE # 48
004D E500        R     MOV     A,i
004F 14                DEC     A
0050 FF                MOV     R7,A
0051 E500        R     MOV     A,n
0053 5401              ANL     A,#01H
0055 FE                MOV     R6,A
0056 A807              MOV     R0,AR7
0058 08                INC     R0
0059 8002              SJMP    ?C0190
005B         ?C0189:
005B C3                CLR     C
005C 33                RLC     A
005D         ?C0190:
005D D8FC              DJNZ    R0,?C0189
005F 2500        R     ADD     A,j
0061 F500        R     MOV     j,A
                                           ; SOURCE LINE # 49
0063 E500        R     MOV     A,n
0065 C3                CLR     C
0066 13                RRC     A
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 36  

0067 F500        R     MOV     n,A
                                           ; SOURCE LINE # 50
0069 1500        R     DEC     i
006B 80D9              SJMP    ?C0027
006D         ?C0028:
                                           ; SOURCE LINE # 51
006D E500        R     MOV     A,k
006F C3                CLR     C
0070 9500        R     SUBB    A,j
0072 5061              JNC     ?C0026
0074 E500        R     MOV     A,j
0076 120000      R     LCALL   L?0208
0079         ?C0191:
0079 C3                CLR     C
007A 33                RLC     A
007B CE                XCH     A,R6
007C 33                RLC     A
007D CE                XCH     A,R6
007E D8F9              DJNZ    R0,?C0191
0080 120000      R     LCALL   L?0203
0083 2F                ADD     A,R7
0084 F9                MOV     R1,A
0085 EA                MOV     A,R2
0086 3E                ADDC    A,R6
0087 FA                MOV     R2,A
0088 7800        R     MOV     R0,#LOW t
008A 7C00        R     MOV     R4,#HIGH t
008C 7D00              MOV     R5,#00H
008E 120000      R     LCALL   L?0207
0091         ?C0192:
0091 C3                CLR     C
0092 33                RLC     A
0093 CE                XCH     A,R6
0094 33                RLC     A
0095 CE                XCH     A,R6
0096 D8F9              DJNZ    R0,?C0192
0098 120000      R     LCALL   L?0203
009B 2F                ADD     A,R7
009C F9                MOV     R1,A
009D EA                MOV     A,R2
009E 3E                ADDC    A,R6
009F FA                MOV     R2,A
00A0 C003              PUSH    AR3
00A2 C002              PUSH    AR2
00A4 C001              PUSH    AR1
00A6 E500        R     MOV     A,j
00A8 120000      R     LCALL   L?0208
00AB         ?C0193:
00AB C3                CLR     C
00AC 33                RLC     A
00AD CE                XCH     A,R6
00AE 33                RLC     A
00AF CE                XCH     A,R6
00B0 D8F9              DJNZ    R0,?C0193
00B2 120000      R     LCALL   L?0203
00B5 120000      R     LCALL   L?0225
00B8 D001              POP     AR1
00BA D002              POP     AR2
00BC D003              POP     AR3
00BE 120000      R     LCALL   L?0207
00C1         ?C0194:
00C1 C3                CLR     C
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 37  

00C2 33                RLC     A
00C3 CE                XCH     A,R6
00C4 33                RLC     A
00C5 CE                XCH     A,R6
00C6 D8F9              DJNZ    R0,?C0194
00C8 120000      R     LCALL   L?0203
00CB 120000      R     LCALL   L?0225
00CE 7A00        R     MOV     R2,#HIGH t
00D0 7900        R     MOV     R1,#LOW t
00D2 120000      R     LCALL   L?0218
                                           ; SOURCE LINE # 52
00D5         ?C0026:
00D5 0500        R     INC     k
00D7 020000      R     LJMP    ?C0024
00DA         ?C0025:
                                           ; SOURCE LINE # 53
00DA 750001      R     MOV     l,#01H
00DD         ?C0031:
00DD E500        R     MOV     A,l
00DF D3                SETB    C
00E0 9500        R     SUBB    A,m
00E2 4003              JC      $ + 5H
00E4 020000      R     LJMP    ?C0040
                                           ; SOURCE LINE # 54
                                           ; SOURCE LINE # 55
00E7 AD00        R     MOV     R5,l
00E9 7F02              MOV     R7,#02H
00EB 120000      R     LCALL   _mypow
00EE 8F00        R     MOV     disbuff,R7
                                           ; SOURCE LINE # 56
00F0 E500        R     MOV     A,disbuff
00F2 C3                CLR     C
00F3 13                RRC     A
00F4 F500        R     MOV     dispos,A
                                           ; SOURCE LINE # 57
00F6 750001      R     MOV     j,#01H
00F9         ?C0034:
00F9 E500        R     MOV     A,j
00FB D3                SETB    C
00FC 9500        R     SUBB    A,dispos
00FE 4003              JC      $ + 5H
0100 020000      R     LJMP    ?C0033
                                           ; SOURCE LINE # 58
0103 850000      R     MOV     i,j
0106         ?C0037:
0106 900000      R     MOV     DPTR,#N
0109 E0                MOVX    A,@DPTR
010A FF                MOV     R7,A
010B E500        R     MOV     A,i
010D C3                CLR     C
010E 9F                SUBB    A,R7
010F 4003              JC      $ + 5H
0111 020000      R     LJMP    ?C0036
                                           ; SOURCE LINE # 59
                                           ; SOURCE LINE # 60
0114 E500        R     MOV     A,i
0116 2500        R     ADD     A,dispos
0118 F500        R     MOV     dissec,A
                                           ; SOURCE LINE # 61
011A 120000      R     LCALL   L?0201
011D 120000      R     LCALL   L?0226
0120 7800        R     MOV     R0,#LOW ?ee?BYTE
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 38  

0122 7C00        R     MOV     R4,#HIGH ?ee?BYTE
0124 7D01              MOV     R5,#01H
0126 120000      R     LCALL   L?0219
0129 E500        R     MOV     A,j
012B 24FF              ADD     A,#0FFH
012D FF                MOV     R7,A
012E E4                CLR     A
012F 34FF              ADDC    A,#0FFH
0131 FE                MOV     R6,A
0132 900000      R     MOV     DPTR,#N
0135 E0                MOVX    A,@DPTR
0136 FD                MOV     R5,A
0137 7C00              MOV     R4,#00H
0139 120000      E     LCALL   ?C?IMUL
013C AD00        R     MOV     R5,disbuff
013E 120000      E     LCALL   ?C?UIDIV
0141 900000      R     MOV     DPTR,#?ee?BYTE+08H
0144 EF                MOV     A,R7
0145 F0                MOVX    @DPTR,A
0146 120000      R     LCALL   ee
                                           ; SOURCE LINE # 62
0149 7800        R     MOV     R0,#LOW t
014B 7C00        R     MOV     R4,#HIGH t
014D 7D00              MOV     R5,#00H
014F 7A00        R     MOV     R2,#HIGH temp
0151 7900        R     MOV     R1,#LOW temp
0153 120000      R     LCALL   L?0218
                                           ; SOURCE LINE # 63
0156 120000      R     LCALL   L?0204
0159 120000      R     LCALL   L?0220
015C 85F083            MOV     DPH,B
015F 120000      E     LCALL   ?C?LLDOPTR
0162 AB00        R     MOV     R3,t+03H
0164 AA00        R     MOV     R2,t+02H
0166 A900        R     MOV     R1,t+01H
0168 A800        R     MOV     R0,t
016A 120000      E     LCALL   ?C?FPSUB
016D 120000      R     LCALL   L?0204
0170 F9                MOV     R1,A
0171 E500        R     MOV     A,dissec
0173 120000      R     LCALL   L?0221
0176 85F083            MOV     DPH,B
0179 120000      E     LCALL   ?C?LSTOPTR
                                           ; SOURCE LINE # 64
017C E500        R     MOV     A,i
017E 75F008            MOV     B,#08H
0181 A4                MUL     AB
0182 29                ADD     A,R1
0183 F9                MOV     R1,A
0184 EA                MOV     A,R2
0185 35F0              ADDC    A,B
0187 FA                MOV     R2,A
0188 900004            MOV     DPTR,#04H
018B 120000      E     LCALL   ?C?LLDOPTR
018E AB00        R     MOV     R3,t+07H
0190 AA00        R     MOV     R2,t+06H
0192 A900        R     MOV     R1,t+05H
0194 A800        R     MOV     R0,t+04H
0196 120000      E     LCALL   ?C?FPSUB
0199 C006              PUSH    AR6
019B C007              PUSH    AR7
019D E500        R     MOV     A,dissec
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 39  

019F 120000      R     LCALL   L?0201
01A2 120000      R     LCALL   L?0226
01A5 900004            MOV     DPTR,#04H
01A8 D007              POP     AR7
01AA D006              POP     AR6
01AC 120000      E     LCALL   ?C?LSTOPTR
                                           ; SOURCE LINE # 65
01AF 120000      R     LCALL   L?0204
01B2 120000      R     LCALL   L?0220
01B5 E9                MOV     A,R1
01B6 2582              ADD     A,DPL
01B8 F9                MOV     R1,A
01B9 EA                MOV     A,R2
01BA 35F0              ADDC    A,B
01BC FA                MOV     R2,A
01BD C003              PUSH    AR3
01BF C002              PUSH    AR2
01C1 C001              PUSH    AR1
01C3 120000      E     LCALL   ?C?LLDPTR
01C6 AB00        R     MOV     R3,t+03H
01C8 AA00        R     MOV     R2,t+02H
01CA A900        R     MOV     R1,t+01H
01CC A800        R     MOV     R0,t
01CE 120000      E     LCALL   ?C?FPADD
01D1 D001              POP     AR1
01D3 D002              POP     AR2
01D5 D003              POP     AR3
01D7 120000      E     LCALL   ?C?LSTPTR
                                           ; SOURCE LINE # 66
01DA E500        R     MOV     A,i
01DC 120000      R     LCALL   L?0202
01DF 120000      R     LCALL   L?0227
01E2 E9                MOV     A,R1
01E3 2404              ADD     A,#04H
01E5 F9                MOV     R1,A
01E6 E4                CLR     A
01E7 3A                ADDC    A,R2
01E8 FA                MOV     R2,A
01E9 C003              PUSH    AR3
01EB C002              PUSH    AR2
01ED C001              PUSH    AR1
01EF 120000      E     LCALL   ?C?LLDPTR
01F2 AB00        R     MOV     R3,t+07H
01F4 AA00        R     MOV     R2,t+06H
01F6 A900        R     MOV     R1,t+05H
01F8 A800        R     MOV     R0,t+04H
01FA 120000      E     LCALL   ?C?FPADD
01FD D001              POP     AR1
01FF D002              POP     AR2
0201 D003              POP     AR3
0203 120000      E     LCALL   ?C?LSTPTR
                                           ; SOURCE LINE # 67
0206 E500        R     MOV     A,disbuff
0208 2500        R     ADD     A,i
020A F500        R     MOV     i,A
020C 020000      R     LJMP    ?C0037
020F         ?C0036:
020F 0500        R     INC     j
0211 020000      R     LJMP    ?C0034
                                           ; SOURCE LINE # 68
0214         ?C0033:
0214 0500        R     INC     l
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 40  

0216 020000      R     LJMP    ?C0031
                                           ; SOURCE LINE # 69
0219         ?C0040:
0219 22                RET     
             ; FUNCTION _fft (END)

             ; FUNCTION processfft (BEGIN)
                                           ; SOURCE LINE # 72
                                           ; SOURCE LINE # 73
                                           ; SOURCE LINE # 74
0000 E4                CLR     A
0001 F500        R     MOV     pt,A
                                           ; SOURCE LINE # 75
0003 750001      R     MOV     pt,#01H
0006         ?C0041:
                                           ; SOURCE LINE # 76
                                           ; SOURCE LINE # 77
0006 120000      R     LCALL   L?0209
0009 120000      E     LCALL   ?C?LSTKXDATA
000C 00                DB      00H
000D 00                DB      00H
000E 00                DB      00H
000F 00                DB      00H
                                           ; SOURCE LINE # 78
0010 0500        R     INC     pt
0012 E500        R     MOV     A,pt
0014 B441EF            CJNE    A,#041H,?C0041
0017         ?C0042:
                                           ; SOURCE LINE # 79
0017 7B01              MOV     R3,#01H
0019 7A00        R     MOV     R2,#HIGH dd
001B 7900        R     MOV     R1,#LOW dd
001D 7D40              MOV     R5,#040H
001F 120000      R     LCALL   _fft
                                           ; SOURCE LINE # 80
0022 900000      R     MOV     DPTR,#dd+04H
0025 120000      E     LCALL   ?C?LSTKXDATA
0028 00                DB      00H
0029 00                DB      00H
002A 00                DB      00H
002B 00                DB      00H
002C 900000      R     MOV     DPTR,#dd
002F 120000      E     LCALL   ?C?LSTKXDATA
0032 00                DB      00H
0033 00                DB      00H
0034 00                DB      00H
0035 00                DB      00H
                                           ; SOURCE LINE # 81
0036 750001      R     MOV     pt,#01H
0039         ?C0044:
                                           ; SOURCE LINE # 82
                                           ; SOURCE LINE # 83
0039 120000      R     LCALL   L?0209
003C 120000      R     LCALL   L?0215
003F C004              PUSH    AR4
0041 C005              PUSH    AR5
0043 C006              PUSH    AR6
0045 C007              PUSH    AR7
0047 120000      R     LCALL   L?0211
004A 120000      R     LCALL   L?0215
004D D003              POP     AR3
004F D002              POP     AR2
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 41  

0051 D001              POP     AR1
0053 D000              POP     AR0
0055 120000      E     LCALL   ?C?FPADD
0058 120000      E     LCALL   _sqrt
005B 120000      R     LCALL   L?0211
005E 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 84
0061 0500        R     INC     pt
0063 E500        R     MOV     A,pt
0065 C3                CLR     C
0066 9441              SUBB    A,#041H
0068 40CF              JC      ?C0044
006A         ?C0045:
                                           ; SOURCE LINE # 86
006A E500        R     MOV     A,Menu
006C 6401              XRL     A,#01H
006E 7032              JNZ     ?C0047
                                           ; SOURCE LINE # 87
                                           ; SOURCE LINE # 88
0070 750002      R     MOV     pt,#02H
0073         ?C0048:
0073 E500        R     MOV     A,pt
0075 C3                CLR     C
0076 9422              SUBB    A,#022H
0078 4003              JC      $ + 5H
007A 020000      R     LJMP    ?C0082
                                           ; SOURCE LINE # 89
                                           ; SOURCE LINE # 90
007D 120000      R     LCALL   L?0199
0080 8F00        R     MOV     tmp,R7
0082 120000      R     LCALL   L?0223
0085         ?C0051:
0085 E500        R     MOV     A,tmp
0087 C3                CLR     C
0088 9401              SUBB    A,#01H
008A 4011              JC      ?C0052
                                           ; SOURCE LINE # 91
                                           ; SOURCE LINE # 92
008C 7400        R     MOV     A,#LOW LEDBuf
008E 2500        R     ADD     A,pt
0090 F8                MOV     R0,A
0091 C000              PUSH    AR0
0093 E6                MOV     A,@R0
0094 25E0              ADD     A,ACC
0096 D000              POP     AR0
0098 F6                MOV     @R0,A
                                           ; SOURCE LINE # 94
0099 1500        R     DEC     tmp
009B 80E8              SJMP    ?C0051
009D         ?C0052:
                                           ; SOURCE LINE # 95
                                           ; SOURCE LINE # 96
009D 120000      R     LCALL   L?0222
00A0 80D1              SJMP    ?C0048
                                           ; SOURCE LINE # 97
00A2         ?C0047:
                                           ; SOURCE LINE # 98
00A2 E500        R     MOV     A,Menu
00A4 6402              XRL     A,#02H
00A6 706E              JNZ     ?C0055
                                           ; SOURCE LINE # 99
                                           ; SOURCE LINE # 102
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 42  

00A8 750002      R     MOV     pt,#02H
00AB         ?C0056:
00AB E500        R     MOV     A,pt
00AD C3                CLR     C
00AE 9422              SUBB    A,#022H
00B0 4003              JC      $ + 5H
00B2 020000      R     LJMP    ?C0082
                                           ; SOURCE LINE # 103
                                           ; SOURCE LINE # 104
00B5 120000      R     LCALL   L?0199
00B8 8F00        R     MOV     tmp,R7
                                           ; SOURCE LINE # 105
00BA 120000      R     LCALL   L?0214
00BD C3                CLR     C
00BE 9500        R     SUBB    A,tmp
00C0 5027              JNC     ?C0059
                                           ; SOURCE LINE # 106
                                           ; SOURCE LINE # 107
00C2 120000      R     LCALL   L?0223
00C5         ?C0060:
00C5 E500        R     MOV     A,tmp
00C7 D3                SETB    C
00C8 9401              SUBB    A,#01H
00CA 4011              JC      ?C0061
                                           ; SOURCE LINE # 108
                                           ; SOURCE LINE # 109
00CC 7400        R     MOV     A,#LOW LEDBuf
00CE 2500        R     ADD     A,pt
00D0 F8                MOV     R0,A
00D1 C000              PUSH    AR0
00D3 E6                MOV     A,@R0
00D4 25E0              ADD     A,ACC
00D6 D000              POP     AR0
00D8 F6                MOV     @R0,A
                                           ; SOURCE LINE # 111
00D9 1500        R     DEC     tmp
00DB 80E8              SJMP    ?C0060
00DD         ?C0061:
                                           ; SOURCE LINE # 112
00DD 120000      R     LCALL   L?0200
00E0 7400        R     MOV     A,#LOW refreshflag
00E2 2500        R     ADD     A,pt
00E4 F8                MOV     R0,A
00E5 A607              MOV     @R0,AR7
                                           ; SOURCE LINE # 113
00E7 8026              SJMP    ?C0058
00E9         ?C0059:
                                           ; SOURCE LINE # 115
                                           ; SOURCE LINE # 116
00E9 120000      R     LCALL   L?0214
00EC D3                SETB    C
00ED 9401              SUBB    A,#01H
00EF 4001              JC      ?C0064
00F1 16                DEC     @R0
00F2         ?C0064:
                                           ; SOURCE LINE # 117
00F2 120000      R     LCALL   L?0213
00F5 F500        R     MOV     tmp,A
00F7         ?C0065:
00F7 E500        R     MOV     A,tmp
00F9 D3                SETB    C
00FA 9401              SUBB    A,#01H
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 43  

00FC 4011              JC      ?C0058
                                           ; SOURCE LINE # 118
                                           ; SOURCE LINE # 119
00FE 7400        R     MOV     A,#LOW LEDBuf
0100 2500        R     ADD     A,pt
0102 F8                MOV     R0,A
0103 C000              PUSH    AR0
0105 E6                MOV     A,@R0
0106 25E0              ADD     A,ACC
0108 D000              POP     AR0
010A F6                MOV     @R0,A
                                           ; SOURCE LINE # 121
010B 1500        R     DEC     tmp
010D 80E8              SJMP    ?C0065
                                           ; SOURCE LINE # 123
                                           ; SOURCE LINE # 125
010F         ?C0058:
010F 0500        R     INC     pt
0111 0500        R     INC     pt
0113 020000      R     LJMP    ?C0056
                                           ; SOURCE LINE # 127
0116         ?C0055:
                                           ; SOURCE LINE # 128
0116 E500        R     MOV     A,Menu
0118 706A              JNZ     ?C0082
                                           ; SOURCE LINE # 129
                                           ; SOURCE LINE # 131
011A 750002      R     MOV     pt,#02H
011D         ?C0070:
011D E500        R     MOV     A,pt
011F C3                CLR     C
0120 9422              SUBB    A,#022H
0122 5060              JNC     ?C0082
                                           ; SOURCE LINE # 132
                                           ; SOURCE LINE # 133
0124 120000      R     LCALL   L?0200
0127 8F00        R     MOV     tmp,R7
                                           ; SOURCE LINE # 134
0129 120000      R     LCALL   L?0214
012C C3                CLR     C
012D 9500        R     SUBB    A,tmp
012F 5027              JNC     ?C0073
                                           ; SOURCE LINE # 135
                                           ; SOURCE LINE # 136
0131 120000      R     LCALL   L?0224
0134         ?C0074:
0134 E500        R     MOV     A,tmp
0136 C3                CLR     C
0137 9401              SUBB    A,#01H
0139 4011              JC      ?C0075
                                           ; SOURCE LINE # 137
                                           ; SOURCE LINE # 138
013B 7400        R     MOV     A,#LOW LEDBuf
013D 2500        R     ADD     A,pt
013F F8                MOV     R0,A
0140 C000              PUSH    AR0
0142 E6                MOV     A,@R0
0143 25E0              ADD     A,ACC
0145 D000              POP     AR0
0147 F6                MOV     @R0,A
                                           ; SOURCE LINE # 140
0148 1500        R     DEC     tmp
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 44  

014A 80E8              SJMP    ?C0074
014C         ?C0075:
                                           ; SOURCE LINE # 141
014C 120000      R     LCALL   L?0200
014F 7400        R     MOV     A,#LOW refreshflag
0151 2500        R     ADD     A,pt
0153 F8                MOV     R0,A
0154 A607              MOV     @R0,AR7
                                           ; SOURCE LINE # 142
0156 8026              SJMP    ?C0077
0158         ?C0073:
                                           ; SOURCE LINE # 144
                                           ; SOURCE LINE # 145
0158 120000      R     LCALL   L?0214
015B D3                SETB    C
015C 9401              SUBB    A,#01H
015E 4001              JC      ?C0078
0160 16                DEC     @R0
0161         ?C0078:
                                           ; SOURCE LINE # 146
0161 120000      R     LCALL   L?0213
0164 F500        R     MOV     tmp,A
0166         ?C0079:
0166 E500        R     MOV     A,tmp
0168 C3                CLR     C
0169 9401              SUBB    A,#01H
016B 4011              JC      ?C0077
                                           ; SOURCE LINE # 147
                                           ; SOURCE LINE # 148
016D 7400        R     MOV     A,#LOW LEDBuf
016F 2500        R     ADD     A,pt
0171 F8                MOV     R0,A
0172 C000              PUSH    AR0
0174 E6                MOV     A,@R0
0175 25E0              ADD     A,ACC
0177 D000              POP     AR0
0179 F6                MOV     @R0,A
                                           ; SOURCE LINE # 150
017A 1500        R     DEC     tmp
017C 80E8              SJMP    ?C0079
                                           ; SOURCE LINE # 152
017E         ?C0077:
                                           ; SOURCE LINE # 153
                                           ; SOURCE LINE # 155
017E 120000      R     LCALL   L?0222
0181 020000      R     LJMP    ?C0070
                                           ; SOURCE LINE # 157
                                           ; SOURCE LINE # 161
0184         ?C0082:
0184 22                RET     
             ; FUNCTION processfft (END)

             ; FUNCTION _LEDdelay (BEGIN)
                                           ; SOURCE LINE # 16
;---- Variable 'dtime' assigned to Register 'R6/R7' ----
                                           ; SOURCE LINE # 17
0000         ?C0083:
                                           ; SOURCE LINE # 18
0000 EF                MOV     A,R7
0001 1F                DEC     R7
0002 7001              JNZ     ?C0195
0004 1E                DEC     R6
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 45  

0005         ?C0195:
0005 14                DEC     A
0006 4E                ORL     A,R6
0007 70F7              JNZ     ?C0083
0009         ?C0084:
                                           ; SOURCE LINE # 19
0009         ?C0085:
0009 22                RET     
             ; FUNCTION _LEDdelay (END)

             ; FUNCTION _FFTMtL (BEGIN)
                                           ; SOURCE LINE # 22
0000 900000      R     MOV     DPTR,#VLY0
0003 ED                MOV     A,R5
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 EB                MOV     A,R3
0007 F0                MOVX    @DPTR,A
0008 900000      R     MOV     DPTR,#VLX
000B EF                MOV     A,R7
000C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 23
                                           ; SOURCE LINE # 24
000D E4                CLR     A
000E F500        R     MOV     ii,A
0010 7500FF      R     MOV     LY,#0FFH
0013 7500FF      R     MOV     LX0,#0FFH
0016 7500FF      R     MOV     LX1,#0FFH
                                           ; SOURCE LINE # 26
0019 EF                MOV     A,R7
001A 14                DEC     A
001B 6045              JZ      ?C0094
001D 14                DEC     A
001E 603C              JZ      ?C0093
0020 24FE              ADD     A,#0FEH
0022 6032              JZ      ?C0092
0024 24FC              ADD     A,#0FCH
0026 6028              JZ      ?C0091
0028 24F8              ADD     A,#0F8H
002A 601E              JZ      ?C0090
002C 24F0              ADD     A,#0F0H
002E 6014              JZ      ?C0089
0030 24E0              ADD     A,#0E0H
0032 600A              JZ      ?C0088
0034 24C0              ADD     A,#0C0H
0036 702E              JNZ     ?C0086
                                           ; SOURCE LINE # 27
                                           ; SOURCE LINE # 29
0038         ?C0087:
0038 C291              CLR     P11
003A C2B0              CLR     P30
003C 8028              SJMP    ?C0086
                                           ; SOURCE LINE # 30
003E         ?C0088:
003E C292              CLR     P12
0040 C2B1              CLR     P31
0042 8022              SJMP    ?C0086
                                           ; SOURCE LINE # 31
0044         ?C0089:
0044 C296              CLR     P16
0046 C2B5              CLR     P35
0048 801C              SJMP    ?C0086
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 46  

                                           ; SOURCE LINE # 32
004A         ?C0090:
004A C285              CLR     P05
004C C2A5              CLR     P25
004E 8016              SJMP    ?C0086
                                           ; SOURCE LINE # 33
0050         ?C0091:
0050 C297              CLR     P17
0052 C2B6              CLR     P36
0054 8010              SJMP    ?C0086
                                           ; SOURCE LINE # 34
0056         ?C0092:
0056 C283              CLR     P03
0058 C2A7              CLR     P27
005A 800A              SJMP    ?C0086
                                           ; SOURCE LINE # 35
005C         ?C0093:
005C C282              CLR     P02
005E C2C4              CLR     P44
0060 8004              SJMP    ?C0086
                                           ; SOURCE LINE # 36
0062         ?C0094:
0062 C294              CLR     P14
0064 C2B3              CLR     P33
                                           ; SOURCE LINE # 38
                                           ; SOURCE LINE # 40
0066         ?C0086:
                                           ; SOURCE LINE # 42
0066 900000      R     MOV     DPTR,#VLY0
0069 E0                MOVX    A,@DPTR
006A 14                DEC     A
006B 6037              JZ      ?C0104
006D 14                DEC     A
006E 6030              JZ      ?C0103
0070 24FE              ADD     A,#0FEH
0072 6028              JZ      ?C0102
0074 24FC              ADD     A,#0FCH
0076 6020              JZ      ?C0101
0078 24F8              ADD     A,#0F8H
007A 6018              JZ      ?C0100
007C 24F0              ADD     A,#0F0H
007E 6010              JZ      ?C0099
0080 24E0              ADD     A,#0E0H
0082 6008              JZ      ?C0098
0084 24C0              ADD     A,#0C0H
0086 701E              JNZ     ?C0096
                                           ; SOURCE LINE # 43
                                           ; SOURCE LINE # 45
0088         ?C0097:
0088 D2C7              SETB    P47
008A 801A              SJMP    ?C0096
                                           ; SOURCE LINE # 46
008C         ?C0098:
008C D293              SETB    P13
008E 8016              SJMP    ?C0096
                                           ; SOURCE LINE # 47
0090         ?C0099:
0090 D287              SETB    P07
0092 8012              SJMP    ?C0096
                                           ; SOURCE LINE # 48
0094         ?C0100:
0094 D295              SETB    P15
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 47  

0096 800E              SJMP    ?C0096
                                           ; SOURCE LINE # 49
0098         ?C0101:
0098 D280              SETB    P00
009A 800A              SJMP    ?C0096
                                           ; SOURCE LINE # 50
009C         ?C0102:
009C D286              SETB    P06
009E 8006              SJMP    ?C0096
                                           ; SOURCE LINE # 51
00A0         ?C0103:
00A0 D281              SETB    P01
00A2 8002              SJMP    ?C0096
                                           ; SOURCE LINE # 52
00A4         ?C0104:
00A4 D284              SETB    P04
                                           ; SOURCE LINE # 54
                                           ; SOURCE LINE # 56
00A6         ?C0096:
                                           ; SOURCE LINE # 58
00A6 900000      R     MOV     DPTR,#VLY1
00A9 E0                MOVX    A,@DPTR
00AA 14                DEC     A
00AB 6037              JZ      ?C0114
00AD 14                DEC     A
00AE 6030              JZ      ?C0113
00B0 24FE              ADD     A,#0FEH
00B2 6028              JZ      ?C0112
00B4 24FC              ADD     A,#0FCH
00B6 6020              JZ      ?C0111
00B8 24F8              ADD     A,#0F8H
00BA 6018              JZ      ?C0110
00BC 24F0              ADD     A,#0F0H
00BE 6010              JZ      ?C0109
00C0 24E0              ADD     A,#0E0H
00C2 6008              JZ      ?C0108
00C4 24C0              ADD     A,#0C0H
00C6 701E              JNZ     ?C0106
                                           ; SOURCE LINE # 59
                                           ; SOURCE LINE # 61
00C8         ?C0107:
00C8 D2B7              SETB    P37
00CA 801A              SJMP    ?C0106
                                           ; SOURCE LINE # 62
00CC         ?C0108:
00CC D2B2              SETB    P32
00CE 8016              SJMP    ?C0106
                                           ; SOURCE LINE # 63
00D0         ?C0109:
00D0 D2A3              SETB    P23
00D2 8012              SJMP    ?C0106
                                           ; SOURCE LINE # 64
00D4         ?C0110:
00D4 D2B4              SETB    P34
00D6 800E              SJMP    ?C0106
                                           ; SOURCE LINE # 65
00D8         ?C0111:
00D8 D2C6              SETB    P46
00DA 800A              SJMP    ?C0106
                                           ; SOURCE LINE # 66
00DC         ?C0112:
00DC D2A4              SETB    P24
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 48  

00DE 8006              SJMP    ?C0106
                                           ; SOURCE LINE # 67
00E0         ?C0113:
00E0 D2C5              SETB    P45
00E2 8002              SJMP    ?C0106
                                           ; SOURCE LINE # 68
00E4         ?C0114:
00E4 D2A6              SETB    P26
                                           ; SOURCE LINE # 70
                                           ; SOURCE LINE # 72
00E6         ?C0106:
                                           ; SOURCE LINE # 79
00E6 900000      R     MOV     DPTR,#Dtime
00E9 E0                MOVX    A,@DPTR
00EA FE                MOV     R6,A
00EB A3                INC     DPTR
00EC E0                MOVX    A,@DPTR
00ED FF                MOV     R7,A
00EE 120000      R     LCALL   _LEDdelay
                                           ; SOURCE LINE # 82
00F1 900000      R     MOV     DPTR,#VLX
00F4 E0                MOVX    A,@DPTR
00F5 14                DEC     A
00F6 6045              JZ      ?C0124
00F8 14                DEC     A
00F9 603C              JZ      ?C0123
00FB 24FE              ADD     A,#0FEH
00FD 6032              JZ      ?C0122
00FF 24FC              ADD     A,#0FCH
0101 6028              JZ      ?C0121
0103 24F8              ADD     A,#0F8H
0105 601E              JZ      ?C0120
0107 24F0              ADD     A,#0F0H
0109 6014              JZ      ?C0119
010B 24E0              ADD     A,#0E0H
010D 600A              JZ      ?C0118
010F 24C0              ADD     A,#0C0H
0111 702E              JNZ     ?C0116
                                           ; SOURCE LINE # 83
                                           ; SOURCE LINE # 85
0113         ?C0117:
0113 D291              SETB    P11
0115 D2B0              SETB    P30
0117 8028              SJMP    ?C0116
                                           ; SOURCE LINE # 86
0119         ?C0118:
0119 D292              SETB    P12
011B D2B1              SETB    P31
011D 8022              SJMP    ?C0116
                                           ; SOURCE LINE # 87
011F         ?C0119:
011F D296              SETB    P16
0121 D2B5              SETB    P35
0123 801C              SJMP    ?C0116
                                           ; SOURCE LINE # 88
0125         ?C0120:
0125 D285              SETB    P05
0127 D2A5              SETB    P25
0129 8016              SJMP    ?C0116
                                           ; SOURCE LINE # 89
012B         ?C0121:
012B D297              SETB    P17
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 49  

012D D2B6              SETB    P36
012F 8010              SJMP    ?C0116
                                           ; SOURCE LINE # 90
0131         ?C0122:
0131 D283              SETB    P03
0133 D2A7              SETB    P27
0135 800A              SJMP    ?C0116
                                           ; SOURCE LINE # 91
0137         ?C0123:
0137 D282              SETB    P02
0139 D2C4              SETB    P44
013B 8004              SJMP    ?C0116
                                           ; SOURCE LINE # 92
013D         ?C0124:
013D D294              SETB    P14
013F D2B3              SETB    P33
                                           ; SOURCE LINE # 94
                                           ; SOURCE LINE # 96
0141         ?C0116:
                                           ; SOURCE LINE # 98
0141 900000      R     MOV     DPTR,#VLY0
0144 E0                MOVX    A,@DPTR
0145 14                DEC     A
0146 6037              JZ      ?C0134
0148 14                DEC     A
0149 6030              JZ      ?C0133
014B 24FE              ADD     A,#0FEH
014D 6028              JZ      ?C0132
014F 24FC              ADD     A,#0FCH
0151 6020              JZ      ?C0131
0153 24F8              ADD     A,#0F8H
0155 6018              JZ      ?C0130
0157 24F0              ADD     A,#0F0H
0159 6010              JZ      ?C0129
015B 24E0              ADD     A,#0E0H
015D 6008              JZ      ?C0128
015F 24C0              ADD     A,#0C0H
0161 701E              JNZ     ?C0126
                                           ; SOURCE LINE # 99
                                           ; SOURCE LINE # 101
0163         ?C0127:
0163 C2C7              CLR     P47
0165 801A              SJMP    ?C0126
                                           ; SOURCE LINE # 102
0167         ?C0128:
0167 C293              CLR     P13
0169 8016              SJMP    ?C0126
                                           ; SOURCE LINE # 103
016B         ?C0129:
016B C287              CLR     P07
016D 8012              SJMP    ?C0126
                                           ; SOURCE LINE # 104
016F         ?C0130:
016F C295              CLR     P15
0171 800E              SJMP    ?C0126
                                           ; SOURCE LINE # 105
0173         ?C0131:
0173 C280              CLR     P00
0175 800A              SJMP    ?C0126
                                           ; SOURCE LINE # 106
0177         ?C0132:
0177 C286              CLR     P06
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 50  

0179 8006              SJMP    ?C0126
                                           ; SOURCE LINE # 107
017B         ?C0133:
017B C281              CLR     P01
017D 8002              SJMP    ?C0126
                                           ; SOURCE LINE # 108
017F         ?C0134:
017F C284              CLR     P04
                                           ; SOURCE LINE # 110
                                           ; SOURCE LINE # 112
0181         ?C0126:
                                           ; SOURCE LINE # 114
0181 900000      R     MOV     DPTR,#VLY1
0184 E0                MOVX    A,@DPTR
0185 14                DEC     A
0186 6030              JZ      ?C0144
0188 14                DEC     A
0189 602A              JZ      ?C0143
018B 24FE              ADD     A,#0FEH
018D 6023              JZ      ?C0142
018F 24FC              ADD     A,#0FCH
0191 601C              JZ      ?C0141
0193 24F8              ADD     A,#0F8H
0195 6015              JZ      ?C0140
0197 24F0              ADD     A,#0F0H
0199 600E              JZ      ?C0139
019B 24E0              ADD     A,#0E0H
019D 6007              JZ      ?C0138
019F 24C0              ADD     A,#0C0H
01A1 7017              JNZ     ?C0146
                                           ; SOURCE LINE # 115
                                           ; SOURCE LINE # 117
01A3         ?C0137:
01A3 C2B7              CLR     P37
01A5 22                RET     
                                           ; SOURCE LINE # 118
01A6         ?C0138:
01A6 C2B2              CLR     P32
01A8 22                RET     
                                           ; SOURCE LINE # 119
01A9         ?C0139:
01A9 C2A3              CLR     P23
01AB 22                RET     
                                           ; SOURCE LINE # 120
01AC         ?C0140:
01AC C2B4              CLR     P34
01AE 22                RET     
                                           ; SOURCE LINE # 121
01AF         ?C0141:
01AF C2C6              CLR     P46
01B1 22                RET     
                                           ; SOURCE LINE # 122
01B2         ?C0142:
01B2 C2A4              CLR     P24
01B4 22                RET     
                                           ; SOURCE LINE # 123
01B5         ?C0143:
01B5 C2C5              CLR     P45
01B7 22                RET     
                                           ; SOURCE LINE # 124
01B8         ?C0144:
01B8 C2A6              CLR     P26
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 51  

                                           ; SOURCE LINE # 126
                                           ; SOURCE LINE # 128
                                           ; SOURCE LINE # 130
01BA         ?C0146:
01BA 22                RET     
             ; FUNCTION _FFTMtL (END)

             ; FUNCTION BuftoLED168_Refresh (BEGIN)
                                           ; SOURCE LINE # 135
                                           ; SOURCE LINE # 136
                                           ; SOURCE LINE # 137
0000 750001      R     MOV     ty,#01H
0003 750001      R     MOV     tx,#01H
                                           ; SOURCE LINE # 138
0006 750001      R     MOV     tx,#01H
0009 750002      R     MOV     i,#02H
000C         ?C0147:
000C E500        R     MOV     A,tx
000E 603B              JZ      ?C0153
                                           ; SOURCE LINE # 139
                                           ; SOURCE LINE # 140
0010 750001      R     MOV     ty,#01H
0013         ?C0150:
0013 E500        R     MOV     A,ty
0015 6028              JZ      ?C0149
                                           ; SOURCE LINE # 141
                                           ; SOURCE LINE # 142
0017 7400        R     MOV     A,#LOW LEDBuf
0019 2500        R     ADD     A,i
001B F8                MOV     R0,A
001C E6                MOV     A,@R0
001D 5500        R     ANL     A,ty
001F FD                MOV     R5,A
0020 7400        R     MOV     A,#LOW LEDBuf+010H
0022 2500        R     ADD     A,i
0024 F8                MOV     R0,A
0025 E6                MOV     A,@R0
0026 5500        R     ANL     A,ty
0028 FB                MOV     R3,A
0029 900000      R     MOV     DPTR,#?_FFTMtL?BYTE+03H
002C E4                CLR     A
002D F0                MOVX    @DPTR,A
002E A3                INC     DPTR
002F 74C8              MOV     A,#0C8H
0031 F0                MOVX    @DPTR,A
0032 AF00        R     MOV     R7,tx
0034 120000      R     LCALL   _FFTMtL
                                           ; SOURCE LINE # 143
0037 E500        R     MOV     A,ty
0039 25E0              ADD     A,ACC
003B F500        R     MOV     ty,A
003D 80D4              SJMP    ?C0150
                                           ; SOURCE LINE # 144
003F         ?C0149:
003F E500        R     MOV     A,tx
0041 25E0              ADD     A,ACC
0043 F500        R     MOV     tx,A
0045 0500        R     INC     i
0047 0500        R     INC     i
0049 80C1              SJMP    ?C0147
                                           ; SOURCE LINE # 146
004B         ?C0153:
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 52  

004B 22                RET     
             ; FUNCTION BuftoLED168_Refresh (END)

             ; FUNCTION LIOINIT (BEGIN)
                                           ; SOURCE LINE # 30
                                           ; SOURCE LINE # 31
                                           ; SOURCE LINE # 32
0000 75BBFF            MOV     P4SW,#0FFH
                                           ; SOURCE LINE # 34
0003 E4                CLR     A
0004 F593              MOV     P0M1,A
0006 7594FF            MOV     P0M0,#0FFH
                                           ; SOURCE LINE # 35
0009 759101            MOV     P1M1,#01H
000C 7592FE            MOV     P1M0,#0FEH
                                           ; SOURCE LINE # 36
000F F5B3              MOV     P4M1,A
0011 75B4FF            MOV     P4M0,#0FFH
                                           ; SOURCE LINE # 37
0014 F595              MOV     P2M1,A
0016 7596F9            MOV     P2M0,#0F9H
                                           ; SOURCE LINE # 38
0019 F5B1              MOV     P3M1,A
001B 75B2FF            MOV     P3M0,#0FFH
                                           ; SOURCE LINE # 40
001E 7580FF            MOV     P0,#0FFH
                                           ; SOURCE LINE # 41
0021 7590FE            MOV     P1,#0FEH
                                           ; SOURCE LINE # 42
0024 75C0FF            MOV     P4,#0FFH
                                           ; SOURCE LINE # 43
0027 75A0FC            MOV     P2,#0FCH
                                           ; SOURCE LINE # 44
002A 75B0FF            MOV     P3,#0FFH
                                           ; SOURCE LINE # 46
002D C284              CLR     P04
002F C2A6              CLR     P26
                                           ; SOURCE LINE # 47
0031 C281              CLR     P01
0033 C2C5              CLR     P45
                                           ; SOURCE LINE # 48
0035 C286              CLR     P06
0037 C2A4              CLR     P24
                                           ; SOURCE LINE # 49
0039 C280              CLR     P00
003B C2C6              CLR     P46
                                           ; SOURCE LINE # 50
003D C295              CLR     P15
003F C2B4              CLR     P34
                                           ; SOURCE LINE # 51
0041 C287              CLR     P07
0043 C2A3              CLR     P23
                                           ; SOURCE LINE # 52
0045 C293              CLR     P13
0047 C2B2              CLR     P32
                                           ; SOURCE LINE # 53
0049 C2C7              CLR     P47
004B C2B7              CLR     P37
                                           ; SOURCE LINE # 55
004D D294              SETB    P14
004F D2B3              SETB    P33
                                           ; SOURCE LINE # 56
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 53  

0051 D282              SETB    P02
0053 D2C4              SETB    P44
                                           ; SOURCE LINE # 57
0055 D283              SETB    P03
0057 D2A7              SETB    P27
                                           ; SOURCE LINE # 58
0059 D297              SETB    P17
005B D2B6              SETB    P36
                                           ; SOURCE LINE # 59
005D D285              SETB    P05
005F D2A5              SETB    P25
                                           ; SOURCE LINE # 60
0061 D296              SETB    P16
0063 D2B5              SETB    P35
                                           ; SOURCE LINE # 61
0065 D292              SETB    P12
0067 D2B1              SETB    P31
                                           ; SOURCE LINE # 62
0069 D291              SETB    P11
006B D2B0              SETB    P30
                                           ; SOURCE LINE # 63
006D 22                RET     
             ; FUNCTION LIOINIT (END)

             ; FUNCTION LEDRefresh (BEGIN)
0000 C0E0              PUSH    ACC
0002 C083              PUSH    DPH
0004 C082              PUSH    DPL
0006 C0D0              PUSH    PSW
0008 75D000            MOV     PSW,#00H
000B C000              PUSH    AR0
000D C003              PUSH    AR3
000F C005              PUSH    AR5
0011 C006              PUSH    AR6
0013 C007              PUSH    AR7
                                           ; SOURCE LINE # 66
                                           ; SOURCE LINE # 68
0015 758B00            MOV     TL1,#00H
                                           ; SOURCE LINE # 69
0018 85008D      R     MOV     TH1,INTTime
                                           ; SOURCE LINE # 70
001B 120000      R     LCALL   BuftoLED168_Refresh
                                           ; SOURCE LINE # 71
001E D007              POP     AR7
0020 D006              POP     AR6
0022 D005              POP     AR5
0024 D003              POP     AR3
0026 D000              POP     AR0
0028 D0D0              POP     PSW
002A D082              POP     DPL
002C D083              POP     DPH
002E D0E0              POP     ACC
0030 32                RETI    
             ; FUNCTION LEDRefresh (END)

             ; FUNCTION Timer_INT (BEGIN)
                                           ; SOURCE LINE # 83
                                           ; SOURCE LINE # 84
                                           ; SOURCE LINE # 85
0000 758911            MOV     TMOD,#011H
                                           ; SOURCE LINE # 86
0003 D2AF              SETB    EA
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 54  

                                           ; SOURCE LINE # 88
0005 E4                CLR     A
0006 F58D              MOV     TH1,A
                                           ; SOURCE LINE # 89
0008 F58B              MOV     TL1,A
                                           ; SOURCE LINE # 90
000A D2AB              SETB    ET1
                                           ; SOURCE LINE # 91
000C D28E              SETB    TR1
                                           ; SOURCE LINE # 92
000E 22                RET     
             ; FUNCTION Timer_INT (END)

             ; FUNCTION Main (BEGIN)
                                           ; SOURCE LINE # 94
                                           ; SOURCE LINE # 95
                                           ; SOURCE LINE # 96
0000 750002      R     MOV     Count,#02H
0003 7500BC      R     MOV     Count+01H,#0BCH
                                           ; SOURCE LINE # 97
0006 E4                CLR     A
0007 F500        R     MOV     LED,A
0009 F500        R     MOV     num,A
                                           ; SOURCE LINE # 98
000B 120000      R     LCALL   LIOINIT
                                           ; SOURCE LINE # 99
000E 120000      R     LCALL   InitADC
                                           ; SOURCE LINE # 100
0011 E4                CLR     A
0012 F500        R     MOV     i,A
0014         ?C0157:
0014 7400        R     MOV     A,#LOW refreshflag
0016 2500        R     ADD     A,i
0018 F8                MOV     R0,A
0019 7609              MOV     @R0,#09H
001B 0500        R     INC     i
001D E500        R     MOV     A,i
001F B428F2            CJNE    A,#028H,?C0157
0022         ?C0158:
                                           ; SOURCE LINE # 101
0022 C2A0              CLR     P20
                                           ; SOURCE LINE # 102
0024 120000      R     LCALL   Timer_INT
0027         ?C0160:
                                           ; SOURCE LINE # 103
                                           ; SOURCE LINE # 104
                                           ; SOURCE LINE # 105
0027 E4                CLR     A
0028 F500        R     MOV     i,A
002A         ?C0162:
                                           ; SOURCE LINE # 106
                                           ; SOURCE LINE # 107
002A E4                CLR     A
002B FF                MOV     R7,A
002C 120000      R     LCALL   _GetADCResult
002F 7E00              MOV     R6,#00H
0031 EF                MOV     A,R7
0032 A800        R     MOV     R0,gain
0034 08                INC     R0
0035 8005              SJMP    ?C0197
0037         ?C0196:
0037 C3                CLR     C
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 55  

0038 33                RLC     A
0039 CE                XCH     A,R6
003A 33                RLC     A
003B CE                XCH     A,R6
003C         ?C0197:
003C D8F9              DJNZ    R0,?C0196
003E FD                MOV     R5,A
003F AC06              MOV     R4,AR6
0041 EC                MOV     A,R4
0042 120000      E     LCALL   ?C?FCASTI
0045 E500        R     MOV     A,i
0047 120000      R     LCALL   L?0212
004A 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 108
004D E500        R     MOV     A,i
004F 120000      R     LCALL   L?0210
0052 120000      E     LCALL   ?C?LSTKXDATA
0055 00                DB      00H
0056 00                DB      00H
0057 00                DB      00H
0058 00                DB      00H
                                           ; SOURCE LINE # 109
0059 0500        R     INC     i
005B E500        R     MOV     A,i
005D C3                CLR     C
005E 9441              SUBB    A,#041H
0060 40C8              JC      ?C0162
0062         ?C0163:
                                           ; SOURCE LINE # 110
0062 120000      R     LCALL   processfft
                                           ; SOURCE LINE # 111
0065 E500        R     MOV     A,LED
0067 7004              JNZ     ?C0165
0069 7F01              MOV     R7,#01H
006B 8002              SJMP    ?C0166
006D         ?C0165:
006D 7F00              MOV     R7,#00H
006F         ?C0166:
006F 8F00        R     MOV     LED,R7
                                           ; SOURCE LINE # 112
0071 E4                CLR     A
0072 FF                MOV     R7,A
0073 FE                MOV     R6,A
0074 FD                MOV     R5,A
0075 7C42              MOV     R4,#042H
0077 900000      R     MOV     DPTR,#dd+010H
007A E0                MOVX    A,@DPTR
007B F8                MOV     R0,A
007C A3                INC     DPTR
007D E0                MOVX    A,@DPTR
007E F9                MOV     R1,A
007F A3                INC     DPTR
0080 E0                MOVX    A,@DPTR
0081 FA                MOV     R2,A
0082 A3                INC     DPTR
0083 E0                MOVX    A,@DPTR
0084 FB                MOV     R3,A
0085 120000      E     LCALL   ?C?FPCMP3
0088 5006              JNC     ?C0167
                                           ; SOURCE LINE # 113
                                           ; SOURCE LINE # 114
008A 750001      R     MOV     LED,#01H
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 56  

                                           ; SOURCE LINE # 115
008D 020000      R     LJMP    ?C0168
0090         ?C0167:
                                           ; SOURCE LINE # 117
                                           ; SOURCE LINE # 118
0090 750000      R     MOV     Count,#00H
0093 750001      R     MOV     Count+01H,#01H
                                           ; SOURCE LINE # 119
0096 0500        R     INC     num
0098 E500        R     MOV     A,num
009A 64AF              XRL     A,#0AFH
009C 6003              JZ      $ + 5H
009E 020000      R     LJMP    ?C0168
                                           ; SOURCE LINE # 120
                                           ; SOURCE LINE # 121
00A1 F500        R     MOV     num,A
                                           ; SOURCE LINE # 123
00A3 7596FB            MOV     P2M0,#0FBH
                                           ; SOURCE LINE # 124
00A6 D2A1              SETB    P21
                                           ; SOURCE LINE # 125
00A8 7FD0              MOV     R7,#0D0H
00AA 7E07              MOV     R6,#07H
00AC 120000      R     LCALL   _Delays
                                           ; SOURCE LINE # 126
00AF C2A1              CLR     P21
                                           ; SOURCE LINE # 127
00B1 7596F9            MOV     P2M0,#0F9H
                                           ; SOURCE LINE # 130
00B4 E4                CLR     A
00B5 FB                MOV     R3,A
00B6 FA                MOV     R2,A
00B7 F9                MOV     R1,A
00B8 7842              MOV     R0,#042H
00BA 900000      R     MOV     DPTR,#dd+010H
00BD E0                MOVX    A,@DPTR
00BE FC                MOV     R4,A
00BF A3                INC     DPTR
00C0 E0                MOVX    A,@DPTR
00C1 FD                MOV     R5,A
00C2 A3                INC     DPTR
00C3 E0                MOVX    A,@DPTR
00C4 FE                MOV     R6,A
00C5 A3                INC     DPTR
00C6 E0                MOVX    A,@DPTR
00C7 FF                MOV     R7,A
00C8 120000      E     LCALL   ?C?FPDIV
00CB 120000      E     LCALL   ?C?CASTF
00CE 8F00        R     MOV     Cgain,R7
                                           ; SOURCE LINE # 131
00D0 7407              MOV     A,#07H
00D2 C3                CLR     C
00D3 9500        R     SUBB    A,Cgain
00D5 5004              JNC     ?C0171
00D7 7F01              MOV     R7,#01H
00D9 8002              SJMP    ?C0172
00DB         ?C0171:
00DB 7F00              MOV     R7,#00H
00DD         ?C0172:
00DD D3                SETB    C
00DE EF                MOV     A,R7
00DF 6480              XRL     A,#080H
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 57  

00E1 9488              SUBB    A,#088H
00E3 5005              JNC     ?C0170
                                           ; SOURCE LINE # 132
                                           ; SOURCE LINE # 133
00E5 750002      R     MOV     gain,#02H
                                           ; SOURCE LINE # 135
00E8 8037              SJMP    ?C0168
00EA         ?C0170:
                                           ; SOURCE LINE # 136
00EA 7404              MOV     A,#04H
00EC C3                CLR     C
00ED 9500        R     SUBB    A,Cgain
00EF 5004              JNC     ?C0175
00F1 7F01              MOV     R7,#01H
00F3 8002              SJMP    ?C0176
00F5         ?C0175:
00F5 7F00              MOV     R7,#00H
00F7         ?C0176:
00F7 D3                SETB    C
00F8 EF                MOV     A,R7
00F9 6480              XRL     A,#080H
00FB 9486              SUBB    A,#086H
00FD 5005              JNC     ?C0174
                                           ; SOURCE LINE # 137
                                           ; SOURCE LINE # 138
00FF 750003      R     MOV     gain,#03H
                                           ; SOURCE LINE # 139
0102 801D              SJMP    ?C0168
0104         ?C0174:
                                           ; SOURCE LINE # 140
0104 7402              MOV     A,#02H
0106 C3                CLR     C
0107 9500        R     SUBB    A,Cgain
0109 5004              JNC     ?C0179
010B 7F01              MOV     R7,#01H
010D 8002              SJMP    ?C0180
010F         ?C0179:
010F 7F00              MOV     R7,#00H
0111         ?C0180:
0111 D3                SETB    C
0112 EF                MOV     A,R7
0113 6480              XRL     A,#080H
0115 9484              SUBB    A,#084H
0117 5005              JNC     ?C0178
                                           ; SOURCE LINE # 141
                                           ; SOURCE LINE # 142
0119 750004      R     MOV     gain,#04H
                                           ; SOURCE LINE # 143
011C 8003              SJMP    ?C0168
011E         ?C0178:
                                           ; SOURCE LINE # 145
                                           ; SOURCE LINE # 146
011E 750005      R     MOV     gain,#05H
                                           ; SOURCE LINE # 147
                                           ; SOURCE LINE # 148
                                           ; SOURCE LINE # 149
0121         ?C0168:
                                           ; SOURCE LINE # 151
0121 E500        R     MOV     A,LED
0123 24FF              ADD     A,#0FFH
0125 92A1              MOV     P21,C
                                           ; SOURCE LINE # 152
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 58  

0127 020000      R     LJMP    ?C0160
             ; FUNCTION Main (END)

C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 59  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


P0M1 . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0093H  1
P1M0 . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0092H  1
P2M0 . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0096H  1
P1M1 . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0091H  1
P0 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0080H  1
P3M0 . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B2H  1
P2M1 . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0095H  1
P1 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0090H  1
P4M0 . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B4H  1
P3M1 . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B1H  1
P2 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00A0H  1
P4M1 . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B3H  1
P3 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B0H  1
DelayTime. . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0000H  1
P4 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00C0H  1
P5 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00C8H  1
EA . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00AFH  1
Main . . . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  Count. . . . . . . . . . . . . . . .  AUTO     DATA   U_INT    0000H  2
  i. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0002H  1
  Cgain. . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0003H  1
  LED. . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0004H  1
  num. . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0005H  1
IE . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00A8H  1
refreshflag. . . . . . . . . . . . . .  PUBLIC   IDATA  ARRAY    0000H  40
ADC_RES. . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00BDH  1
Menu . . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0001H  1
IP . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B8H  1
LIOINIT. . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
gain . . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0002H  1
XL . . . . . . . . . . . . . . . . . .  PUBLIC   XDATA  U_INT    0000H  2
CCON . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00D8H  1
YL . . . . . . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   0002H  1
LEDRefresh . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
compx. . . . . . . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  8
  real . . . . . . . . . . . . . . . .  MEMBER   -----  FLOAT    0000H  4
  imag . . . . . . . . . . . . . . . .  MEMBER   -----  FLOAT    0004H  4
BuftoLED168_Refresh. . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  i. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0000H  1
  ty . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0001H  1
  tx . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0002H  1
P4SW . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00BBH  1
P00. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0080H  1
ADC_CONTR. . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00BCH  1
P01. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0081H  1
P20. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00A0H  1
P11. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0091H  1
P02. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0082H  1
P30. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00B0H  1
P21. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00A1H  1
P12. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0092H  1
P03. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0083H  1
SCON . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0098H  1
P31. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00B1H  1
P13. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0093H  1
P04. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0084H  1
BYTE . . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 60  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


TMOD . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0089H  1
TCON . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0088H  1
P32. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00B2H  1
P23. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00A3H  1
P14. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0094H  1
P05. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0085H  1
P33. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00B3H  1
P24. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00A4H  1
P15. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0095H  1
P06. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0086H  1
P34. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00B4H  1
P25. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00A5H  1
P16. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0096H  1
P07. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0087H  1
temp . . . . . . . . . . . . . . . . .  PUBLIC   DATA   STRUCT   0003H  8
P44. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00C4H  1
P35. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00B5H  1
P26. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00A6H  1
P17. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0097H  1
P45. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00C5H  1
P36. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00B6H  1
P27. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00A7H  1
P46. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00C6H  1
P37. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00B7H  1
P47. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00C7H  1
WORD . . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_INT    -----  2
_mypow . . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  nbottom. . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0002H  1
  ntop . . . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0003H  1
  result . . . . . . . . . . . . . . .  AUTO     DATA   U_INT    0000H  2
  t. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0002H  1
_fft . . . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  xin. . . . . . . . . . . . . . . . .  AUTO     XDATA  PTR      0000H  3
  N. . . . . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0003H  1
  fftnum . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0000H  1
  i. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0001H  1
  j. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0002H  1
  k. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0003H  1
  l. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0004H  1
  m. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0005H  1
  n. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0006H  1
  disbuff. . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0007H  1
  dispos . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0008H  1
  dissec . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0009H  1
  t. . . . . . . . . . . . . . . . . .  AUTO     DATA   STRUCT   000AH  8
processfft . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  pt . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0000H  1
  tmp. . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0001H  1
ACC. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00E0H  1
dd . . . . . . . . . . . . . . . . . .  PUBLIC   XDATA  ARRAY    0003H  520
ee . . . . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  b1 . . . . . . . . . . . . . . . . .  AUTO     XDATA  STRUCT   0000H  8
  b2 . . . . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0008H  1
ET1. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00ABH  1
_sqrt. . . . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
TH1. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   008DH  1
Timer_INT. . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
C51 COMPILER V9.01   PRJ                                                                   05/12/2012 10:26:22 PAGE 61  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


TL1. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   008BH  1
TR1. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      008EH  1
P1ASF. . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   009DH  1
InitADC. . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
iw . . . . . . . . . . . . . . . . . .  PUBLIC   CODE   ARRAY    0000H  256
_Delays. . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  t. . . . . . . . . . . . . . . . . .  * REG *  DATA   U_INT    0006H  2
  j. . . . . . . . . . . . . . . . . .  * REG *  DATA   U_INT    0004H  2
_LEDdelay. . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  dtime. . . . . . . . . . . . . . . .  * REG *  DATA   U_INT    0006H  2
_GetADCResult. . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  ch . . . . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
_FFTMtL. . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  VLX. . . . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0000H  1
  VLY0 . . . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0001H  1
  VLY1 . . . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0002H  1
  Dtime. . . . . . . . . . . . . . . .  AUTO     XDATA  U_INT    0003H  2
  ii . . . . . . . . . . . . . . . . .  AUTO     DATA   CHAR     0000H  1
  LY . . . . . . . . . . . . . . . . .  AUTO     DATA   CHAR     0001H  1
  LX0. . . . . . . . . . . . . . . . .  AUTO     DATA   CHAR     0002H  1
  LX1. . . . . . . . . . . . . . . . .  AUTO     DATA   CHAR     0003H  1
_Delay . . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  n. . . . . . . . . . . . . . . . . .  * REG *  DATA   U_INT    0006H  2
  x. . . . . . . . . . . . . . . . . .  * REG *  DATA   U_INT    0004H  2
LEDBuf . . . . . . . . . . . . . . . .  PUBLIC   DATA   ARRAY    000BH  35
PSW. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00D0H  1
INTTime. . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   002EH  1
P0M0 . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0094H  1


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   2426    ----
   CONSTANT SIZE    =    256    ----
   XDATA SIZE       =    523      18
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     47      36
   IDATA SIZE       =     40    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
