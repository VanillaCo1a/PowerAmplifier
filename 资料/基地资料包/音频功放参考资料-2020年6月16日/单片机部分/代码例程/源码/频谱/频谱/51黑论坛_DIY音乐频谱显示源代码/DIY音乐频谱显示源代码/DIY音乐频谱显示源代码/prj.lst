C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE PRJ
OBJECT MODULE PLACED IN .\Hex\prj.obj
COMPILER INVOKED BY: C:\Program Files X\Keil\C51\BIN\C51.EXE src\prj.c LARGE OPTIMIZE(9,SPEED) REGFILE(.\Hex\Prj.ORC) BR
                    -OWSE DEBUG OBJECTEXTEND CODE LISTINCLUDE SYMBOLS PRINT(.\prj.lst) PREPRINT(.\prj.i) OBJECT(.\Hex\prj.obj)

line level    source

   1          #include "src\STC12C5A.h"                
   1      =1  /*------------------------------------------------*/
   2      =1  /* --- ºê¾§¿Æ¼¼ STCMCU ---------------------------*/
   3      =1  /* ÊÊÓÃÓÚ: STC12C5AxxX   STC12LE5AxxX ------------*/
   4      =1  /* ------- STC12C5AxxCPP STC12LE5AxxCPP ----------*/
   5      =1  /* ------- STC12C5AxxAD  STC12LE5AxxAD  ----------*/
   6      =1  /* ------- STC12C5AxxS2  STC12LE5AxxS2  ----------*/
   7      =1  /* ------- IAP12C5Axx    IAP12LE5Axx    ----------*/
   8      =1  /* ------- IAP12C5AxxCPP IAP12LE5AxxCPP ----------*/
   9      =1  /* ------- IAP12C5AxxAD  IAP12LE5AxxAD  ----------*/
  10      =1  /* ------- IAP12C5AxxS2  IAP12LE5AxxS2  ----------*/
  11      =1  /*------------------------------------------------*/
  12      =1  
  13      =1  #ifndef __STC12C5A_H__
  14      =1  #define __STC12C5A_H__
  15      =1  
  16      =1  //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -//////
  17      =1  
  18      =1  sfr  PSW        =   0xd0;       //³ÌÐò×´Ì¬×Ö            Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
  19      =1                                  //Î»ÃèÊö                CY      AC      F0      RS1     RS0     OV      F1
             -      P
  20      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
  21      =1  
  22      =1  sbit CY         =   PSW^7;      //½øÎ»±êÖ¾
  23      =1  sbit AC         =   PSW^6;      //¸¨Öú½øÎ»±êÖ¾
  24      =1  sbit F0         =   PSW^5;      //ÓÃ»§±êÖ¾
  25      =1  sbit RS1        =   PSW^4;      //¼Ä´æÆ÷×éÑ¡ÔñÎ»1
  26      =1  sbit RS0        =   PSW^3;      //¼Ä´æÆ÷×éÑ¡ÔñÎ»0
  27      =1  sbit OV         =   PSW^2;      //Òç³ö±êÖ¾
  28      =1  sbit P          =   PSW^0;      //ACCµÄÅ¼Ð£ÑéÎ»
  29      =1  
  30      =1  /////////////////////////////////
  31      =1  
  32      =1  sfr  ACC        =   0xe0;       //ÀÛ¼ÓÆ÷                Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
  33      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
  34      =1  
  35      =1  sbit ACC7       =   ACC^7;      //ÀÛ¼ÓÆ÷µÚ7Î»
  36      =1  sbit ACC6       =   ACC^6;      //ÀÛ¼ÓÆ÷µÚ6Î»
  37      =1  sbit ACC5       =   ACC^5;      //ÀÛ¼ÓÆ÷µÚ5Î»
  38      =1  sbit ACC4       =   ACC^4;      //ÀÛ¼ÓÆ÷µÚ4Î»
  39      =1  sbit ACC3       =   ACC^3;      //ÀÛ¼ÓÆ÷µÚ3Î»
  40      =1  sbit ACC2       =   ACC^2;      //ÀÛ¼ÓÆ÷µÚ2Î»
  41      =1  sbit ACC1       =   ACC^1;      //ÀÛ¼ÓÆ÷µÚ1Î»
  42      =1  sbit ACC0       =   ACC^0;      //ÀÛ¼ÓÆ÷µÚ0Î»
  43      =1  
  44      =1  /////////////////////////////////
  45      =1  
  46      =1  sfr  B          =   0xf0;       //B¼Ä´æÆ÷               Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 2   

  47      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
  48      =1  
  49      =1  /////////////////////////////////
  50      =1  
  51      =1  sfr  SP         =   0x81;       //¶ÑÕ»Ö¸Õë              Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
  52      =1                                  //³õÊ¼Öµ=0000,0111      0       0       0       0       0       1       1 
             -      1
  53      =1  
  54      =1  /////////////////////////////////
  55      =1  
  56      =1  sfr  DPL        =   0x82;       //Êý¾ÝÖ¸ÕëµÍ×Ö½Ú        Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
  57      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
  58      =1  
  59      =1  /////////////////////////////////
  60      =1  
  61      =1  sfr  DPH        =   0x83;       //Êý¾ÝÖ¸Õë¸ß×Ö½Ú        Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
  62      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
  63      =1  
  64      =1  //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -//////
  65      =1  
  66      =1  sfr  PCON       =   0x87;       //µçÔ´¿ØÖÆ¼Ä´æÆ÷        Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
  67      =1                                  //Î»ÃèÊö                SMOD    SMOD0   LVDF    POF     GF1     GF0     PD
             -      IDL
  68      =1                                  //³õÊ¼Öµ=0011,0000      0       0       1       1       0       0       0 
             -      0
  69      =1  
  70      =1  #define SMOD        0x80        //´®¿Ú²¨ÌØÂÊ±¶ËÙÎ»,ÖÃ1¿ÉÊ¹²¨ÌØÂÊ¿ì1±¶
  71      =1  #define SMOD0       0x40        //FE/SM0Ñ¡ÔñÎ»,0:SCON.7ÎªSM0 1:SCON.7ÎªFE
  72      =1  #define LVDF        0x20        //µÍÑ¹¼ì²âÖÐ¶ÏÇëÇóÎ»,ÓÉÓ²¼þÖÃ1,ÐèÓÉÈí¼þÇå0
  73      =1  #define POF         0x10        //ÉÏµç¸´Î»±êÖ¾Î»,ÉÏµçÊ±ÓÉÓ²¼þÖÃ1,ÐèÓÉÈí¼þÇå0
  74      =1  #define GF1         0x08        //Í¨ÓÃ±êÖ¾Î»1
  75      =1  #define GF0         0x04        //Í¨ÓÃ±êÖ¾Î»0
  76      =1  #define PD          0x02        //µôµç¿ØÖÆÎ»,Ð´1¿ÉÒÔÊ¹MCU½øÈëPowerDownÄ£Ê½
  77      =1  #define IDL         0x01        //¿ÕÏÐ¿ØÖÆÎ»,Ð´1¿ÉÒÔÊ¹MCU½øÈëIdleÄ£Ê½
  78      =1  
  79      =1  /////////////////////////////////
  80      =1  
  81      =1  sfr  WAKE_CLKO  =   0x8f;       //µôµç»½ÐÑ/Ê±ÖÓÊä³ö¿ØÖÆ Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
  82      =1                                  //Î»ÃèÊö          PCAWAKEUP RXDPINIE T1PINIE T0PINIE LVD_WAKEUP BRTCLKO T1
             -VLKO  T0CLKO
  83      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
  84      =1  
  85      =1  #define PCAWAKEUP   0x80        //ÔÊÐíPCAµÄÉÏÉýÑØ/ÏÂ½µÑØÖÐ¶Ï»½ÐÑµôµçMCU
  86      =1  #define RXD_PIN_IE  0x40        //ÔÊÐíRXD(P3.0)ÏÂ½µÑØÖÃÎ»RIÖÐ¶ÏÊ±»½ÐÑµôµçMCU(±ØÐë´ò¿ªÏàÓ¦ÖÐ¶Ï)
  87      =1  #define T1_PIN_IE   0x20        //ÔÊÐíT1(P3.5)ÏÂ½µÑØÖÃÎ»T1ÖÐ¶ÏÊ±»½ÐÑµôµçMCU(±ØÐë´ò¿ªÏàÓ¦ÖÐ¶Ï)
  88      =1  #define T0_PIN_IE   0x10        //ÔÊÐíT0(P3.4)ÏÂ½µÑØÖÃÎ»T0ÖÐ¶ÏÊ±»½ÐÑµôµçMCU(±ØÐë´ò¿ªÏàÓ¦ÖÐ¶Ï)
  89      =1  #define LVD_WAKEUP  0x08        //ÔÊÐíLVD(P4.6)µÄµÍÑ¹¼ì²âÖÐ¶Ï»½ÐÑµôµçMCU(±ØÐë´ò¿ªÏàÓ¦ÖÐ¶Ï)
  90      =1  #define BRTCLKOEN   0x04        //´ò¿ªP1.0½ÅµÄBRTÊ±ÖÓÒç³öÂö³å,Êä³öµÄÊ±ÖÓÆµÂÊÎª1/2±¶µÄBRTÒç³öÂÊ
  91      =1  #define T1CLKOEN    0x02        //´ò¿ªP3.5½ÅµÄ¶¨Ê±Æ÷1Ê±ÖÓÒç³öÂö³å,Êä³öµÄÊ±ÖÓÆµÂÊÎª1/2±¶µÄT1Òç³öÂÊ
  92      =1  #define T0CLKOEN    0x01        //´ò¿ªP3.4½ÅµÄ¶¨Ê±Æ÷0Ê±ÖÓÒç³öÂö³å,Êä³öµÄÊ±ÖÓÆµÂÊÎª1/2±¶µÄT0Òç³öÂÊ
  93      =1  
  94      =1  /////////////////////////////////
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 3   

  95      =1  
  96      =1  sfr  CLK_DIV    =   0x97;       //Ê±ÖÓ·ÖÆµ¼Ä´æÆ÷        Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
  97      =1                                  //Î»ÃèÊö                -       -       -       -       -       CLKS2   CL
             -KS1   CLKS0
  98      =1                                  //³õÊ¼Öµ=xxxx,x000      x       x       x       x       x       0       0 
             -      0
  99      =1  
 100      =1  #define FOSCD1      0x00        //ÏµÍ³Ê±ÖÓÎªFosc
 101      =1  #define FOSCD2      0x01        //ÏµÍ³Ê±ÖÓÎªFosc/2
 102      =1  #define FOSCD4      0x02        //ÏµÍ³Ê±ÖÓÎªFosc/4
 103      =1  #define FOSCD8      0x03        //ÏµÍ³Ê±ÖÓÎªFosc/8
 104      =1  #define FOSCD16     0x04        //ÏµÍ³Ê±ÖÓÎªFosc/16
 105      =1  #define FOSCD32     0x05        //ÏµÍ³Ê±ÖÓÎªFosc/32
 106      =1  #define FOSCD64     0x06        //ÏµÍ³Ê±ÖÓÎªFosc/64
 107      =1  #define FOSCD128    0x07        //ÏµÍ³Ê±ÖÓÎªFosc/128
 108      =1  
 109      =1  /////////////////////////////////
 110      =1  
 111      =1  sfr  BUS_SPEED  =   0xa1;       //Êý¾Ý×ÜÏßËÙ¶È¿ØÖÆÆ÷    Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 112      =1                                  //Î»ÃèÊö                -       -       ALES1   ALES0   -       RWS2    RW
             -S1    RWS0
 113      =1                                  //³õÊ¼Öµ=xx10,x011      x       x       1       0       x       0       1 
             -      1
 114      =1  
 115      =1  #define ALES1       0x20        //P0µØÖ·½¨Á¢Ê±¼äºÍ±£³ÖÊ±¼äµ½ALEÐÅºÅµÄÏÂ½µÑØµÄÊ±ÖÓÊý
 116      =1  #define ALES0       0x10        //ALES1/ALES0=0/0:1¸öÊ±ÖÓ 0/1:2¸öÊ±ÖÓ 1/0:3¸öÊ±ÖÓ 1/1:4¸öÊ±ÖÓ
 117      =1  
 118      =1  #define RWS2        0x04        //MOVXÖ¸ÁîµÄÊ±ÖÓÊý
 119      =1  #define RWS1        0x02        //RWS2/RWS1/RWS0=000:1¸öÊ±ÖÓ 001:2¸öÊ±ÖÓ 010:3¸öÊ±ÖÓ 011:4¸öÊ±ÖÓ
 120      =1  #define RWS0        0x01        //               100:5¸öÊ±ÖÓ 101:6¸öÊ±ÖÓ 110:7¸öÊ±ÖÓ 111:8¸öÊ±ÖÓ
 121      =1  
 122      =1  /////////////////////////////////
 123      =1  
 124      =1  sfr  WDT_CONTR  =   0xc1;       //¿´ÃÅ¹·¶¨Ê±Æ÷¿ØÖÆÆ÷    Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 125      =1                                  //Î»ÃèÊö             WDT_FLAG   -       EN_WDT  CLR_WDT IDL_WDT PS2     PS
             -1     PS0
 126      =1                                  //³õÊ¼Öµ=0x00,0000      0       x       0       0       0       0       0 
             -      0
 127      =1  
 128      =1  #define WDT_FLAG    0x80        //¿´ÃÅ¹·¸´Î»±êÖ¾,µ±¿´ÃÅ¹·Òç³ö²úÉú¸´Î»ºó,Ó²¼þ×Ô¶¯ÖÃ1,ÐèÒªÓÉÈí¼þÇå0
 129      =1  #define EN_WDT      0x20        //Èí¼þÊ¹ÄÜ¿´ÃÅ¹·,´ò¿ªºó²»ÄÜÓÃÈí¼þµÄ·½Ê½¹Ø±Õ
 130      =1  #define CLR_WDT     0x10        //Çå¿´ÃÅ¹·¶¨Ê±Æ÷
 131      =1  #define IDLE_WDT    0x08        //IDLEÄ£Ê½ÏÂ,¿´ÃÅ¹·¶¨Ê±Æ÷ÊÇ·ñ¼ÌÐø¼ÆÊ±
 132      =1  
 133      =1  //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -//////
 134      =1  
 135      =1  sfr  AUXR       =   0x8e;       //¸¨Öú¼Ä´æÆ÷            Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 136      =1                                  //Î»ÃèÊö                T0x12   T1x12   UM0x6   BRTR    S2SMOD  BRTx12  EX
             -TRAM  S1BRS
 137      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 138      =1  
 139      =1  #define T0x12       0x80        //¶¨Ê±Æ÷0Ê±ÖÓ¿ØÖÆ,0:Fosc/12(´«Í³µÄ12·ÖÆµ) 1:Fosc/1(1TÄ£Ê½,²»·ÖÆµ,¼´12±¶ÓÚ´
             -«Í³ËÙ¶È)
 140      =1  #define T1x12       0x40        //¶¨Ê±Æ÷1Ê±ÖÓ¿ØÖÆ,0:Fosc/12(´«Í³µÄ12·ÖÆµ) 1:Fosc/1(1TÄ£Ê½,²»·ÖÆµ,¼´12±¶ÓÚ´
             -«Í³ËÙ¶È)
 141      =1  #define UR0x6       0x20        //´®¿ÚÄ£Ê½0µÄÊ±ÖÓ¿ØÖÆ,0:Fosc/12(´«Í³µÄ12·ÖÆµ) 1:Fosc/2(2·ÖÆµ,,¼´6±¶ÓÚ´«Í³Ë
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 4   

             -Ù¶È)
 142      =1  #define BRTR        0x10        //¶ÀÁ¢²¨ÌØÂÊ·¢ÉúÆ÷Æô¶¯¿ØÖÆÎ»,1:Æô¶¯¶ÀÁ¢²¨ÌØÂÊ·¢ÉúÆ÷ 0:Í£Ö¹¶ÀÁ¢²¨ÌØÂÊ·¢ÉúÆ÷
 143      =1  #define S2SMOD      0x08        //´®¿Ú2²¨ÌØÂÊ±¶ËÙÎ»,ÖÃ1¿ÉÊ¹´®¿Ú2µÄ²¨ÌØÂÊ¿ì1±¶
 144      =1  #define BRTx12      0x04        //¶ÀÁ¢²¨ÌØÂÊ·¢ÉúÆ÷Ê±ÖÓ¿ØÖÆ,0:Fosc/12(´«Í³µÄ12·ÖÆµ) 1:Fosc/1(1TÄ£Ê½,²»·ÖÆµ,
             -¼´12±¶ÓÚ´«Í³ËÙ¶È)
 145      =1  #define EXTRAM      0x02        //ÄÚ²¿À©Õ¹RAM½ûÄÜÎ»,0:ÄÚ²¿À©Õ¹RAMÓÐÐ§ 1:½ûÓÃÄÚ²¿À©Õ¹RAM
 146      =1  #define S1BRS       0x01        //´®¿Ú1µÄ²¨ÌØÂÊ·¢ÉúÆ÷Ñ¡ÔñÎ»,0:¶¨Ê±Æ÷1 1:¶ÀÁ¢²¨ÌØÂÊ·¢ÉúÆ÷(×¢Òâ´®¿Ú2Ö»ÄÜ¹»Ê¹
             -ÓÃ¶ÀÁ¢²¨ÌØÂÊ·¢ÉúÆ÷)
 147      =1  
 148      =1  /////////////////////////////////
 149      =1  
 150      =1  sfr  AUXR1      =   0xa2;       //¸¨Öú¼Ä´æÆ÷1           Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 151      =1                                  //Î»ÃèÊö                -       PCA_P4  SPI_P4  S2_P4   GF2     ADRJ    - 
             -      DPS
 152      =1                                  //³õÊ¼Öµ=x000,00x0      x       0       0       0       0       0       x 
             -      0
 153      =1  
 154      =1  #define PCA_P4      0x40        //½«PCA¿ÚÓ³Éäµ½P4¿Ú,0:ECI(P1.2)CEX0(P1.3)CEX1(P1.4) 1:ECI(P4.1)CEX0(P4.2)C
             -EX1(P4.3)
 155      =1  #define SPI_P4      0x20        //½«SPI¿ÚÓ³Éäµ½P4¿Ú,0:SCLK(P1.7)MISO(P1.6)MOSI(P1.5)SS(P1.4) 1:SCLK(P4.3)M
             -ISO(P4.2)MOSI(P4.1)SS(P4.0)
 156      =1  #define S2_P4       0x10        //½«´®¿Ú2Ó³Éäµ½P4¿Ú,0:RXD2(P1.2)TXD2(P1.3) 1:RXD2(P4.2)TXD2(P4.3)
 157      =1  #define GF2         0x08        //Í¨ÓÃ±êÖ¾Î»2
 158      =1  #define ADRJ        0x04        //ADC½á¹ûµ÷Õû,0:{ADC_RES[9876,5432],ADC_RESL[----,--10]} 1:{ADC_RES[----,-
             --98],ADC_RESL[7654,3210]}
 159      =1  #define DPS         0x01        //DPTR0/DPTR1Ñ¡ÔñÎ»,0:DPTR0 1:DPTR1
 160      =1  
 161      =1  //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -//////
 162      =1  
 163      =1  sfr  P0         =   0x80;       //I/O¶Ë¿Ú0              Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 164      =1                                  //Î»ÃèÊö                P0.7    P0.6    P0.5    P0.4    P0.3    P0.2    P0
             -.1    P0.0
 165      =1                                  //³õÊ¼Öµ=1111,1111      1       1       1       1       1       1       1 
             -      1
 166      =1  
 167      =1  sbit P07        =   P0^7;       //I/O¿ÚP0.7
 168      =1  sbit P06        =   P0^6;       //I/O¿ÚP0.6
 169      =1  sbit P05        =   P0^5;       //I/O¿ÚP0.5
 170      =1  sbit P04        =   P0^4;       //I/O¿ÚP0.4
 171      =1  sbit P03        =   P0^3;       //I/O¿ÚP0.3
 172      =1  sbit P02        =   P0^2;       //I/O¿ÚP0.2
 173      =1  sbit P01        =   P0^1;       //I/O¿ÚP0.1
 174      =1  sbit P00        =   P0^0;       //I/O¿ÚP0.0
 175      =1  
 176      =1  /////////////////////////////////
 177      =1  
 178      =1  sfr  P1         =   0x90;       //I/O¶Ë¿Ú0              Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 179      =1                                  //Î»ÃèÊö                P1.7    P1.6    P1.5    P1.4    P1.3    P1.2    P1
             -.1    P1.0
 180      =1                                  //³õÊ¼Öµ=1111,1111      1       1       1       1       1       1       1 
             -      1
 181      =1  
 182      =1  sbit P17        =   P1^7;       //I/O¿ÚP1.7
 183      =1  sbit P16        =   P1^6;       //I/O¿ÚP1.6
 184      =1  sbit P15        =   P1^5;       //I/O¿ÚP1.5
 185      =1  sbit P14        =   P1^4;       //I/O¿ÚP1.4
 186      =1  sbit P13        =   P1^3;       //I/O¿ÚP1.3
 187      =1  sbit P12        =   P1^2;       //I/O¿ÚP1.2
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 5   

 188      =1  sbit P11        =   P1^1;       //I/O¿ÚP1.1
 189      =1  sbit P10        =   P1^0;       //I/O¿ÚP1.0
 190      =1  
 191      =1  sbit ADCIN7     =   P1^7;       //ADCÍ¨µÀ7µÄÄ£ÄâÐÅºÅÊäÈë½Å
 192      =1  sbit ADCIN6     =   P1^6;       //ADCÍ¨µÀ6µÄÄ£ÄâÐÅºÅÊäÈë½Å
 193      =1  sbit ADCIN5     =   P1^5;       //ADCÍ¨µÀ5µÄÄ£ÄâÐÅºÅÊäÈë½Å
 194      =1  sbit ADCIN4     =   P1^4;       //ADCÍ¨µÀ4µÄÄ£ÄâÐÅºÅÊäÈë½Å
 195      =1  sbit ADCIN3     =   P1^3;       //ADCÍ¨µÀ3µÄÄ£ÄâÐÅºÅÊäÈë½Å
 196      =1  sbit ADCIN2     =   P1^2;       //ADCÍ¨µÀ2µÄÄ£ÄâÐÅºÅÊäÈë½Å
 197      =1  sbit ADCIN1     =   P1^1;       //ADCÍ¨µÀ1µÄÄ£ÄâÐÅºÅÊäÈë½Å
 198      =1  sbit ADCIN0     =   P1^0;       //ADCÍ¨µÀ0µÄÄ£ÄâÐÅºÅÊäÈë½Å
 199      =1  
 200      =1  sbit SPISCLK    =   P1^7;       //SPI×ÜÏßµÄÊ±ÖÓ½Å
 201      =1  sbit SPIMISO    =   P1^6;       //SPI×ÜÏßµÄÖ÷³ö´ÓÈë½Å
 202      =1  sbit SPIMOSI    =   P1^5;       //SPI×ÜÏßµÄÖ÷Èë´Ó³ö½Å
 203      =1  sbit SPISS      =   P1^4;       //SPI×ÜÏßµÄ´Ó»úÑ¡Ôñ½Å
 204      =1  
 205      =1  sbit CEX1       =   P1^4;       //±È½Ï/²¶»ñ/PWM1Íâ²¿Òý½Å
 206      =1  sbit CEX0       =   P1^3;       //±È½Ï/²¶»ñ/PWM0Íâ²¿Òý½Å
 207      =1  sbit ECI        =   P1^2;       //±È½Ï/²¶»ñ/PWMÄ£¿éµÄÍâ²¿Ê±ÖÓÊäÈë½Å(×î´óÖµÎªFosc/2)
 208      =1  
 209      =1  sbit TXD2       =   P1^3;       //´®¿Ú2Êý¾ÝÊä³ö½Å
 210      =1  sbit RXD2       =   P1^2;       //´®¿Ú2Êý¾ÝÊäÈë½Å
 211      =1  
 212      =1  sbit BRTCLKO    =   P1^0;       //BRTÊ±ÖÓÒç³öÂö³åÊä³ö½Å
 213      =1  
 214      =1  /////////////////////////////////
 215      =1  
 216      =1  sfr  P2         =   0xa0;       //I/O¶Ë¿Ú2              Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 217      =1                                  //Î»ÃèÊö                P2.7    P2.6    P2.5    P2.4    P2.3    P2.2    P2
             -.1    P2.0
 218      =1                                  //³õÊ¼Öµ=1111,1111      1       1       1       1       1       1       1 
             -      1
 219      =1  
 220      =1  sbit P27        =   P2^7;       //I/O¿ÚP2.7
 221      =1  sbit P26        =   P2^6;       //I/O¿ÚP2.6
 222      =1  sbit P25        =   P2^5;       //I/O¿ÚP2.5
 223      =1  sbit P24        =   P2^4;       //I/O¿ÚP2.4
 224      =1  sbit P23        =   P2^3;       //I/O¿ÚP2.3
 225      =1  sbit P22        =   P2^2;       //I/O¿ÚP2.2
 226      =1  sbit P21        =   P2^1;       //I/O¿ÚP2.1
 227      =1  sbit P20        =   P2^0;       //I/O¿ÚP2.0
 228      =1  
 229      =1  /////////////////////////////////
 230      =1  
 231      =1  sfr  P3         =   0xb0;       //I/O¶Ë¿Ú3              Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 232      =1                                  //Î»ÃèÊö                P3.7    P3.6    P3.5    P3.4    P3.3    P3.2    P3
             -.1    P3.0
 233      =1                                  //³õÊ¼Öµ=1111,1111      1       1       1       1       1       1       1 
             -      1
 234      =1  
 235      =1  sbit P37        =   P3^7;       //I/O¿ÚP3.7
 236      =1  sbit P36        =   P3^6;       //I/O¿ÚP3.6
 237      =1  sbit P35        =   P3^5;       //I/O¿ÚP3.5
 238      =1  sbit P34        =   P3^4;       //I/O¿ÚP3.4
 239      =1  sbit P33        =   P3^3;       //I/O¿ÚP3.3
 240      =1  sbit P32        =   P3^2;       //I/O¿ÚP3.2
 241      =1  sbit P31        =   P3^1;       //I/O¿ÚP3.1
 242      =1  sbit P30        =   P3^0;       //I/O¿ÚP3.0
 243      =1  
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 6   

 244      =1  sbit RXD        =   P3^0;       //´®¿Ú1µÄÊý¾Ý½ÓÊÕ¿Ú
 245      =1  sbit TXD        =   P3^1;       //´®¿Ú1µÄÊý¾Ý·¢ËÍ¿Ú
 246      =1  sbit INT0       =   P3^2;       //Íâ²¿ÖÐ¶Ï0µÄÐÅºÅÊäÈë¿Ú
 247      =1  sbit INT1       =   P3^3;       //Íâ²¿ÖÐ¶Ï1µÄÐÅºÅÊä³ö¿Ú
 248      =1  sbit T0         =   P3^4;       //¶¨Ê±Æ÷0µÄÍâ²¿ÐÅºÅÊäÈë¿Ú
 249      =1  sbit T1         =   P3^5;       //¶¨Ê±Æ÷1µÄÍâ²¿ÐÅºÅÊäÈë¿Ú
 250      =1  sbit WR         =   P3^6;       //Íâ²¿Êý¾Ý´æ´¢Æ÷µÄÐ´ÐÅºÅ
 251      =1  sbit RD         =   P3^7;       //Íâ²¿Êý¾Ý´æ´¢Æ÷µÄ¶ÁÐÅºÅ
 252      =1  
 253      =1  sbit T0CLKO     =   P3^4;       //¶¨Ê±Æ÷0µÄÊ±ÖÓÒç³öÂö³åÊä³ö½Å
 254      =1  sbit T1CLKO     =   P3^5;       //¶¨Ê±Æ÷1µÄÊ±ÖÓÒç³öÂö³åÊä³ö½Å
 255      =1  
 256      =1  /////////////////////////////////
 257      =1  
 258      =1  sfr  P4         =   0xc0;       //I/O¶Ë¿Ú4              Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 259      =1                                  //Î»ÃèÊö                P4.7    P4.6    P4.5    P4.4    P4.3    P4.2    P4
             -.1    P4.0
 260      =1                                  //³õÊ¼Öµ=1111,1111      1       1       1       1       1       1       1 
             -      1
 261      =1  
 262      =1  sbit P47        =   P4^7;       //I/O¿ÚP4.7
 263      =1  sbit P46        =   P4^6;       //I/O¿ÚP4.6
 264      =1  sbit P45        =   P4^5;       //I/O¿ÚP4.5
 265      =1  sbit P44        =   P4^4;       //I/O¿ÚP4.4
 266      =1  sbit P43        =   P4^3;       //I/O¿ÚP4.3
 267      =1  sbit P42        =   P4^2;       //I/O¿ÚP4.2
 268      =1  sbit P41        =   P4^1;       //I/O¿ÚP4.1
 269      =1  sbit P40        =   P4^0;       //I/O¿ÚP4.0
 270      =1  
 271      =1  sbit RST        =   P4^7;       //¸´Î»½Å,¿ÉÍ¨¹ý±à³ÌÆ÷ÉèÖÃ
 272      =1  sbit EX_LVD     =   P4^6;       //Íâ²¿µÍÑ¹¼ì²âÒý½Å
 273      =1  
 274      =1  sbit P4SPISCLK  =   P4^3;       //SPI×ÜÏßµÄÊ±ÖÓ½Å
 275      =1  sbit P4SPIMISO  =   P4^2;       //SPI×ÜÏßµÄÖ÷³ö´ÓÈë½Å
 276      =1  sbit P4SPIMOSI  =   P4^1;       //SPI×ÜÏßµÄÖ÷Èë´Ó³ö½Å
 277      =1  sbit P4SPISS    =   P4^0;       //SPI×ÜÏßµÄ´Ó»úÑ¡Ôñ½Å
 278      =1  
 279      =1  sbit P4CEX1     =   P4^3;       //±È½Ï/²¶»ñ/PWM1Íâ²¿Òý½Å
 280      =1  sbit P4CEX0     =   P4^2;       //±È½Ï/²¶»ñ/PWM0Íâ²¿Òý½Å
 281      =1  sbit P4ECI      =   P4^1;       //±È½Ï/²¶»ñ/PWMÄ£¿éµÄÍâ²¿Ê±ÖÓÊäÈë½Å(×î´óÖµÎªFosc/2)
 282      =1  
 283      =1  sbit P4TXD2     =   P4^3;       //´®¿Ú2Êý¾ÝÊä³ö½Å
 284      =1  sbit P4RXD2     =   P4^2;       //´®¿Ú2Êý¾ÝÊäÈë½Å
 285      =1  
 286      =1  /////////////////////////////////
 287      =1  
 288      =1  sfr  P5         =   0xc8;       //I/O¶Ë¿Ú5              Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 289      =1                                  //Î»ÃèÊö                -       -       -       -       P5.3    P5.2    P5
             -.1    P5.0
 290      =1                                  //³õÊ¼Öµ=xxxx,1111      x       x       x       x       1       1       1 
             -      1
 291      =1  
 292      =1  sbit P53        =   P5^3;       //I/O¿ÚP5.3
 293      =1  sbit P52        =   P5^2;       //I/O¿ÚP5.2
 294      =1  sbit P51        =   P5^1;       //I/O¿ÚP5.1
 295      =1  sbit P50        =   P5^0;       //I/O¿ÚP5.0
 296      =1  
 297      =1  /////////////////////////////////
 298      =1  
 299      =1  sfr  P1M1       =   0x91;       //I/O¿Ú1Ä£Ê½¿ØÖÆÆ÷1     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 7   

             -t1    Bit0
 300      =1                                  //³õ/Ê¼Öµ=0000,0000     0       0       0       0       0       0       0 
             -      0
 301      =1  
 302      =1  /////////////////////////////////
 303      =1  
 304      =1  sfr  P1M0       =   0x92;       //I/O¿Ú1Ä£Ê½¿ØÖÆÆ÷0     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 305      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 306      =1  
 307      =1  /////////////////////////////////
 308      =1  
 309      =1  sfr  P0M1       =   0x93;       //I/O¿Ú0Ä£Ê½¿ØÖÆÆ÷1     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 310      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 311      =1  
 312      =1  /////////////////////////////////
 313      =1  
 314      =1  sfr  P0M0       =   0x94;       //I/O¿Ú0Ä£Ê½¿ØÖÆÆ÷0     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 315      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 316      =1  
 317      =1  /////////////////////////////////
 318      =1  
 319      =1  sfr  P2M1       =   0x95;       //I/O¿Ú2Ä£Ê½¿ØÖÆÆ÷1     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 320      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 321      =1  
 322      =1  /////////////////////////////////
 323      =1  
 324      =1  sfr  P2M0       =   0x96;       //I/O¿Ú2Ä£Ê½¿ØÖÆÆ÷0     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 325      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 326      =1  
 327      =1  /////////////////////////////////
 328      =1  
 329      =1  sfr  P3M1       =   0xb1;       //I/O¿Ú3Ä£Ê½¿ØÖÆÆ÷1     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 330      =1                                  //³õ/Ê¼Öµ=0000,0000     0       0       0       0       0       0       0 
             -      0
 331      =1  
 332      =1  /////////////////////////////////
 333      =1  
 334      =1  sfr  P3M0       =   0xb2;       //I/O¿Ú3Ä£Ê½¿ØÖÆÆ÷0     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 335      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 336      =1  
 337      =1  /////////////////////////////////
 338      =1  
 339      =1  sfr  P4M1       =   0xb3;       //I/O¿Ú4Ä£Ê½¿ØÖÆÆ÷1     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 340      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 341      =1  
 342      =1  /////////////////////////////////
 343      =1  
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 8   

 344      =1  sfr  P4M0       =   0xb4;       //I/O¿Ú4Ä£Ê½¿ØÖÆÆ÷0     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 345      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 346      =1  
 347      =1  /////////////////////////////////
 348      =1  
 349      =1  sfr  P5M1       =   0xc9;       //I/O¿Ú5Ä£Ê½¿ØÖÆÆ÷1     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 350      =1                                  //³õÊ¼Öµ=xxxx,0000      x       x       x       x       0       0       0 
             -      0
 351      =1  
 352      =1  /////////////////////////////////
 353      =1  
 354      =1  sfr  P5M0       =   0xca;       //I/O¿Ú5Ä£Ê½¿ØÖÆÆ÷0     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 355      =1                                  //³õÊ¼Öµ=xxxx,0000      x       x       x       x       0       0       0 
             -      0
 356      =1  
 357      =1  /////////////////////////////////
 358      =1  
 359      =1  // PxM1 PxM0
 360      =1  //  0    0     ×¼Ë«Ïò¿Ú
 361      =1  //  0    1     Ç¿ÍÆÍìÊä³ö
 362      =1  //  1    0     ¸ß×èÊäÈëÌ¬
 363      =1  //  1    1     ¿ªÂ©Êä³ö
 364      =1  
 365      =1  /////////////////////////////////
 366      =1  
 367      =1  sfr  P1ASF      =   0x9d;       //P1¿ÚÄ£Äâ¹¦ÄÜ¿ØÖÆÎ»    Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 368      =1                                  //Î»ÃèÊö                P17ASF  P16ASF  P15ASF  P14ASF  P13ASF  P12ASF  P1
             -1ASF  P10ASF
 369      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 370      =1  
 371      =1  #define P17ASF      0x80        //P1.7¿ÚÎªADCÊäÈë½Å
 372      =1  #define P16ASF      0x40        //P1.7¿ÚÎªADCÊäÈë½Å
 373      =1  #define P15ASF      0x20        //P1.7¿ÚÎªADCÊäÈë½Å
 374      =1  #define P14ASF      0x10        //P1.7¿ÚÎªADCÊäÈë½Å
 375      =1  #define P13ASF      0x08        //P1.7¿ÚÎªADCÊäÈë½Å
 376      =1  #define P12ASF      0x04        //P1.7¿ÚÎªADCÊäÈë½Å
 377      =1  #define P11ASF      0x02        //P1.7¿ÚÎªADCÊäÈë½Å
 378      =1  #define P10ASF      0x01        //P1.7¿ÚÎªADCÊäÈë½Å
 379      =1  
 380      =1  /////////////////////////////////
 381      =1  
 382      =1  sfr  P4SW       =   0xbb;       //P4¿ÚµÄ¹¦ÄÜ¿ª¹Ø        Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 383      =1                                  //Î»ÃèÊö                -    LVD_P4.6 ALE_P4.5 NA_P4.4  -       -       - 
             -      -
 384      =1                                  //³õÊ¼Öµ=x000,xxxx      x       0       0       0       x       x       x 
             -      x
 385      =1  
 386      =1  #define P46EN       0x40        //´«Í³µÄEA½Å 0:ÎªLVDµÄÐÅºÅÒýÈë½Å 1:ÎªP4.6
 387      =1  #define P45EN       0x20        //´«Í³µÄALE½Å 0:ÈÔÎªALE 1:ÎªP4.5
 388      =1  #define P44EN       0x10        //´«Í³µÄPSEN½Å 0:ÎÞÈÎºÎ¹¦ÄÜ 1:ÎªP4.4
 389      =1  
 390      =1  //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -//////
 391      =1  
 392      =1  sfr  IE         =   0xa8;       //ÖÐ¶ÏÊ¹ÄÜ¼Ä´æÆ÷        Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 9   

             -t1    Bit0
 393      =1                                  //Î»ÃèÊö                EA      ELVD    EADC    ES      ET1     EX1     ET
             -0     EX0
 394      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 395      =1  
 396      =1  sbit EA         =   IE^7;       //×ÜÖÐ¶Ï¿ª¹Ø
 397      =1  sbit ELVD       =   IE^6;       //LVDÖÐ¶ÏÊ¹ÄÜÎ»
 398      =1  sbit EADC       =   IE^5;       //ADCÖÐ¶ÏÊ¹ÄÜÎ»
 399      =1  sbit ES         =   IE^4;       //´®¿ÚÖÐ¶ÏÊ¹ÄÜÎ»
 400      =1  sbit ET1        =   IE^3;       //¶¨Ê±Æ÷1ÖÐ¶ÏÊ¹ÄÜÎ»
 401      =1  sbit EX1        =   IE^2;       //Íâ²¿ÖÐ¶Ï1ÖÐ¶ÏÊ¹ÄÜÎ»
 402      =1  sbit ET0        =   IE^1;       //¶¨Ê±Æ÷0ÖÐ¶ÏÊ¹ÄÜÎ»
 403      =1  sbit EX0        =   IE^0;       //Íâ²¿ÖÐ¶Ï0ÖÐ¶ÏÊ¹ÄÜÎ»
 404      =1  
 405      =1  /////////////////////////////////
 406      =1  
 407      =1  sfr  IE2        =   0xaf;       //ÖÐ¶ÏÊ¹ÄÜ¼Ä´æÆ÷2       Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 408      =1                                  //Î»ÃèÊö                -       -       -       -       -       -       ES
             -PI    ES2
 409      =1                                  //³õÊ¼Öµ=xxxx,xx00      x       x       x       x       x       x       0 
             -      0
 410      =1  
 411      =1  #define ESPI        0x02        //SPIÖÐ¶ÏÊ¹ÄÜÎ»
 412      =1  #define ES2         0x01        //´®¿Ú2ÖÐ¶ÏÊ¹ÄÜÎ»
 413      =1  
 414      =1  /////////////////////////////////
 415      =1  
 416      =1  #define X0_INTNO    0           //Íâ²¿ÖÐ¶Ï0ÖÐ¶ÏºÅ,Èë¿ÚµØÖ·Îª0003H
 417      =1  #define T0_INTNO    1           //¶¨Ê±Æ÷0ÖÐ¶ÏºÅ,Èë¿ÚµØÖ·Îª000BH
 418      =1  #define X1_INTNO    2           //Íâ²¿ÖÐ¶Ï1ÖÐ¶ÏºÅ,Èë¿ÚµØÖ·Îª0013H
 419      =1  #define T1_INTNO    3           //¶¨Ê±Æ÷1ÖÐ¶ÏºÅ,Èë¿ÚµØÖ·Îª001BH
 420      =1  #define UART_INTNO  4           //´®¿ÚÖÐ¶ÏºÅ,Èë¿ÚµØÖ·Îª0023H
 421      =1  #define ADC_INTNO   5           //ADCÖÐ¶ÏºÅ,Èë¿ÚµØÖ·Îª002BH
 422      =1  #define LVD_INTNO   6           //LVDÖÐ¶ÏºÅ,Èë¿ÚµØÖ·Îª0033H
 423      =1  #define UART2_INTNO 8           //´®¿Ú2ÖÐ¶ÏºÅ,Èë¿ÚµØÖ·Îª0043H
 424      =1  #define SPI_INTNO   9           //SPIÖÐ¶ÏºÅ,Èë¿ÚµØÖ·Îª004BH
 425      =1  
 426      =1  /////////////////////////////////
 427      =1  
 428      =1  sfr  IP2        =   0xb5;       //ÖÐ¶ÏÓÅÏÈ¼¶¼Ä´æÆ÷2     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 429      =1                                  //Î»ÃèÊö                -       -       -       -       -       -       PS
             -PI    PS2
 430      =1                                  //³õÊ¼Öµ=xxxx,xx00      x       x       x       x       x       x       0 
             -      0
 431      =1  
 432      =1  #define PSPI        0x02        //SPIÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆµÍÎ»
 433      =1  #define PS2         0x01        //´®¿Ú2ÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆµÍÎ»
 434      =1  
 435      =1  /////////////////////////////////
 436      =1  
 437      =1  sfr  IP2H       =   0xb6;       //ÖÐ¶ÏÓÅÏÈ¼¶¼Ä´æÆ÷2¸ßÎ» Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 438      =1                                  //Î»ÃèÊö                -       -       -       -       -       -       PS
             -PIH   PS2H
 439      =1                                  //³õÊ¼Öµ=xxxx,xx00      x       x       x       x       x       x       0 
             -      0
 440      =1  
 441      =1  #define PSPIH       0x02        //SPIÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆ¸ßÎ»
 442      =1  #define PS2H        0x01        //´®¿Ú2ÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆ¸ßÎ»
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 10  

 443      =1  
 444      =1  /////////////////////////////////
 445      =1  
 446      =1  sfr  IPH        =   0xb7;       //ÖÐ¶ÏÓÅÏÈ¼¶¼Ä´æÆ÷¸ßÎ»  Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 447      =1                                  //Î»ÃèÊö                PPCAH   PLVDH   PADCH   PSH     PT1H    PX1H    PT
             -0H    PX0H
 448      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 449      =1  
 450      =1  #define PPCAH       0x80        //PCAÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆ¸ßÎ»
 451      =1  #define PLVDH       0x40        //LVDÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆ¸ßÎ»
 452      =1  #define PADCH       0x20        //ADCÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆ¸ßÎ»
 453      =1  #define PSH         0x10        //´®¿ÚÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆ¸ßÎ»
 454      =1  #define PT1H        0x08        //¶¨Ê±Æ÷1ÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆ¸ßÎ»
 455      =1  #define PX1H        0x04        //Íâ²¿ÖÐ¶Ï1ÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆ¸ßÎ»
 456      =1  #define PT0H        0x02        //¶¨Ê±Æ÷0ÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆ¸ßÎ»
 457      =1  #define PX0H        0x01        //Íâ²¿ÖÐ¶Ï0ÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆ¸ßÎ»
 458      =1  
 459      =1  /////////////////////////////////
 460      =1  
 461      =1  sfr  IP         =   0xb8;       //ÖÐ¶ÏÓÅÏÈ¼¶¼Ä´æÆ÷      Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 462      =1                                  //Î»ÃèÊö                PPCA    PLVD    PADC    PS      PT1     PX1     PT
             -0     PX0
 463      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 464      =1  
 465      =1  sbit PPCA       =   IP^7;       //PCAÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆµÍÎ»
 466      =1  sbit PLVD       =   IP^6;       //LVDÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆµÍÎ»
 467      =1  sbit PADC       =   IP^5;       //ADCÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆµÍÎ»
 468      =1  sbit PS         =   IP^4;       //´®¿ÚÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆµÍÎ»
 469      =1  sbit PT1        =   IP^3;       //¶¨Ê±Æ÷1ÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆµÍÎ»
 470      =1  sbit PX1        =   IP^2;       //Íâ²¿ÖÐ¶Ï1ÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆµÍÎ»
 471      =1  sbit PT0        =   IP^1;       //¶¨Ê±Æ÷0ÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆµÍÎ»
 472      =1  sbit PX0        =   IP^0;       //Íâ²¿ÖÐ¶Ï0ÖÐ¶ÏÓÅÏÈ¼¶¿ØÖÆµÍÎ»
 473      =1  
 474      =1  //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -//////
 475      =1  
 476      =1  sfr  TCON       =   0x88;       //¶¨Ê±Æ÷0/1¿ØÖÆ¼Ä´æÆ÷   Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 477      =1                                  //Î»ÃèÊö                TF1     TR1     TF0     TR0     IE1     IT1     IE
             -0     IT0
 478      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 479      =1  
 480      =1  sbit TF1        = TCON^7;       //¶¨Ê±Æ÷1Òç³ö±êÖ¾,ÓÉÓ²¼þÖÃ1,¿ÉÓÉÈí¼þÇå0»òÕßÔÚÖÐ¶Ï´¦Àí³ÌÐòÍê³ÉºóÓÉÓ²¼þ×Ô¶¯Ç
             -å0
 481      =1  sbit TR1        = TCON^6;       //¶¨Ê±Æ÷1µÄÆô¶¯¿ØÖÆÎ»,1:Æô¶¯¶¨Ê±Æ÷ 0:Í£Ö¹¶¨Ê±Æ÷
 482      =1  sbit TF0        = TCON^5;       //¶¨Ê±Æ÷0Òç³ö±êÖ¾,ÓÉÓ²¼þÖÃ1,¿ÉÓÉÈí¼þÇå0»òÕßÔÚÖÐ¶Ï´¦Àí³ÌÐòÍê³ÉºóÓÉÓ²¼þ×Ô¶¯Ç
             -å0
 483      =1  sbit TR0        = TCON^4;       //¶¨Ê±Æ÷0µÄÆô¶¯¿ØÖÆÎ»,1:Æô¶¯¶¨Ê±Æ÷ 0:Í£Ö¹¶¨Ê±Æ÷
 484      =1  sbit IE1        = TCON^3;       //Íâ²¿ÖÐ¶Ï1µÄÖÐ¶ÏÇëÇóÎ»,ÓÉÓ²¼þÖÃ1,¿ÉÓÉÈí¼þÇå0»òÕßÔÚÖÐ¶Ï´¦Àí³ÌÐòÍê³ÉºóÓÉÓ²¼
             -þ×Ô¶¯Çå0
 485      =1  sbit IT1        = TCON^2;       //Íâ²¿ÖÐ¶Ï1µÄ´¥·¢ÀàÐÍ,0:µÍµçÆ½´¥·¢Íâ²¿ÖÐ¶Ï 1:ÏÂ½µÑØ´¥·¢Íâ²¿ÖÐ¶Ï
 486      =1  sbit IE0        = TCON^1;       //Íâ²¿ÖÐ¶Ï0µÄÖÐ¶ÏÇëÇóÎ»,ÓÉÓ²¼þÖÃ1,¿ÉÓÉÈí¼þÇå0»òÕßÔÚÖÐ¶Ï´¦Àí³ÌÐòÍê³ÉºóÓÉÓ²¼
             -þ×Ô¶¯Çå0
 487      =1  sbit IT0        = TCON^0;       //Íâ²¿ÖÐ¶Ï0µÄ´¥·¢ÀàÐÍ,0:µÍµçÆ½´¥·¢Íâ²¿ÖÐ¶Ï 1:ÏÂ½µÑØ´¥·¢Íâ²¿ÖÐ¶Ï
 488      =1  
 489      =1  /////////////////////////////////
 490      =1  
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 11  

 491      =1  sfr  TMOD       =   0x89;       //¶¨Ê±Æ÷0/1Ä£Ê½¼Ä´æÆ÷   Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 492      =1                                  //Î»ÃèÊö                GATE    C/T#    M1      M0      GATE    C/T#    M1
             -      M0
 493      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 494      =1  
 495      =1  #define GATE1       0x80        //¶¨Ê±Æ÷1Æô¶¯¿ØÖÆÎ»,0:TR1Îª1Ê±Æô¶¯¶¨Ê±Æ÷1 1:TR1Îª1ÇÒINT1Îª¸ßµçÆ½Ê±²ÅÆô¶¯¶¨
             -Ê±Æ÷1
 496      =1  #define C_T1        0x40        //¶¨Ê±Æ÷/¼ÆÊýÆ÷Ñ¡ÔñÎ»,0:¶¨Ê±Æ÷(Ê±ÖÓÔ´ÎªÄÚ²¿Ê±ÖÓ) 1:¼ÆÊýÆ÷(Ê±ÖÓÔ´ÎªT1Òý½ÅµÄ
             -Íâ²¿Ê±ÖÓ)
 497      =1  #define T1_M0       0x00        //¶¨Ê±Æ÷1²Ù×÷Ä£Ê½0:13Î»¶¨Ê±Æ÷
 498      =1  #define T1_M1       0x10        //¶¨Ê±Æ÷1²Ù×÷Ä£Ê½1:16Î»¶¨Ê±Æ÷
 499      =1  #define T1_M2       0x20        //¶¨Ê±Æ÷1²Ù×÷Ä£Ê½2:8Î»×Ô¶¯ÖØÔØ¶¨Ê±Æ÷
 500      =1  #define T1_M3       0x30        //¶¨Ê±Æ÷1²Ù×÷Ä£Ê½3:¶¨Ê±Æ÷1Í£Ö¹
 501      =1  #define GATE0       0x08        //¶¨Ê±Æ÷1Æô¶¯¿ØÖÆÎ»,0:TR0Îª1Ê±Æô¶¯¶¨Ê±Æ÷1 1:TR0Îª1ÇÒINT0Îª¸ßµçÆ½Ê±²ÅÆô¶¯¶¨
             -Ê±Æ÷0
 502      =1  #define C_T0        0x04        //¶¨Ê±Æ÷/¼ÆÊýÆ÷Ñ¡ÔñÎ»,0:¶¨Ê±Æ÷(Ê±ÖÓÔ´ÎªÄÚ²¿Ê±ÖÓ) 1:¼ÆÊýÆ÷(Ê±ÖÓÔ´ÎªT0Òý½ÅµÄ
             -Íâ²¿Ê±ÖÓ)
 503      =1  #define T0_M0       0x00        //¶¨Ê±Æ÷0²Ù×÷Ä£Ê½0:13Î»¶¨Ê±Æ÷
 504      =1  #define T0_M1       0x01        //¶¨Ê±Æ÷0²Ù×÷Ä£Ê½1:16Î»¶¨Ê±Æ÷
 505      =1  #define T0_M2       0x02        //¶¨Ê±Æ÷0²Ù×÷Ä£Ê½2:8Î»×Ô¶¯ÖØÔØ¶¨Ê±Æ÷
 506      =1  #define T0_M3       0x03        //¶¨Ê±Æ÷0²Ù×÷Ä£Ê½3:TL0ºÍTH0ÎªÁ½×é¶ÀÁ¢8Î»¶¨Ê±Æ÷
 507      =1  
 508      =1  /////////////////////////////////
 509      =1  
 510      =1  sfr  TL0        = 0x8a;         //¶¨Ê±Æ÷0µÄµÍ8Î»¼ÆÊýÖµ  Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 511      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 512      =1  
 513      =1  /////////////////////////////////
 514      =1  
 515      =1  sfr  TL1        = 0x8b;         //¶¨Ê±Æ÷1µÄµÍ8Î»¼ÆÊýÖµ  Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 516      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 517      =1  
 518      =1  /////////////////////////////////
 519      =1  
 520      =1  sfr  TH0        = 0x8c;         //¶¨Ê±Æ÷0µÄ¸ß8Î»¼ÆÊýÖµ  Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 521      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 522      =1  
 523      =1  /////////////////////////////////
 524      =1  
 525      =1  sfr  TH1        = 0x8d;         //¶¨Ê±Æ÷1µÄ¸ß8Î»¼ÆÊýÖµ  Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 526      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 527      =1  
 528      =1  //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -//////
 529      =1  
 530      =1  sfr  SCON       =   0x98;       //´®¿Ú¿ØÖÆ¼Ä´æÆ÷        Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 531      =1                                  //Î»ÃèÊö                SM0/FE  SM1     SM2     REN     TB8     RB8     TI
             -      Ri
 532      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 533      =1  
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 12  

 534      =1  sbit FE         =   SCON^7;     //Ö¡´íÎó¼ì²âÎ»,µ±´®¿ÚÄ£¿éÔÚ½ÓÊÕÊý¾ÝÊ±Ã»ÓÐ¼ì²âµ½ÕýÈ·µÄÍ£Ö¹Î»Ê±,FE±»Ó²¼þÖÃ1,
             -ÐèÒªÓÉÈí¼þÀ´Çå0(µ±SMOD0Îª1Ê±,FEÓÐÐ§)
 535      =1  sbit SM0        =   SCON^7;     //´®¿ÚÄ£Ê½ÉèÖÃÎ»
 536      =1  sbit SM1        =   SCON^6;     //SM0/SM1=0/0:ÒÆÎ»¼Ä´æÆ÷ 0/1:8Î»¿É±ä²¨ÌØÂÊ 1/0:9Î»¹Ì¶¨²¨ÌØÂÊ 1/1:9Î»¿É±ä²¨
             -ÌØÂÊ
 537      =1  sbit SM2        =   SCON^5;     //×Ô¶¯µØÖ·Ê¶±ðÊ¹ÄÜÎ»
 538      =1  sbit REN        =   SCON^4;     //Ê¹ÄÜ´®¿Ú½ÓÊÕÄ£¿é
 539      =1  sbit TB8        =   SCON^3;     //·¢ËÍµÄµÚ9Î»Êý¾Ý
 540      =1  sbit RB8        =   SCON^2;     //½ÓÊÕµÄµÚ9Î»Êý¾Ý
 541      =1  sbit TI         =   SCON^1;     //·¢ËÍÍê³ÉÖÐ¶Ï±êÖ¾
 542      =1  sbit RI         =   SCON^0;     //½ÓÊÕÍê³ÉÖÐ¶Ï±êÖ¾
 543      =1  
 544      =1  /////////////////////////////////
 545      =1  
 546      =1  sfr  SBUF       =   0x99;       //´®¿Ú½ÓÊÕ/·¢ËÍÊý¾Ý     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 547      =1                                  //³õÊ¼Öµ=xxxx,xxxx      x       x       x       x       x       x       x 
             -      x
 548      =1  
 549      =1  /////////////////////////////////
 550      =1  
 551      =1  sfr  S2CON      =   0x9a;       //´®¿Ú2¿ØÖÆ¼Ä´æÆ÷       Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 552      =1                                  //Î»ÃèÊö                SM0/FE  SM1     SM2     REN     TB8     RB8     TI
             -      Ri
 553      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 554      =1  
 555      =1  #define S2SM0       0x80        //´®¿Ú2Ä£Ê½ÉèÖÃÎ»
 556      =1  #define S2SM1       0x40        //SM0/SM1=0/0:ÒÆÎ»¼Ä´æÆ÷ 0/1:8Î»¿É±ä²¨ÌØÂÊ 1/0:9Î»¹Ì¶¨²¨ÌØÂÊ 1/1:9Î»¿É±ä²¨
             -ÌØÂÊ
 557      =1  #define S2SM2       0x20        //×Ô¶¯µØÖ·Ê¶±ðÊ¹ÄÜÎ»
 558      =1  #define S2REN       0x10        //Ê¹ÄÜ´®¿Ú2½ÓÊÕÄ£¿é
 559      =1  #define S2TB8       0x08        //·¢ËÍµÄµÚ9Î»Êý¾Ý
 560      =1  #define S2RB8       0x04        //½ÓÊÕµÄµÚ9Î»Êý¾Ý
 561      =1  #define S2TI        0x02        //·¢ËÍÍê³ÉÖÐ¶Ï±êÖ¾
 562      =1  #define S2RI        0x01        //½ÓÊÕÍê³ÉÖÐ¶Ï±êÖ¾
 563      =1  
 564      =1  /////////////////////////////////
 565      =1  
 566      =1  sfr  S2BUF      =   0x9b;       //´®¿Ú2½ÓÊÕ/·¢ËÍÊý¾Ý    Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 567      =1                                  //³õÊ¼Öµ=xxxx,xxxx      x       x       x       x       x       x       x 
             -      x
 568      =1  
 569      =1  /////////////////////////////////
 570      =1  
 571      =1  sfr  SADDR      =   0xa9;       //´®¿ÚÉè±¸´ÓµØÖ·¼Ä´æÆ÷  Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 572      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 573      =1  
 574      =1  /////////////////////////////////
 575      =1  
 576      =1  sfr  SADEN      =   0xb9;       //´®¿ÚÉè±¸´ÓµØÖ·ÆÁ±ÎÎ»  Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 577      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 578      =1  
 579      =1  /////////////////////////////////
 580      =1  
 581      =1  sfr  BRT        =   0x9c;       //¶ÀÁ¢²¨ÌØÂÊ·¢ÉúÆ÷ÖØÔØÖµBit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 13  

             -t1    Bit0
 582      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 583      =1  
 584      =1  //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -//////
 585      =1  
 586      =1  sfr  ADC_CONTR  =   0xbc;       //ADC¿ØÖÆ¼Ä´æÆ÷         Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 587      =1                                  //Î»ÃèÊö            ADC_POWER  SPEED1 SPEED0 ADC_FLAG ADC_START CHS2    CH
             -S1    CHS0
 588      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 589      =1  
 590      =1  #define ADC_POWER   0x80        //ADCÄ£¿éµçÔ´¿ØÖÆÎ»
 591      =1  #define ADC_SPEEDLL 0x00        //Ã¿´Î×ª»»ÐèÒª420¸öÊ±ÖÓÖÜÆÚ
 592      =1  #define ADC_SPEEDL  0x20        //Ã¿´Î×ª»»ÐèÒª280¸öÊ±ÖÓÖÜÆÚ
 593      =1  #define ADC_SPEEDH  0x40        //Ã¿´Î×ª»»ÐèÒª140¸öÊ±ÖÓÖÜÆÚ
 594      =1  #define ADC_SPEEDHH 0x60        //Ã¿´Î×ª»»ÐèÒª70¸öÊ±ÖÓÖÜÆÚ
 595      =1  #define ADC_FLAG    0x10        //ADC×ª»»Íê³É±êÖ¾
 596      =1  #define ADC_START   0x08        //ADC¿ªÊ¼×ª»»¿ØÖÆÎ»
 597      =1  #define ADC_CHS2    0x04        //ADCÍ¨µÀÑ¡ÔñÎ»2
 598      =1  #define ADC_CHS1    0x02        //ADCÍ¨µÀÑ¡ÔñÎ»1
 599      =1  #define ADC_CHS0    0x01        //ADCÍ¨µÀÑ¡ÔñÎ»0
 600      =1  
 601      =1  /////////////////////////////////
 602      =1  
 603      =1  sfr  ADC_RES    =   0xbd;       //ADC½á¹û¸ß×Ö½Ú         Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 604      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 605      =1  
 606      =1  /////////////////////////////////
 607      =1  
 608      =1  sfr  ADC_RESL   =   0xbe;       //ADC½á¹ûµÍ×Ö½Ú         Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 609      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 610      =1  
 611      =1  //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -//////
 612      =1  
 613      =1  sfr  IAP_DATA   =   0xc2;       //IAPÊý¾Ý¼Ä´æÆ÷         Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 614      =1                                  //³õÊ¼Öµ=1111,1111      1       1       1       1       1       1       1 
             -      1
 615      =1  
 616      =1  /////////////////////////////////
 617      =1  
 618      =1  sfr  IAP_ADDRH  =   0xc3;       //IAPµØÖ·¸ßÎ»¼Ä´æÆ÷     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 619      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 620      =1  
 621      =1  /////////////////////////////////
 622      =1  
 623      =1  sfr  IAP_ADDRL  =   0xc4;       //IAPµØÖ·µÍÎ»¼Ä´æÆ÷     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 624      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 625      =1  
 626      =1  /////////////////////////////////
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 14  

 627      =1  
 628      =1  sfr  IAP_CMD    =   0xc5;       //IAPÃüÁî¼Ä´æÆ÷         Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 629      =1                                  //³õÊ¼Öµ=xxxx,xx00      x       x       x       x       x       x       0 
             -      0
 630      =1  
 631      =1  #define IAP_IDLE    0x00        //IAP´ý»úÃüÁî
 632      =1  #define IAP_READ    0x01        //IAP¶Á×Ö½ÚÊý¾ÝÃüÁî
 633      =1  #define IAP_PROGRAM 0x02        //IAP×Ö½Ú±à³ÌÃüÁî
 634      =1  #define IAP_ERASE   0x03        //IAPÉÈÇø²Á³ýÃüÁî(Ã¿ÉÈÇø512×Ö½Ú))
 635      =1  
 636      =1  /////////////////////////////////
 637      =1  
 638      =1  sfr  IAP_TRIG   =   0xc6;       //IAPÃüÁî´¥·¢¼Ä´æÆ÷     Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 639      =1                                  //³õÊ¼Öµ=xxxx,xxxx      x       x       x       x       x       x       x 
             -      x
 640      =1  
 641      =1  #define IAP_TRIG0   0x5a        //IAP¹¦ÄÜ´¥·¢ÃüÁî1
 642      =1  #define IAP_TRIG1   0xa5        //IAP¹¦ÄÜ´¥·¢ÃüÁî2
 643      =1  
 644      =1  /////////////////////////////////
 645      =1  
 646      =1  sfr  IAP_CONTR  =   0xc7;       //IAP¿ØÖÆ¼Ä´æÆ÷         Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 647      =1                                  //Î»ÃèÊö                IAPEN   SWBS    SWRST   CMD_FAIL -      WT2     WT
             -1     WT0
 648      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 649      =1  
 650      =1  #define IAPEN       0x80        //IAPÊ¹ÄÜ¿ª¹Ø
 651      =1  #define SWBS        0x40        //ÈíÆô¶¯Ñ¡Ôñ,0:´ÓÓÃ»§APÆô¶¯ 1:´ÓISPÆô¶¯
 652      =1  #define SWRST       0x20        //´¥·¢Èí¼þ¸´Î»
 653      =1  #define CMD_FAIL    0x10        //IAPÃüÁîÊ§°Ü±êÖ¾
 654      =1  
 655      =1  //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -//////
 656      =1  
 657      =1  sfr  SPSTAT     =   0xcd;       //SPI×´Ì¬¼Ä´æÆ÷         Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 658      =1                                  //Î»ÃèÊö                SPIF    WCOL    -       -       -       -       - 
             -      -
 659      =1                                  //³õÊ¼Öµ=11xx,xxxx      1       1       x       x       x       x       x 
             -      x
 660      =1  
 661      =1  #define SPIF        0x80        //SPI´«ÊäÍê³É±êÖ¾,µ±SPIÖÐ¶ÏÊ¹ÄÜÊ±»á´¥·¢SPIÖÐ¶ÏÇëÇó,ÐèÒªÓÃÈí¼þÏò´ËÎ»Ð´"1"À´
             -Çå0
 662      =1  #define WCOL        0x40        //SPIÐ´³åÍ»±êÖ¾,ÐèÒªÓÃÈí¼þÏò´ËÎ»Ð´"1"À´Çå0
 663      =1  
 664      =1  /////////////////////////////////
 665      =1  
 666      =1  sfr  SPCTL      =   0xce;       //SPI¿ØÖÆ¼Ä´æÆ÷         Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 667      =1                                  //Î»ÃèÊö                SSIG    SPEN    DORD    MSTR    CPOL    CPHA    SP
             -R1    SPR0
 668      =1                                  //³õÊ¼Öµ=0000,0100      0       0       0       0       0       1       0 
             -      0
 669      =1  
 670      =1  #define SSIG        0x80        //SSºöÂÔÎ»,1:ÓÉMSTRÈ·¶¨Ö÷/´Ó 0:ÓÉSS½ÅÈ·¶¨Ö÷/´Ó
 671      =1  #define SPEN        0x40        //SPIÄ£¿éÊ¹ÄÜÎ»
 672      =1  #define DORD        0x20        //SPIÊý¾ÝË³Ðò,1:LSB(ÏÈÊÕ/·¢×îµÍÎ») 0:MSB(ÏÈÊÕ/·¢×î¸ßÎ»)
 673      =1  #define MSTR        0x10        //Ö÷/´ÓÄ£Ê½Ñ¡ÔñÎ»
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 15  

 674      =1  #define CPOL        0x08        //SPIÊ±ÖÓ¼«ÐÔ
 675      =1  #define CPHA        0x04        //SPIÏàÎ»Ñ¡Ôñ
 676      =1  #define SPSPEEDHH   0x00        //×î¿ìµÄËÙ¶È,CPU_CLK/4
 677      =1  #define SPSPEEDH    0x01        //×î¿ìµÄËÙ¶È,CPU_CLK/16
 678      =1  #define SPSPEEDL    0x02        //×î¿ìµÄËÙ¶È,CPU_CLK/64
 679      =1  #define SPSPEEDLL   0x03        //×î¿ìµÄËÙ¶È,CPU_CLK/128
 680      =1  
 681      =1  /////////////////////////////////
 682      =1  
 683      =1  sfr  SPDAT      =   0xcf;       //SPIÊý¾Ý¼Ä´æÆ÷         Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 684      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 685      =1  
 686      =1  //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -//////
 687      =1  
 688      =1  sfr  CCON       =   0xd8;       //PCA¿ØÖÆ¼Ä´æÆ÷         Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 689      =1                                  //Î»ÃèÊö                CF      CR      -       -       -       -       CC
             -F1    CCF0
 690      =1                                  //³õÊ¼Öµ=00xx,xx00      0       0       x       x       x       x       0 
             -      0
 691      =1  
 692      =1  sbit CF         =   CCON^7;     //PCA¼ÆÊýÆ÷Òç³ö±êÖ¾,µ±PCAÖÐ¶ÏÊ¹ÄÜÊ±»á´¥·¢PCAÖÐ¶ÏÇëÇó,ÐèÒªÓÃÈí¼þÇå0
 693      =1  sbit CR         =   CCON^6;     //PCA¼ÆÊýÆ÷Æô¶¯¿ØÖÆÎ»,Ð´"1"Æô¶¯¶«¼ÆÊýÆ÷
 694      =1  sbit CCF1       =   CCON^1;     //PCAÄ£¿é1ÖÐ¶Ï±êÖ¾,ÐèÒªÓÃÈí¼þÇå0
 695      =1  sbit CCF0       =   CCON^0;     //PCAÄ£¿é0ÖÐ¶Ï±êÖ¾,ÐèÒªÓÃÈí¼þÇå0
 696      =1  
 697      =1  /////////////////////////////////
 698      =1  
 699      =1  sfr  CMOD       =   0xd9;       //PCAÄ£Ê½¼Ä´æÆ÷         Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 700      =1                                  //Î»ÃèÊö                CIDL    -       -       -       CPS2    CPS1    CP
             -S0    ECF
 701      =1                                  //³õÊ¼Öµ=0xxx,0000      0       x       x       x       0       0       0 
             -      0
 702      =1  
 703      =1  #define CIDL        0x80        //¼ÆÊ±Æ÷ÕóÁÐ¿ÕÏÐ¿ØÖÆ,0:¿ÕÏÐÄ£Ê½ÏÂPCA¼ÌÐø¹¤×÷ 1:¿ÕÏÐÄ£Ê½ÏÂPCAÍ£Ö¹¹¤×÷
 704      =1  #define PCACLK0     0x00        //Fosc/12
 705      =1  #define PCACLK1     0x02        //Fosc/2
 706      =1  #define PCACLK2     0x04        //¶¨Ê±Æ÷0µÄÒç³öÂÊ
 707      =1  #define PCACLK3     0x06        //ECIÍâ²¿Ê±ÖÓ
 708      =1  #define PCACLK4     0x08        //Fosc/1
 709      =1  #define PCACLK5     0x0a        //Fosc/4
 710      =1  #define PCACLK6     0x0c        //Fosc/6
 711      =1  #define PCACLK7     0x0e        //Fosc/8
 712      =1  #define ECF         0x01        //PCA¼ÆÊýÆ÷Òç³öÖÐ¶ÏÔÊÐíÎ»
 713      =1  
 714      =1  /////////////////////////////////
 715      =1  
 716      =1  sfr  CCAPM0     =   0xda;       //PCAÄ£¿é0Ä£Ê½¼Ä´æÆ÷    Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 717      =1                                  //Î»ÃèÊö                -       ECOM0   CAPP0   CAPN0   MAT0    TOG0    PW
             -M0    ECCF0
 718      =1                                  //³õÊ¼Öµ=x000,0000      x       0       0       0       0       0       0 
             -      0
 719      =1  
 720      =1  #define PCA0_ECOM   0x40        //Ê¹ÄÜ±È½ÏÆ÷0
 721      =1  #define PCA0_CAPP   0x20        //Ê¹ÄÜPCAÄ£¿é0µÄÉÏÉýÑØ²¶»ñ
 722      =1  #define PCA0_CAPN   0x10        //Ê¹ÄÜPCAÄ£¿é0µÄÏÂ½µÑØ²¶»ñ
 723      =1  #define PCA0_MAT    0x08        //Æ¥ÅäÊ¹ÄÜ,µ±PCAµÄ¼ÆÊýÖµÓëÄ£¿é0Éè¶¨µÄÖµÏàÆ¥ÅäÊ±,ÖÃCCON.CCF0
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 16  

 724      =1  #define PCA0_TOG    0x04        //·­×ª¿ØÖÆÎ»,µ±PCAµÄ¼ÆÊýÖµÓëÄ£¿é0Éè¶¨µÄÖµÏàÆ¥ÅäÊ±,·­×ªCEX0µÄµçÆ½
 725      =1  #define PCA0_PWM    0x02        //Âö¿íµ÷ÖÆÄ£Ê½,Ê¹ÄÜCEX0ÎªÂö¿íµ÷ÖÆÊä³ö¿Ú
 726      =1  #define PCA0_ECCF   0x01        //Ê¹ÄÜCCF0ÖÐ¶Ï
 727      =1  
 728      =1  /////////////////////////////////
 729      =1  
 730      =1  sfr  CCAPM1     =   0xdb;       //PCAÄ£¿é1Ä£Ê½¼Ä´æÆ÷    Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 731      =1                                  //Î»ÃèÊö                -       ECOM1   CAPP1   CAPN1   MAT1    TOG1    PW
             -M1    ECCF1
 732      =1                                  //³õÊ¼Öµ=x000,0000      x       0       0       0       0       0       0 
             -      0
 733      =1  
 734      =1  #define PCA1_ECOM   0x40        //Ê¹ÄÜ±È½ÏÆ÷1
 735      =1  #define PCA1_CAPP   0x20        //Ê¹ÄÜPCAÄ£¿é1µÄÉÏÉýÑØ²¶»ñ
 736      =1  #define PCA1_CAPN   0x10        //Ê¹ÄÜPCAÄ£¿é1µÄÏÂ½µÑØ²¶»ñ
 737      =1  #define PCA1_MAT    0x08        //Æ¥ÅäÊ¹ÄÜ,µ±PCAµÄ¼ÆÊýÖµÓëÄ£¿é1Éè¶¨µÄÖµÏàÆ¥ÅäÊ±,ÖÃCCON.CCF1
 738      =1  #define PCA1_TOG    0x04        //·­×ª¿ØÖÆÎ»,µ±PCAµÄ¼ÆÊýÖµÓëÄ£¿é1Éè¶¨µÄÖµÏàÆ¥ÅäÊ±,·­×ªCEX1µÄµçÆ½
 739      =1  #define PCA1_PWM    0x02        //Âö¿íµ÷ÖÆÄ£Ê½,Ê¹ÄÜCEX1ÎªÂö¿íµ÷ÖÆÊä³ö¿Ú
 740      =1  #define PCA1_ECCF   0x01        //Ê¹ÄÜCCF1ÖÐ¶Ï
 741      =1  
 742      =1  /////////////////////////////////
 743      =1  
 744      =1  //CCAPM0   -   ECOM CAPP CAPN MAT  TOG  PWM  CCF
 745      =1  // 00H     0    0    0    0    0    0    0    0     ÎÞ²Ù×÷,´ý»ú×´Ì¬
 746      =1  // 42H     0    1    0    0    0    0    1    0     8Î»PWMÊä³ö,ÎÞÖÐ¶Ï
 747      =1  // 63H     0    1    1    0    0    0    1    1     8Î»PWMÊä³ö,²úÉúCEX0ÉÏÉýÑØÖÐ¶Ï
 748      =1  // 53H     0    1    0    1    0    0    1    1     8Î»PWMÊä³ö,²úÉúCEX0ÏÂ½µÑØÖÐ¶Ï
 749      =1  // 73H     0    1    1    1    0    0    1    1     8Î»PWMÊä³ö,²úÉúCEX0Ìø±äÖÐ¶Ï
 750      =1  // 20H     0    x    1    0    0    0    0    0     16Î»²¶»ñÄ£Ê½,CEX0ÉÏÉýÑØ´¥·¢²¶»ñ
 751      =1  // 10H     0    x    0    1    0    0    0    0     16Î»²¶»ñÄ£Ê½,CEX0ÏÂ½µÑØ´¥·¢²¶»ñ
 752      =1  // 30H     0    x    1    1    0    0    0    0     16Î»²¶»ñÄ£Ê½,CEX0Ìø±ä´¥·¢²¶»ñ
 753      =1  // 48H     0    1    0    0    1    0    0    0     16Î»Èí¼þ¶¨Ê±Æ÷
 754      =1  // 4CH     0    1    0    0    1    1    0    0     16Î»¸ßËÙÂö³åÊä³ö
 755      =1  
 756      =1  /////////////////////////////////
 757      =1  
 758      =1  sfr  CL         =   0xe9;       //PCA¼ÆÊýÆ÷µÍ8Î»        Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 759      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 760      =1  
 761      =1  /////////////////////////////////
 762      =1  
 763      =1  sfr  CH         =   0xf9;       //PCA¼ÆÊýÆ÷¸ß8Î»        Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 764      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 765      =1  
 766      =1  /////////////////////////////////
 767      =1  
 768      =1  sfr  CCAP0L     =   0xea;       //PCAÄ£¿é0¼Ä´æÆ÷µÍ8Î»   Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 769      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 770      =1  
 771      =1  /////////////////////////////////
 772      =1  
 773      =1  sfr  CCAP1L     =   0xeb;       //PCAÄ£¿é1¼Ä´æÆ÷µÍ8Î»   Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 774      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 17  

 775      =1  
 776      =1  /////////////////////////////////
 777      =1  
 778      =1  sfr  CCAP0H     =   0xfa;       //PCAÄ£¿é0¼Ä´æÆ÷¸ß8Î»   Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 779      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 780      =1  
 781      =1  /////////////////////////////////
 782      =1  
 783      =1  sfr  CCAP1H     =   0xfb;       //PCAÄ£¿é1¼Ä´æÆ÷¸ß8Î»   Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 784      =1                                  //³õÊ¼Öµ=0000,0000      0       0       0       0       0       0       0 
             -      0
 785      =1  
 786      =1  /////////////////////////////////
 787      =1  
 788      =1  sfr  PCA_PWM0   =   0xf2;       //PCA0Ä£Ê½PWM¸¨Öú¼Ä´æÆ÷ Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 789      =1                                  //Î»ÃèÊö                -       -       -       -       -       -       EP
             -C0H   EPC0L
 790      =1                                  //³õÊ¼Öµ=xxxx,xx00      x       x       x       x       x       x       0 
             -      0
 791      =1  
 792      =1  /////////////////////////////////
 793      =1  
 794      =1  sfr  PCA_PWM1   =   0xf3;       //PCA1Ä£Ê½PWM¸¨Öú¼Ä´æÆ÷ Bit7    Bit6    Bit5    Bit4    Bit3    Bit2    Bi
             -t1    Bit0
 795      =1                                  //Î»ÃèÊö                -       -       -       -       -       -       EP
             -C1H   EPC1L
 796      =1                                  //³õÊ¼Öµ=xxxx,xx00      x       x       x       x       x       x       0 
             -      0
 797      =1  
 798      =1  //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -//////
 799      =1  
 800      =1  #endif
   2          
   3          #include <intrins.h>      //51»ù±¾ÔËËã£¨°üÀ¨_nop_¿Õº¯Êý£©
   1      =1  /*--------------------------------------------------------------------------
   2      =1  INTRINS.H
   3      =1  
   4      =1  Intrinsic functions for C51.
   5      =1  Copyright (c) 1988-2004 Keil Elektronik GmbH and Keil Software, Inc.
   6      =1  All rights reserved.
   7      =1  --------------------------------------------------------------------------*/
   8      =1  
   9      =1  #ifndef __INTRINS_H__
  10      =1  #define __INTRINS_H__
  11      =1  
  12      =1  extern void          _nop_     (void);
  13      =1  extern bit           _testbit_ (bit);
  14      =1  extern unsigned char _cror_    (unsigned char, unsigned char);
  15      =1  extern unsigned int  _iror_    (unsigned int,  unsigned char);
  16      =1  extern unsigned long _lror_    (unsigned long, unsigned char);
  17      =1  extern unsigned char _crol_    (unsigned char, unsigned char);
  18      =1  extern unsigned int  _irol_    (unsigned int,  unsigned char);
  19      =1  extern unsigned long _lrol_    (unsigned long, unsigned char);
  20      =1  extern unsigned char _chkfloat_(float);
  21      =1  extern void          _push_    (unsigned char _sfr);
  22      =1  extern void          _pop_     (unsigned char _sfr);
  23      =1  
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 18  

  24      =1  #endif
  25      =1  
   4          #include <math.h>
   1      =1  /*--------------------------------------------------------------------------
   2      =1  MATH.H
   3      =1  
   4      =1  Prototypes for mathematic functions.
   5      =1  Copyright (c) 1988-2002 Keil Elektronik GmbH and Keil Software, Inc.
   6      =1  All rights reserved.
   7      =1  --------------------------------------------------------------------------*/
   8      =1  
   9      =1  #ifndef __MATH_H__
  10      =1  #define __MATH_H__
  11      =1  
  12      =1  #pragma SAVE
  13      =1  #pragma REGPARMS
  14      =1  extern char  cabs  (char  val);
  15      =1  extern int    abs  (int   val);
  16      =1  extern long  labs  (long  val);
  17      =1  extern float fabs  (float val);
  18      =1  extern float sqrt  (float val);
  19      =1  extern float exp   (float val);
  20      =1  extern float log   (float val);
  21      =1  extern float log10 (float val);
  22      =1  extern float sin   (float val);
  23      =1  extern float cos   (float val);
  24      =1  extern float tan   (float val);
  25      =1  extern float asin  (float val);
  26      =1  extern float acos  (float val);
  27      =1  extern float atan  (float val);
  28      =1  extern float sinh  (float val);
  29      =1  extern float cosh  (float val);
  30      =1  extern float tanh  (float val);
  31      =1  extern float atan2 (float y, float x);
  32      =1  
  33      =1  extern float ceil  (float val);
  34      =1  extern float floor (float val);
  35      =1  extern float modf  (float val, float *n);
  36      =1  extern float fmod  (float x, float y);
  37      =1  extern float pow   (float x, float y);
  38      =1  
  39      =1  #pragma RESTORE
  40      =1  
  41      =1  #endif
   5          
   6          #include "src\Define.h"
   1      =1  
   2      =1  #ifndef uchar
   3      =1  #define uchar unsigned char
   4      =1  #endif
   5      =1  
   6      =1  #ifndef uint
   7      =1  #define uint  unsigned int
   8      =1  #endif
   9      =1  
  10      =1  #define uint8    unsigned char
  11      =1  #define uint16   unsigned short int
  12      =1  #define uint32   unsigned long int
  13      =1  #define uint64   unsigned long long int
  14      =1  #define int8     signed char
  15      =1  #define int16    signed short int
  16      =1  #define int32    signed long int
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 19  

  17      =1  #define int64    signed long long int
  18      =1  
  19      =1  
  20      =1  #define BinToHex(n) (((n>>21)&0x80)|((n>>18)&0x40)|((n>>15)&0x20)|((n>>12)&0x10)|((n>>9)& 0x08)|((n>>6)&0x
             -04)|((n>>3)&0x02)|((n)&0x01))
  21      =1  #define B(n) BinToHex(0x##n##l)
  22      =1  
   7          
   8          
   9          ///////È«¾Ö±äÁ¿///////
  10          uchar data DelayTime=9;   //<=8Ð§¹û×îºÃ£»
  11          uchar data INTTime=0x40;  //0x40;       
  12          uchar data gain=6;
  13          uchar data Menu=2;
  14          uchar idata refreshflag[40];
  15          uchar  data LEDBuf[35];   //15ÁÐ£»´Ó×óµ½ÓÒ£»ÁÁµÄÎ»ÎªÕæ£¨1£©£»
  16          uint32  data TouchKey=0;
  17          uchar data CBeep=0;
  18          //////////////////////
  19          
  20          
  21          void Delays(uint t)
  22          {  
  23   1              uint j;
  24   1              while(--t)
  25   1                      for(j=0;j<5;j++);    
  26   1      }
  27          void Delaysms(uint t)
  28          {  
  29   1              uint j;
  30   1              while(--t)
  31   1                      for(j=0;j<15;j++);    
  32   1      }
  33          
  34          
  35          
  36          #include "src\ADC.c"
   1      =1  /*------------------------------------------------------------------*/
   2      =1  /* --- STC MCU International Limited -------------------------------*/
   3      =1  /* --- STC 1T Series MCU A/D Conversion Demo -----------------------*/
   4      =1  /*------------------------------------------------------------------*/
   5      =1  
   6      =1  //#include "reg51.h"
   7      =1  #include "intrins.h"
   1      =2  /*--------------------------------------------------------------------------
   2      =2  INTRINS.H
   3      =2  
   4      =2  Intrinsic functions for C51.
   5      =2  Copyright (c) 1988-2004 Keil Elektronik GmbH and Keil Software, Inc.
   6      =2  All rights reserved.
   7      =2  --------------------------------------------------------------------------*/
   8      =2  
   9      =2  #ifndef __INTRINS_H__
           =2 #define __INTRINS_H__
           =2 
           =2 extern void          _nop_     (void);
           =2 extern bit           _testbit_ (bit);
           =2 extern unsigned char _cror_    (unsigned char, unsigned char);
           =2 extern unsigned int  _iror_    (unsigned int,  unsigned char);
           =2 extern unsigned long _lror_    (unsigned long, unsigned char);
           =2 extern unsigned char _crol_    (unsigned char, unsigned char);
           =2 extern unsigned int  _irol_    (unsigned int,  unsigned char);
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 20  

           =2 extern unsigned long _lrol_    (unsigned long, unsigned char);
           =2 extern unsigned char _chkfloat_(float);
           =2 extern void          _push_    (unsigned char _sfr);
           =2 extern void          _pop_     (unsigned char _sfr);
           =2 
           =2 #endif
  25      =2  
   8      =1  
   9      =1  #define FOSC    18432000L
  10      =1  #define BAUD    9600
  11      =1  
  12      =1  typedef unsigned char BYTE;
  13      =1  typedef unsigned int WORD;
  14      =1  
  15      =1  /*Declare SFR associated with the ADC */
  16      =1  //sfr ADC_CONTR   =   0xBC;           //ADC control register
  17      =1  //sfr ADC_RES     =   0xBD;           //ADC high 8-bit result register
  18      =1  sfr ADC_LOW2    =   0xBE;           //ADC low 2-bit result register
  19      =1  //sfr P1ASF       =   0x9D;           //P1 secondary function control register
  20      =1  
  21      =1  /*Define ADC operation const for ADC_CONTR*/
  22      =1  #define ADC_POWER   0x80            //ADC power control bit
  23      =1  #define ADC_FLAG    0x10            //ADC complete flag
  24      =1  #define ADC_START   0x08            //ADC start control bit
  25      =1  #define ADC_SPEEDLL 0x00            //420 clocks
  26      =1  #define ADC_SPEEDL  0x20            //280 clocks
  27      =1  #define ADC_SPEEDH  0x40            //140 clocks
  28      =1  #define ADC_SPEEDHH 0x60            //70 clocks
  29      =1  
  30      =1  void InitUart();
  31      =1  void InitADC();
  32      =1  void SendData(BYTE dat);
  33      =1  BYTE GetADCResult(BYTE ch);
  34      =1  void Delay(WORD n);
  35      =1  void ShowResult(BYTE ch);
  36      =1  
  37      =1  
  38      =1  /*----------------------------
  39      =1  Send ADC result to UART
  40      =1  ----------------------------*/
  41      =1  void ShowResult(BYTE ch)
  42      =1  {
  43   1  =1      SendData(ch);                   //Show Channel NO.
  44   1  =1      SendData(GetADCResult(ch));     //Show ADC high 8-bit result
  45   1  =1  
  46   1  =1  //if you want show 10-bit result, uncomment next line
  47   1  =1  //    SendData(ADC_LOW2);             //Show ADC low 2-bit result
  48   1  =1  }
  49      =1  
  50      =1  /*----------------------------
  51      =1  Get ADC result
  52      =1  ----------------------------*/
  53      =1  BYTE GetADCResult(BYTE ch)
  54      =1  {
  55   1  =1      ADC_CONTR = ADC_POWER | ADC_SPEEDLL | ch | ADC_START;
  56   1  =1      _nop_();                        //Must wait before inquiry
  57   1  =1      _nop_();
  58   1  =1      _nop_();
  59   1  =1      _nop_();
  60   1  =1      while (!(ADC_CONTR & ADC_FLAG));//Wait complete flag
  61   1  =1      ADC_CONTR &= ~ADC_FLAG;         //Close ADC
  62   1  =1  
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 21  

  63   1  =1      return ADC_RES;                 //Return ADC result
  64   1  =1  }
  65      =1  
  66      =1  /*----------------------------
  67      =1  Initial UART
  68      =1  ----------------------------*/
  69      =1  void InitUart()
  70      =1  {
  71   1  =1      SCON = 0x5a;                    //8 bit data ,no parity bit
  72   1  =1      TMOD = 0x20;                    //T1 as 8-bit auto reload
  73   1  =1      TH1 = TL1 = -(FOSC/12/32/BAUD); //Set Uart baudrate
  74   1  =1      TR1 = 1;                        //T1 start running
  75   1  =1  }
  76      =1  
  77      =1  /*----------------------------
  78      =1  Initial ADC sfr
  79      =1  ----------------------------*/
  80      =1  void InitADC()
  81      =1  {
  82   1  =1      //P1ASF = 0xff;                   //Open 8 channels ADC function
  83   1  =1      ADC_RES = 0;                    //Clear previous result
  84   1  =1      ADC_CONTR = ADC_POWER | ADC_SPEEDLL;
  85   1  =1      Delay(2);                       //ADC power-on and delay
  86   1  =1  }
  87      =1  
  88      =1  /*----------------------------
  89      =1  Send one byte data to PC
  90      =1  Input: dat (UART data)
  91      =1  Output:-
  92      =1  ----------------------------*/
  93      =1  void SendData(BYTE dat)
  94      =1  {
  95   1  =1      while (!TI);                    //Wait for the previous data is sent
  96   1  =1      TI = 0;                         //Clear TI flag
  97   1  =1      SBUF = dat;                     //Send current data
  98   1  =1  }
  99      =1  
 100      =1  /*----------------------------
 101      =1  Software delay function
 102      =1  ----------------------------*/
 103      =1  void Delay(WORD n)
 104      =1  {
 105   1  =1      WORD x;
 106   1  =1  
 107   1  =1      while (n--)
 108   1  =1      {
 109   2  =1          x = 5000;
 110   2  =1          while (x--);
 111   2  =1      }
 112   1  =1  }
 113      =1  
  37          #include "src\Font.c"
   1      =1  
   2      =1   
   3      =1  
   4      =1  
   5      =1  
   6      =1  uchar code FontLib[156+35]=
   7      =1  {
   8      =1          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,        
   9      =1  
  10      =1          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7F,0x50,0x50,0x00,0x3E,
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 22  

  11      =1          0x22,0x3E,0x00,0x3E,0x10,0x20,0x00,0x3E,0x2A,0x3A,0x00,0x3C,0x02,0x3C,0x00,0x3E,
  12      =1          0x2A,0x3A,0x00,0x3E,0x10,0x20,0x00,0x40,0x7E,0x40,0x00,0x3E,0x22,0x3E,0x00,0x3F,
  13      =1          0x24,0x3C,0x00,0x00,0x00,0x00,0x7E,0x42,0x00,0x1C,0x10,0x1C,0x10,0x1C,0x00,0x5C,
  14      =1          0x00,0x1C,0x10,0x1C,0x00,0x5C,0x00,0x00,0x3E,0x28,0x28,0x00,0x3E,0x28,0x28,0x00,
  15      =1          0x20,0x3E,0x20,0x00,0x42,0x7E,0x00,0x00,0x00,0x00,0x00,0x1C,0x1C,0x1C,0x1C,0x1C,
  16      =1          0x1C,0x1C,0x5D,0x7F,0x3E,0x1C,0x08,0x00,0x00,0x00,0x08,0x1C,0x3E,0x7F,0x5D,0x1C,
  17      =1          0x1C,0x1C,0x1C,0x1C,0x1C,0x00,0x00,0x00,0x10,0x20,0x7F,0xFF,0x7F,0x20,0x10,0x00,
  18      =1          0x00,0x00,0x08,0x04,0xFE,0xFF,0xFE,0x04,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  19      =1          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  20      =1          /*"D:\Desktop now2\MultiColorsFFT\Logo.ForeverTop.BMP",0*/
  21      =1          
  22      =1  
  23      =1  };
  24      =1  
  25      =1  
  26      =1  void FontDisp()
  27      =1  {
  28   1  =1          uchar data i,ii,count;
  29   1  =1  
  30   1  =1          for(ii=0;ii<156;ii++)
  31   1  =1          {
  32   2  =1                  for(i=2,count=0;i<35;i+=2,count++)        
  33   2  =1                  {
  34   3  =1                          LEDBuf[i]=FontLib[count+ii];      
  35   3  =1                  }
  36   2  =1                  Delaysms(9000);
  37   2  =1          }       
  38   1  =1  
  39   1  =1  }
  38          #include "src\fft.h"
   1      =1  #ifndef _FFT_INCLUDED_
   2      =1  #define _FFT_INCLUDED_
   3      =1  
   4      =1  struct compx
   5      =1  {
   6      =1          float real;
   7      =1          float imag;
   8      =1  };
   9      =1  struct compx dd[65]; //FFTÊý¾Ý   
  10      =1  data struct compx temp;  
  11      =1   
  12      =1  code float iw[64]=
  13      =1  {
  14      =1          1.000,0,0.9952,-0.0980,0.9808,-0.1951,0.9569,-0.2903,0.9239,-0.3827,0.8819,-0.4714,0.8315,-0.5556,
  15      =1          0.7730,-0.6344,0.7071,-0.7071,0.6344,-0.7730,0.5556,-0.8315,0.4714,-0.8819,0.3827,-0.9239,0.2903,-0.9569,
  16      =1          0.1951,-0.9808,0.0980,-0.9952,0.0,-1.0000,-0.0980,-0.9952,-0.1951,-0.9808,-0.2903,0.9569,-0.3827,-0.9239,
  17      =1          -0.4714,-0.8819,-0.5556,-0.8315,-0.6344,-0.7730,-0.7071,-0.7071,-0.7730,-0.6344,-0.8315,-0.5556,-0.8819,-
             -0.4714,
  18      =1          -0.9239,-0.3827,-0.9569,-0.2903,-0.9808,-0.1951,-0.9952,-0.0980
  19      =1  };
  20      =1  
  21      =1  
  22      =1  //¸´Êý³Ë·¨
  23      =1  void ee(struct compx b1,uchar data b2)
  24      =1  { 
  25   1  =1          temp.real=b1.real*iw[2*b2]-b1.imag*iw[2*b2+1];
  26   1  =1          temp.imag=b1.real*iw[2*b2+1]+b1.imag*iw[2*b2]; 
  27   1  =1  } 
  28      =1  //³Ë·½º¯Êý  
  29      =1  uint mypow(uchar data nbottom,uchar data ntop)
  30      =1  {
  31   1  =1      uint data result=1;
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 23  

  32   1  =1      uchar data t;    
  33   1  =1      for(t=0;t<ntop;t++)result*=nbottom; 
  34   1  =1      return result;
  35   1  =1  }
  36      =1  //¿ìËÙ¸µÁ¢Ò¶±ä»»  
  37      =1  void fft(struct compx *xin,uchar data N)
  38      =1  {
  39   1  =1          uchar data  fftnum,i,j,k,l,m,n,disbuff,dispos,dissec;
  40   1  =1          data struct compx t;
  41   1  =1          fftnum=N;                         //¸µÁ¢Ò¶±ä»»µãÊý
  42   1  =1          for(m=1;(fftnum=fftnum/2)!=1;m++);//ÇóµÃMµÄÖµ 
  43   1  =1          for(k=0;k<=N-1;k++)               //ÂëÎ»µ¹ÖÃ
  44   1  =1          {
  45   2  =1                  n=k;
  46   2  =1                  j=0; 
  47   2  =1                  for(i=m;i>0;i--)             //µ¹ÖÃ
  48   2  =1                  {
  49   3  =1                          j=j+((n%2)<<(i-1));
  50   3  =1                          n=n/2;
  51   3  =1                  } 
  52   2  =1                  if(k<j){t=xin[1+j];xin[1+j]=xin[1+k];xin[1+k]=t;}//½»»»Êý¾Ý
  53   2  =1          }  
  54   1  =1          for(l=1;l<=m;l++)                //FFTÔËËã
  55   1  =1          {
  56   2  =1                  disbuff=mypow(2,l);          //ÇóµÃµú¼ä¾àÀë
  57   2  =1                  dispos=disbuff/2;            //ÇóµÃµúÐÎÁ½µãÖ®¼äµÄ¾àÀë
  58   2  =1                  for(j=1;j<=dispos;j++)
  59   2  =1                          for(i=j;i<N;i=i+disbuff) //±éÀúM¼¶ËùÓÐµÄµúÐÎ
  60   2  =1                          {
  61   3  =1                                  dissec=i+dispos;     //ÇóµÃµÚ¶þµãµÄÎ»ÖÃ
  62   3  =1                                  ee(xin[dissec],(uint)(j-1)*(uint)N/disbuff);//¸´Êý³Ë·¨
  63   3  =1                                  t=temp;
  64   3  =1                                  xin[dissec].real=xin[i].real-t.real;
  65   3  =1                                  xin[dissec].imag=xin[i].imag-t.imag;
  66   3  =1                                  xin[i].real=xin[i].real+t.real;
  67   3  =1                                  xin[i].imag=xin[i].imag+t.imag;
  68   3  =1                          }
  69   2  =1          }
  70   1  =1  } 
  71      =1  
  72      =1  
  73      =1  //Íê³ÉÏÔÊ¾Êý¾ÝµÄ×ª»»¹¤×÷,°üÀ¨¶¥µãÏÂÂäËÙ¶È¿ØÖÆÒÔ¼°¶¥µã¸üÐÂ¶¨¸ñ
  74      =1  //¶ÔfftÊý¾Ý½øÐÐ´¦Àí,µÃµ½¸÷¸öÆµÂÊ¶ÎµÄµçÑ¹·ùÖµ
  75      =1  void processfft(void)
  76      =1  { 
  77   1  =1      uchar data pt=0,tmp; 
  78   1  =1  
  79   1  =1      for(pt=1;pt<65;pt++)
  80   1  =1      {
  81   2  =1          dd[pt].imag=0;                //ÇåÁãÐé²¿ 
  82   2  =1      }
  83   1  =1      fft(dd,64);                       //¶Ôµ±Ç°Êý¾Ý½øÐÐ¸µÁ¢Ò¶±ä»»
  84   1  =1           
  85   1  =1      for(pt=1;pt<65;pt++)
  86   1  =1      {                                      
  87   2  =1          dd[pt].real=sqrt(dd[pt].real*dd[pt].real+dd[pt].imag*dd[pt].imag);//È¡¾ù·½¸ù 
  88   2  =1      }
  89   1  =1  
  90   1  =1          if(Menu==1)
  91   1  =1          {
  92   2  =1                  for(pt=2;pt<34;pt+=2)    
  93   2  =1              {       
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 24  

  94   3  =1                          for(tmp=(dd[pt].real/32)+1,LEDBuf[pt]=0xFF;tmp>=1;tmp--)//tmp>1;²»±£Áô×îµÍÎ»ÄÇÒ»ÐÐ³£ÁÁ
  95   3  =1                          {
  96   4  =1                                  LEDBuf[pt]<<=1;                 
  97   4  =1                          }
  98   3  =1                          
  99   3  =1                          LEDBuf[pt]=~(LEDBuf[pt]);
 100   3  =1           
 101   3  =1                  }
 102   2  =1          }
 103   1  =1          else if(Menu==2)
 104   1  =1          {
 105   2  =1  
 106   2  =1                  //ÏÂÂä¸Ð
 107   2  =1                  for(pt=2;pt<34;pt+=2)   
 108   2  =1              {       
 109   3  =1                          tmp=(dd[pt].real/32)+1;
 110   3  =1                          if(refreshflag[pt]<tmp)                     //Ë¢ÐÂÊý¾Ý,È¡½Ï´ó¸ß¶ÈÖµ ´æ´¢ÏÔÊ¾  
 111   3  =1                          {
 112   4  =1                                  for(LEDBuf[pt]=0xFF;tmp>1;tmp--)        //tmp>1;²»±£Áô  ×îµÍÎ»ÄÇÒ»ÐÐ³£ÁÁ;{}Ò»´ÎÒ²²»Ö´ÐÐ£»
 113   4  =1                                  {
 114   5  =1                                          LEDBuf[pt]<<=1; 
 115   5  =1                                          
 116   5  =1                                  }
 117   4  =1                                  refreshflag[pt]=(dd[pt].real/32)+1;
 118   4  =1                          }
 119   3  =1                          else
 120   3  =1                          {
 121   4  =1                                  if(refreshflag[pt]>1)refreshflag[pt]--;                //¶¥¶ËÏÂÂäËÙ¶È¿ØÖÆ  ¸Ä±äÖµ¿ÉÒÔ¸Ä±äÏÂ½µËÙ¶È
 122   4  =1                                  for(LEDBuf[pt]=0xFF,tmp=refreshflag[pt];tmp>1;tmp--)   //tmp>1;²»±£Áô ×îµÍÎ»ÄÇÒ»ÐÐ³£ÁÁ
 123   4  =1                                  {
 124   5  =1                                          LEDBuf[pt]<<=1;                                         
 125   5  =1                                  }
 126   4  =1                          }
 127   3  =1                  }
 128   2  =1          } 
 129   1  =1          else if(Menu==0)
 130   1  =1          {
 131   2  =1  
 132   2  =1                  //ÏÂÂä¸ÐÆµÆ×
 133   2  =1                  for(pt=2;pt<34;pt+=2)    
 134   2  =1              {       
 135   3  =1                          tmp=(dd[pt].real/32)+1;
 136   3  =1                          if(refreshflag[pt]<tmp)                   //Ë¢ÐÂÊý¾Ý,È¡½Ï´ó¸ß¶ÈÖµ ´æ´¢ÏÔÊ¾  
 137   3  =1                          {
 138   4  =1                                  for(LEDBuf[pt]=0xFF;tmp>=1;tmp--)//tmp>1;²»±£Áô  ×îµÍÎ»ÄÇÒ»ÐÐ³£ÁÁ;{}Ò»´ÎÒ²²»Ö´ÐÐ£»
 139   4  =1                                  {
 140   5  =1                                          LEDBuf[pt]<<=1; 
 141   5  =1                                          
 142   5  =1                                  }
 143   4  =1                                  refreshflag[pt]=(dd[pt].real/32)+1;
 144   4  =1                          
 145   4  =1                          }
 146   3  =1                          else
 147   3  =1                          {
 148   4  =1                                  if(refreshflag[pt]>1)refreshflag[pt]--;                         
 149   4  =1                                  for(LEDBuf[pt]=0xFF,tmp=refreshflag[pt];tmp>=1;tmp--)   
 150   4  =1                                  {
 151   5  =1                                          LEDBuf[pt]<<=1;                                 
 152   5  =1                                  }
 153   4  =1                          }
 154   3  =1                          LEDBuf[pt]=~(LEDBuf[pt]);
 155   3  =1                  }
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 25  

 156   2  =1          }
 157   1  =1          
 158   1  =1  }  
 159      =1  #endif      
 160      =1  
 161      =1  
 162      =1  
 163      =1  
 164      =1  
 165      =1  
 166      =1  
 167      =1  
 168      =1  
 169      =1  
 170      =1  
 171      =1  
 172      =1  
 173      =1  
 174      =1  
  39          
  40          
  41          
  42          void PWM_init (void)      //PWM³õÊ¼»¯º¯Êý        //PWMÄ£Ê½£¬½ÓP1.3½Ó¿Ú£¨PWM0£©,Ç¿ÉÏÀ­.
  43          {                  
  44   1              CMOD=0x00;    //ÉèÖÃPCA¶¨Ê±Æ÷     0x00¡«0x03£»
  45   1              CL=0xEF; 
  46   1              CH=0xEF;
  47   1              CCAPM0=0x42; //PWM0ÉèÖÃPCA¹¤×÷·½Ê½ÎªPWM·½Ê½£¨0100 0010£©
  48   1              CCAP0L=0xEF; //ÉèÖÃPWM0³õÊ¼ÖµÓëCCAP0HÏàÍ¬
  49   1              CCAP0H=0xFF; // PWM0³õÊ¼Ê±Îª0
  50   1      
  51   1              CR=1;        //Æô¶¯PCA¶¨Ê±Æ÷
  52   1      }
  53          
  54          void PWM0_set (uchar set)          //PWM0Õ¼¿Õ±ÈÉèÖÃº¯Êý (0x00~0xFF)
  55          {
  56   1              CCAP0L= set; //ÉèÖÃÖµÐ´ÈëCCAP0L
  57   1              CCAP0H= set; //ÉèÖÃÖµÐ´ÈëCCAP0H
  58   1      }
  59          
  60          
  61          void IOINIT(void)                                                         //I/OÇ¿ÉÏÀ­Ä£Ê½£»
  62          {
  63   1              P4SW = 0xff;                              //Æô¶¯I/O£ºP4£»
  64   1              P4M1 = B(00000000); P4M0 = B(10000000);P47=0;//Õð¶¯Âí´ï£»
  65   1              P0M1 = 0x00;        P0M0 = 0xff;       P0=0; //µãÕóÁÐ£¨Y£©£¨L:OFF£» H£¬H+:ON,ON+;£©
  66   1              P1M1 = B(01000011); P1M0 = B(00110100);P1=B(10110111); //(P17@£¨¸ß×è£¬IN£©&P16@£¨¸ß×è£¬IN£©£»TouchKey) ..
             -. P14@(´«Í³IO,Beep£¬IN) P13@(Ç¿ÍÆ£¬OUT)ºôÎüµÆ ... P11@(¸ß×è£¬IN)AD2;P10@(¸ß×è£¬IN)AD1;      
  67   1              P2M1 = B(00000000); P2M0 = B(11111111);P2=0; //µãÕóÐÐ£¨X0£¨Left£©£©£¨L:OFF£» H£¬H+:ON,ON+;£©  
  68   1              P3M1 = B(00000000);     P3M0 = B(11111111);P3=0; //µãÕóÐÐ£¨X1£¨Right£©£©£¨L:OFF£» H£¬H+:ON,ON+;£©             
  69   1              P1ASF =B(00000011);                          //½«P10,P11µÄIOÉèÖÃÎªÄ£ÄâÊäÈë¹¦ÄÜ£»     
  70   1      
  71   1      //  Y(P0)
  72   1      //  ¡ü
  73   1      //H     |
  74   1      //      |
  75   1      //      |
  76   1      //L     |
  77   1      //       ---------------------¡ú
  78   1      //      [L:X0(P2):H][L:X1(P3):H]
  79   1      
  80   1      //TestCode:
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 26  

  81   1      //      P0=B(10000000);
  82   1      //      P2=B(00000001);
  83   1      //      P3=B(00010000);
  84   1      
  85   1      }
  86          
  87          
  88          
  89          void BufToLED_Refresh()                     //Refresh&Write Buf to LED ;
  90          {       
  91   1               uchar data i; 
  92   1               uchar data X=1;          
  93   1               uchar data Y=1;
  94   1               for(X=1,i=2;X;X<<=1,i+=2)              //for(X=1;X!=0;X<<=1) //8bit
  95   1               {
  96   2                      P2=X;
  97   2                      for(Y=1;Y!=0;Y<<=1)                         //Y=Y<<1;
  98   2                      {
  99   3                              P0=Y&LEDBuf[i];
 100   3                              Delays(DelayTime);
 101   3                              P0=0;
 102   3                      }
 103   2                      P2=0;   
 104   2               };
 105   1               for(X=1;X<B(10000000);X<<=1,i+=2)          //7bit
 106   1               {
 107   2                      P3=X;
 108   2                      for(Y=1;Y!=0;Y<<=1)                         //Y=Y<<1;
 109   2                      {
 110   3                              P0=Y&LEDBuf[i];
 111   3                              Delays(DelayTime);
 112   3                              P0=0;
 113   3                      }
 114   2                      P3=0;   
 115   2               };
 116   1                      
 117   1      }
 118          
 119          
 120          
 121          
 122          void LEDRefresh_INT() interrupt 3 //using 3   
 123          { 
 124   1              static uint x=0;                   
 125   1              static uchar flag=1;
 126   1      
 127   1          TL1 = 0x00;      
 128   1          TH1 = INTTime;               //0x50~0x80 
 129   1      
 130   1              if(flag)
 131   1              {
 132   2                      if(++x==0xFF)                    //MINOUTPUT
 133   2                      {
 134   3                              flag=0;         
 135   3                      }               
 136   2              }
 137   1              else
 138   1              {
 139   2                      if(--x==0xCF)            //MAXOUTPUT
 140   2                      {
 141   3                              flag=1;                 
 142   3                      }
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 27  

 143   2              }                       
 144   1              PWM0_set(x);                 //ÉèÖÃPWMÕ¼¿Õ±È
 145   1      
 146   1              BufToLED_Refresh();                     
 147   1      }  
 148          
 149          
 150          void Timer_INT()
 151          {
 152   1              TMOD = 0x11; //¸ß4Î»¿ØÖÆT/C1 
 153   1              EA = 1;      //¿ª×ÜÖÐ¶Ï
 154   1              TH1 = 0x00;  //16Î»¼ÆÊý¼Ä´æÆ÷T1¸ß8Î»
 155   1              TL1 = 0x00;  //16Î»¼ÆÊý¼Ä´æÆ÷T1µÍ8Î»
 156   1              ET1 = 1;     //T/C1ÖÐ¶Ï¿ª
 157   1          TR1 = 1;     //T/C1Æô¶¯
 158   1      
 159   1      }
 160          
 161          
 162          void FullScan()
 163          {
 164   1              uchar data X=1;   
 165   1              uchar data Y=1;
 166   1      
 167   1               for(Y=1;Y!=0;Y<<=1)                   //Y=Y<<1;
 168   1               {      
 169   2                      P0=Y;
 170   2                      for(X=1;X;X<<=1)                   //8bit
 171   2                      {
 172   3                              P2=X;
 173   3                              Delays(7);      
 174   3                      };
 175   2      
 176   2                      P2=0;
 177   2                      for(X=1;X<B(10000000);X<<=1)    //7bit
 178   2                      {
 179   3                              P3=X;
 180   3                              Delays(7);
 181   3                      };
 182   2                      P3=0;
 183   2                      P0=0;
 184   2               }
 185   1      }
 186          
 187          
 188          void Main()
 189          {  
 190   1              uint data Count=700;
 191   1              uchar data i,Cgain,num=0;
 192   1      
 193   1              IOINIT();
 194   1              InitADC();                   
 195   1      
 196   1              while(--Count)
 197   1                      FullScan();
 198   1      
 199   1              for(i=0;i<40;i++) refreshflag[i]=0x09;
 200   1              
 201   1              P14=0;                    //Beep
 202   1              Delays(4000);
 203   1              P14=1;
 204   1      
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 28  

 205   1              PWM_init();      //PWM³õÊ¼»¯
 206   1              PWM0_set(0xFB);
 207   1              
 208   1              Timer_INT();
 209   1      
 210   1              for(i=0;i<34;i++) 
 211   1                      LEDBuf[i]=0x00;
 212   1              FontDisp();
 213   1      
 214   1              while(520)
 215   1              {
 216   2                      for(i=0;i<65;i++)
 217   2                      {  
 218   3                              dd[i].real=(GetADCResult(0)+GetADCResult(1))<<gain;       //¶ÁÈ¡ad½á¹û²¢·Å´ó£»
 219   3                      }
 220   2      
 221   2                       processfft();//¸µÁ¢Ò¶±ä»¯¼°´¦Àí
 222   2      
 223   2                       ///////////////////TouchKey//////////////////////////
 224   2                       while(P16==1)                                     //ÒÀ¾Ý£ºÂö³å ¸ÉÈÅ³ÖÐøÊ±¼ä¶Ì£»
 225   2                       {      
 226   3                              if(CBeep)P14=0;
 227   3                              if(++TouchKey>0x0000FF00)break; 
 228   3                       }
 229   2                       P14=1;
 230   2      
 231   2                       if(P16==1)
 232   2                       {
 233   3                              if(++Menu==4)Menu=0;
 234   3      
 235   3                              P14=0;
 236   3                              P47=1;
 237   3                              Delays(7000);     
 238   3                              P14=1;
 239   3                              P47=0;          
 240   3                       }      
 241   2                              TouchKey=0;
 242   2                       //////////////////////////////////////////////
 243   2      
 244   2                      if(P17==0)CBeep=!CBeep;
 245   2      
 246   2                       if(dd[2].real<32)
 247   2                       {
 248   3                               if(++Count==300)         //µçÆ½Öµ¹ýÐ¡£¬Õâ½µµÍgain£¬¼õÉÙÔëÒôµÄµçÆ½ÏÔÊ¾£»
 249   3                               {
 250   4                                      Count=0;
 251   4                                      //if(++Menu==4)Menu=0;          //ÇÐ»»Menu£¬ÏÔÊ¾·½Ê½£»
 252   4                                      gain=6;
 253   4      
 254   4                                      P14=0;                    //Beep
 255   4                                      Delays(1000);
 256   4                                      P14=1;
 257   4                               }
 258   3                       }
 259   2                       else 
 260   2                       {
 261   3                               Count=1;
 262   3              
 263   3                               if(++num==0xAF)                         //²¥·ÅÊ±£¬Auto gain£»
 264   3                               {
 265   4                                      num=0;
 266   4      
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 29  

 267   4                                      P14=0;                             //Beep
 268   4                                      Delays(700);
 269   4                                      P14=1;
 270   4                                                                 //×Ô¶¯ÔöÒæ£»Automatic gain;
 271   4                                      Cgain=dd[2].real/32;
 272   4                                      if(7<Cgain<=8) 
 273   4                                      {
 274   5                                              gain=4;
 275   5                                              
 276   5                                      }
 277   4                                      else if(4<Cgain<=6) 
 278   4                                      {
 279   5                                              gain=5;
 280   5                                              
 281   5                                      }
 282   4                                      else if(2<Cgain<=4) 
 283   4                                      {
 284   5                                              gain=6;
 285   5                                      }
 286   4                                      else 
 287   4                                      {
 288   5                                              gain=7;
 289   5                              
 290   5                                      }
 291   4              
 292   4                               }
 293   3      
 294   3                        }              
 295   2              }
 296   1              while(1);
 297   1      }
 298          
 299          
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 30  

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION Com00C1 (BEGIN)
0000         L?0194:
0000         L?0195:
0000 75F008            MOV     B,#08H
0003 E500        R     MOV     A,pt
0005 A4                MUL     AB
0006 2400        R     ADD     A,#LOW dd
0008 F582              MOV     DPL,A
000A E5F0              MOV     A,B
000C 3400        R     ADDC    A,#HIGH dd
000E F583              MOV     DPH,A
0010 E0                MOVX    A,@DPTR
0011 FC                MOV     R4,A
0012 A3                INC     DPTR
0013 E0                MOVX    A,@DPTR
0014 FD                MOV     R5,A
0015 A3                INC     DPTR
0016 E0                MOVX    A,@DPTR
0017 FE                MOV     R6,A
0018 A3                INC     DPTR
0019 E0                MOVX    A,@DPTR
001A FF                MOV     R7,A
001B E4                CLR     A
001C FB                MOV     R3,A
001D FA                MOV     R2,A
001E F9                MOV     R1,A
001F 7842              MOV     R0,#042H
0021 120000      E     LCALL   ?C?FPDIV
0024 E4                CLR     A
0025 FB                MOV     R3,A
0026 FA                MOV     R2,A
0027 7980              MOV     R1,#080H
0029 783F              MOV     R0,#03FH
002B 120000      E     LCALL   ?C?FPADD
002E 020000      E     LJMP    ?C?CASTF
0031         L?0196:
0031         L?0197:
0031 75F008            MOV     B,#08H
0034 A4                MUL     AB
0035         L?0198:
0035 FF                MOV     R7,A
0036         L?0199:
0036 900000      R     MOV     DPTR,#xin
0039 E0                MOVX    A,@DPTR
003A FB                MOV     R3,A
003B A3                INC     DPTR
003C E0                MOVX    A,@DPTR
003D FA                MOV     R2,A
003E A3                INC     DPTR
003F E0                MOVX    A,@DPTR
0040 22                RET     
0041         L?0200:
0041 F583              MOV     DPH,A
0043 120000      E     LCALL   ?C?LLDCODE
0046 900000      R     MOV     DPTR,#b1+04H
0049         L?0201:
0049 E0                MOVX    A,@DPTR
004A F8                MOV     R0,A
004B A3                INC     DPTR
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 31  

004C E0                MOVX    A,@DPTR
004D F9                MOV     R1,A
004E A3                INC     DPTR
004F E0                MOVX    A,@DPTR
0050 FA                MOV     R2,A
0051 A3                INC     DPTR
0052 E0                MOVX    A,@DPTR
0053 FB                MOV     R3,A
0054 020000      E     LJMP    ?C?FPMUL
0057         L?0202:
0057 7E00              MOV     R6,#00H
0059 7F08              MOV     R7,#08H
005B 120000      E     LCALL   ?C?COPY
005E E500        R     MOV     A,k
0060         L?0203:
0060 2401              ADD     A,#01H
0062 FF                MOV     R7,A
0063 E4                CLR     A
0064 33                RLC     A
0065 FE                MOV     R6,A
0066 EF                MOV     A,R7
0067 7803              MOV     R0,#03H
0069 22                RET     
006A         L?0204:
006A E500        R     MOV     A,pt
006C         L?0205:
006C 75F008            MOV     B,#08H
006F A4                MUL     AB
0070 2400        R     ADD     A,#LOW dd
0072 F582              MOV     DPL,A
0074 E5F0              MOV     A,B
0076 3400        R     ADDC    A,#HIGH dd
0078 F583              MOV     DPH,A
007A 22                RET     
007B         L?0206:
007B 7400        R     MOV     A,#LOW LEDBuf
007D 2500        R     ADD     A,i
007F F8                MOV     R0,A
0080 E6                MOV     A,@R0
0081 5500        R     ANL     A,Y
0083 F580              MOV     P0,A
0085 AF00        R     MOV     R7,DelayTime
0087 7E00              MOV     R6,#00H
0089 120000      R     LCALL   _Delays
008C E4                CLR     A
008D F580              MOV     P0,A
008F E500        R     MOV     A,Y
0091 25E0              ADD     A,ACC
0093 F500        R     MOV     Y,A
0095 22                RET     
0096         L?0207:
0096 7400        R     MOV     A,#LOW LEDBuf
0098 2500        R     ADD     A,pt
009A F8                MOV     R0,A
009B 76FF              MOV     @R0,#0FFH
009D         L?0208:
009D 7400        R     MOV     A,#LOW refreshflag
009F 2500        R     ADD     A,pt
00A1 F8                MOV     R0,A
00A2 E6                MOV     A,@R0
00A3 22                RET     
00A4         L?0209:
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 32  

00A4 E0                MOVX    A,@DPTR
00A5 FC                MOV     R4,A
00A6 A3                INC     DPTR
00A7 E0                MOVX    A,@DPTR
00A8 FD                MOV     R5,A
00A9 A3                INC     DPTR
00AA E0                MOVX    A,@DPTR
00AB FE                MOV     R6,A
00AC A3                INC     DPTR
00AD E0                MOVX    A,@DPTR
00AE FF                MOV     R7,A
00AF A804              MOV     R0,AR4
00B1 A905              MOV     R1,AR5
00B3 AA06              MOV     R2,AR6
00B5 FB                MOV     R3,A
00B6 020000      E     LJMP    ?C?FPMUL
00B9         L?0210:
00B9         L?0211:
00B9 900000      R     MOV     DPTR,#b2
00BC E0                MOVX    A,@DPTR
00BD 75F008            MOV     B,#08H
00C0 A4                MUL     AB
00C1 22                RET     
00C2         L?0212:
00C2 75F008            MOV     B,#08H
00C5 E500        R     MOV     A,pt
00C7 A4                MUL     AB
00C8 2400        R     ADD     A,#LOW dd+04H
00CA F582              MOV     DPL,A
00CC E5F0              MOV     A,B
00CE 3400        R     ADDC    A,#HIGH dd+04H
00D0 F583              MOV     DPH,A
00D2 22                RET     
00D3         L?0213:
00D3 7B00              MOV     R3,#00H
00D5         L?0214:
00D5 7E00              MOV     R6,#00H
00D7 7F08              MOV     R7,#08H
00D9 020000      E     LJMP    ?C?COPY
00DC         L?0215:
00DC 7F07              MOV     R7,#07H
00DE 7E00              MOV     R6,#00H
00E0 120000      R     LCALL   _Delays
00E3 E500        R     MOV     A,X
00E5 25E0              ADD     A,ACC
00E7 F500        R     MOV     X,A
00E9 22                RET     
00EA         L?0216:
00EA F9                MOV     R1,A
00EB E500        R     MOV     A,i
00ED         L?0217:
00ED 75F008            MOV     B,#08H
00F0 A4                MUL     AB
00F1 F582              MOV     DPL,A
00F3 22                RET     
00F4         L?0218:
00F4 7400        R     MOV     A,#LOW LEDBuf
00F6 2500        R     ADD     A,pt
00F8 F8                MOV     R0,A
00F9 E6                MOV     A,@R0
00FA F4                CPL     A
00FB F6                MOV     @R0,A
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 33  

00FC 0500        R     INC     pt
00FE 0500        R     INC     pt
0100 22                RET     
0101         L?0219:
0101         L?0220:
0101 7400        R     MOV     A,#LOW LEDBuf
0103 2500        R     ADD     A,pt
0105 F8                MOV     R0,A
0106 76FF              MOV     @R0,#0FFH
0108 22                RET     
0109         L?0221:
0109 E500        R     MOV     A,X
010B 25E0              ADD     A,ACC
010D F500        R     MOV     X,A
010F 0500        R     INC     i
0111 0500        R     INC     i
0113 22                RET     
0114         L?0222:
0114 2F                ADD     A,R7
0115 F9                MOV     R1,A
0116 EA                MOV     A,R2
0117 3E                ADDC    A,R6
0118 A801              MOV     R0,AR1
011A FC                MOV     R4,A
011B AD03              MOV     R5,AR3
011D 22                RET     
011E         L?0223:
011E         L?0224:
011E 2F                ADD     A,R7
011F F9                MOV     R1,A
0120 EA                MOV     A,R2
0121 35F0              ADDC    A,B
0123 FA                MOV     R2,A
0124 22                RET     
0125         L?0225:
0125 900000      R     MOV     DPTR,#x
0128 120000      E     LCALL   ?C?IILDX
012B FE                MOV     R6,A
012C E5F0              MOV     A,B
012E 22                RET     
             ; FUNCTION Com00C1 (END)

             ; FUNCTION _Delays (BEGIN)
                                           ; SOURCE LINE # 21
;---- Variable 'j' assigned to Register 'R4/R5' ----
;---- Variable 't' assigned to Register 'R6/R7' ----
                                           ; SOURCE LINE # 22
0000         ?C0001:
                                           ; SOURCE LINE # 24
0000 EF                MOV     A,R7
0001 1F                DEC     R7
0002 7001              JNZ     ?C0174
0004 1E                DEC     R6
0005         ?C0174:
0005 14                DEC     A
0006 4E                ORL     A,R6
0007 6013              JZ      ?C0006
                                           ; SOURCE LINE # 25
0009 E4                CLR     A
000A FC                MOV     R4,A
000B FD                MOV     R5,A
000C         ?C0003:
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 34  

000C C3                CLR     C
000D ED                MOV     A,R5
000E 9405              SUBB    A,#05H
0010 EC                MOV     A,R4
0011 9400              SUBB    A,#00H
0013 50EB              JNC     ?C0001
0015 0D                INC     R5
0016 BD0001            CJNE    R5,#00H,?C0175
0019 0C                INC     R4
001A         ?C0175:
001A 80F0              SJMP    ?C0003
                                           ; SOURCE LINE # 26
001C         ?C0006:
001C 22                RET     
             ; FUNCTION _Delays (END)

             ; FUNCTION _Delaysms (BEGIN)
                                           ; SOURCE LINE # 27
;---- Variable 'j' assigned to Register 'R4/R5' ----
;---- Variable 't' assigned to Register 'R6/R7' ----
                                           ; SOURCE LINE # 28
0000         ?C0007:
                                           ; SOURCE LINE # 30
0000 EF                MOV     A,R7
0001 1F                DEC     R7
0002 7001              JNZ     ?C0176
0004 1E                DEC     R6
0005         ?C0176:
0005 14                DEC     A
0006 4E                ORL     A,R6
0007 6013              JZ      ?C0012
                                           ; SOURCE LINE # 31
0009 E4                CLR     A
000A FC                MOV     R4,A
000B FD                MOV     R5,A
000C         ?C0009:
000C C3                CLR     C
000D ED                MOV     A,R5
000E 940F              SUBB    A,#0FH
0010 EC                MOV     A,R4
0011 9400              SUBB    A,#00H
0013 50EB              JNC     ?C0007
0015 0D                INC     R5
0016 BD0001            CJNE    R5,#00H,?C0177
0019 0C                INC     R4
001A         ?C0177:
001A 80F0              SJMP    ?C0009
                                           ; SOURCE LINE # 32
001C         ?C0012:
001C 22                RET     
             ; FUNCTION _Delaysms (END)

             ; FUNCTION _ShowResult (BEGIN)
                                           ; SOURCE LINE # 41
0000 900000      R     MOV     DPTR,#ch
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 42
                                           ; SOURCE LINE # 43
0005 120000      R     LCALL   _SendData
                                           ; SOURCE LINE # 44
0008 900000      R     MOV     DPTR,#ch
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 35  

000B E0                MOVX    A,@DPTR
000C FF                MOV     R7,A
000D 120000      R     LCALL   _GetADCResult
0010 020000      R     LJMP    _SendData
             ; FUNCTION _ShowResult (END)

             ; FUNCTION _GetADCResult (BEGIN)
                                           ; SOURCE LINE # 53
;---- Variable 'ch' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 54
                                           ; SOURCE LINE # 55
0000 EF                MOV     A,R7
0001 4488              ORL     A,#088H
0003 F5BC              MOV     ADC_CONTR,A
                                           ; SOURCE LINE # 56
0005 00                NOP     
                                           ; SOURCE LINE # 57
0006 00                NOP     
                                           ; SOURCE LINE # 58
0007 00                NOP     
                                           ; SOURCE LINE # 59
0008 00                NOP     
0009         ?C0014:
                                           ; SOURCE LINE # 60
0009 E5BC              MOV     A,ADC_CONTR
000B 30E4FB            JNB     ACC.4,?C0014
000E         ?C0015:
                                           ; SOURCE LINE # 61
000E 53BCEF            ANL     ADC_CONTR,#0EFH
                                           ; SOURCE LINE # 63
0011 AFBD              MOV     R7,ADC_RES
                                           ; SOURCE LINE # 64
0013         ?C0016:
0013 22                RET     
             ; FUNCTION _GetADCResult (END)

             ; FUNCTION InitUart (BEGIN)
                                           ; SOURCE LINE # 69
                                           ; SOURCE LINE # 70
                                           ; SOURCE LINE # 71
0000 75985A            MOV     SCON,#05AH
                                           ; SOURCE LINE # 72
0003 758920            MOV     TMOD,#020H
                                           ; SOURCE LINE # 73
0006 758BFB            MOV     TL1,#0FBH
0009 758DFB            MOV     TH1,#0FBH
                                           ; SOURCE LINE # 74
000C D28E              SETB    TR1
                                           ; SOURCE LINE # 75
000E 22                RET     
             ; FUNCTION InitUart (END)

             ; FUNCTION InitADC (BEGIN)
                                           ; SOURCE LINE # 80
                                           ; SOURCE LINE # 81
                                           ; SOURCE LINE # 83
0000 E4                CLR     A
0001 F5BD              MOV     ADC_RES,A
                                           ; SOURCE LINE # 84
0003 75BC80            MOV     ADC_CONTR,#080H
                                           ; SOURCE LINE # 85
0006 7F02              MOV     R7,#02H
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 36  

0008 FE                MOV     R6,A
0009 020000      R     LJMP    _Delay
             ; FUNCTION InitADC (END)

             ; FUNCTION _SendData (BEGIN)
                                           ; SOURCE LINE # 93
;---- Variable 'dat' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 94
0000         ?C0019:
                                           ; SOURCE LINE # 95
0000 3099FD            JNB     TI,?C0019
0003         ?C0020:
                                           ; SOURCE LINE # 96
0003 C299              CLR     TI
                                           ; SOURCE LINE # 97
0005 8F99              MOV     SBUF,R7
                                           ; SOURCE LINE # 98
0007 22                RET     
             ; FUNCTION _SendData (END)

             ; FUNCTION _Delay (BEGIN)
                                           ; SOURCE LINE # 103
;---- Variable 'x' assigned to Register 'R4/R5' ----
;---- Variable 'n' assigned to Register 'R6/R7' ----
                                           ; SOURCE LINE # 104
0000         ?C0022:
                                           ; SOURCE LINE # 107
0000 EF                MOV     A,R7
0001 1F                DEC     R7
0002 AA06              MOV     R2,AR6
0004 7001              JNZ     ?C0178
0006 1E                DEC     R6
0007         ?C0178:
0007 4A                ORL     A,R2
0008 6010              JZ      ?C0026
                                           ; SOURCE LINE # 108
                                           ; SOURCE LINE # 109
000A 7C13              MOV     R4,#013H
000C 7D88              MOV     R5,#088H
000E         ?C0024:
                                           ; SOURCE LINE # 110
000E ED                MOV     A,R5
000F 1D                DEC     R5
0010 AA04              MOV     R2,AR4
0012 7001              JNZ     ?C0179
0014 1C                DEC     R4
0015         ?C0179:
0015 4A                ORL     A,R2
0016 60E8              JZ      ?C0022
0018 80F4              SJMP    ?C0024
                                           ; SOURCE LINE # 112
001A         ?C0026:
001A 22                RET     
             ; FUNCTION _Delay (END)

             ; FUNCTION FontDisp (BEGIN)
                                           ; SOURCE LINE # 26
                                           ; SOURCE LINE # 27
                                           ; SOURCE LINE # 30
0000 E4                CLR     A
0001 F500        R     MOV     ii,A
0003         ?C0027:
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 37  

                                           ; SOURCE LINE # 31
                                           ; SOURCE LINE # 32
0003 750002      R     MOV     i,#02H
0006 E4                CLR     A
0007 F500        R     MOV     count,A
0009         ?C0030:
0009 E500        R     MOV     A,i
000B C3                CLR     C
000C 9423              SUBB    A,#023H
000E 5018              JNC     ?C0031
                                           ; SOURCE LINE # 33
                                           ; SOURCE LINE # 34
0010 E500        R     MOV     A,count
0012 2500        R     ADD     A,ii
0014 900000      R     MOV     DPTR,#FontLib
0017 93                MOVC    A,@A+DPTR
0018 FF                MOV     R7,A
0019 7400        R     MOV     A,#LOW LEDBuf
001B 2500        R     ADD     A,i
001D F8                MOV     R0,A
001E A607              MOV     @R0,AR7
                                           ; SOURCE LINE # 35
0020 0500        R     INC     i
0022 0500        R     INC     i
0024 0500        R     INC     count
0026 80E1              SJMP    ?C0030
0028         ?C0031:
                                           ; SOURCE LINE # 36
0028 7F28              MOV     R7,#028H
002A 7E23              MOV     R6,#023H
002C 120000      R     LCALL   _Delaysms
                                           ; SOURCE LINE # 37
002F 0500        R     INC     ii
0031 E500        R     MOV     A,ii
0033 C3                CLR     C
0034 949C              SUBB    A,#09CH
0036 40CB              JC      ?C0027
                                           ; SOURCE LINE # 39
0038         ?C0033:
0038 22                RET     
             ; FUNCTION FontDisp (END)

             ; FUNCTION ee (BEGIN)
                                           ; SOURCE LINE # 23
                                           ; SOURCE LINE # 24
                                           ; SOURCE LINE # 25
0000 120000      R     LCALL   L?0210
0003 2400        R     ADD     A,#LOW iw+04H
0005 F582              MOV     DPL,A
0007 E4                CLR     A
0008 3400        R     ADDC    A,#HIGH iw+04H
000A 120000      R     LCALL   L?0200
000D C004              PUSH    AR4
000F C005              PUSH    AR5
0011 C006              PUSH    AR6
0013 C007              PUSH    AR7
0015 120000      R     LCALL   L?0210
0018 2400        R     ADD     A,#LOW iw
001A F582              MOV     DPL,A
001C E4                CLR     A
001D 3400        R     ADDC    A,#HIGH iw
001F F583              MOV     DPH,A
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 38  

0021 120000      E     LCALL   ?C?LLDCODE
0024 900000      R     MOV     DPTR,#b1
0027 120000      R     LCALL   L?0201
002A D003              POP     AR3
002C D002              POP     AR2
002E D001              POP     AR1
0030 D000              POP     AR0
0032 120000      E     LCALL   ?C?FPSUB
0035 8F00        R     MOV     temp+03H,R7
0037 8E00        R     MOV     temp+02H,R6
0039 8D00        R     MOV     temp+01H,R5
003B 8C00        R     MOV     temp,R4
                                           ; SOURCE LINE # 26
003D 120000      R     LCALL   L?0211
0040 2400        R     ADD     A,#LOW iw
0042 F582              MOV     DPL,A
0044 E4                CLR     A
0045 3400        R     ADDC    A,#HIGH iw
0047 120000      R     LCALL   L?0200
004A C004              PUSH    AR4
004C C005              PUSH    AR5
004E C006              PUSH    AR6
0050 C007              PUSH    AR7
0052 120000      R     LCALL   L?0211
0055 2400        R     ADD     A,#LOW iw+04H
0057 F582              MOV     DPL,A
0059 E4                CLR     A
005A 3400        R     ADDC    A,#HIGH iw+04H
005C F583              MOV     DPH,A
005E 120000      E     LCALL   ?C?LLDCODE
0061 900000      R     MOV     DPTR,#b1
0064 120000      R     LCALL   L?0201
0067 D003              POP     AR3
0069 D002              POP     AR2
006B D001              POP     AR1
006D D000              POP     AR0
006F 120000      E     LCALL   ?C?FPADD
0072 8F00        R     MOV     temp+07H,R7
0074 8E00        R     MOV     temp+06H,R6
0076 8D00        R     MOV     temp+05H,R5
0078 8C00        R     MOV     temp+04H,R4
                                           ; SOURCE LINE # 27
007A 22                RET     
             ; FUNCTION ee (END)

             ; FUNCTION _mypow (BEGIN)
                                           ; SOURCE LINE # 29
;---- Variable 'ntop' assigned to Register 'R3' ----
0000 AB05              MOV     R3,AR5
;---- Variable 'nbottom' assigned to Register 'R2' ----
0002 AA07              MOV     R2,AR7
                                           ; SOURCE LINE # 30
                                           ; SOURCE LINE # 31
0004 750000      R     MOV     result,#00H
0007 750001      R     MOV     result+01H,#01H
                                           ; SOURCE LINE # 33
000A E4                CLR     A
000B F500        R     MOV     t,A
000D         ?C0035:
000D E500        R     MOV     A,t
000F C3                CLR     C
0010 9B                SUBB    A,R3
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 39  

0011 5013              JNC     ?C0036
0013 AE00        R     MOV     R6,result
0015 AF00        R     MOV     R7,result+01H
0017 EA                MOV     A,R2
0018 FD                MOV     R5,A
0019 7C00              MOV     R4,#00H
001B 120000      E     LCALL   ?C?IMUL
001E 8E00        R     MOV     result,R6
0020 8F00        R     MOV     result+01H,R7
0022 0500        R     INC     t
0024 80E7              SJMP    ?C0035
0026         ?C0036:
                                           ; SOURCE LINE # 34
0026 AE00        R     MOV     R6,result
0028 AF00        R     MOV     R7,result+01H
                                           ; SOURCE LINE # 35
002A         ?C0038:
002A 22                RET     
             ; FUNCTION _mypow (END)

             ; FUNCTION _fft (BEGIN)
                                           ; SOURCE LINE # 37
0000 900000      R     MOV     DPTR,#xin
0003 EB                MOV     A,R3
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 EA                MOV     A,R2
0007 F0                MOVX    @DPTR,A
0008 A3                INC     DPTR
0009 E9                MOV     A,R1
000A F0                MOVX    @DPTR,A
000B A3                INC     DPTR
000C ED                MOV     A,R5
000D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 38
                                           ; SOURCE LINE # 41
000E F500        R     MOV     fftnum,A
                                           ; SOURCE LINE # 42
0010 750001      R     MOV     m,#01H
0013         ?C0039:
0013 AF00        R     MOV     R7,fftnum
0015 7E01              MOV     R6,#01H
0017 EF                MOV     A,R7
0018 7801              MOV     R0,#01H
001A 08                INC     R0
001B 8002              SJMP    ?C0181
001D         ?C0180:
001D C3                CLR     C
001E 13                RRC     A
001F         ?C0181:
001F D8FC              DJNZ    R0,?C0180
0021 F500        R     MOV     fftnum,A
0023 6401              XRL     A,#01H
0025 6004              JZ      ?C0040
0027 0500        R     INC     m
0029 80E8              SJMP    ?C0039
002B         ?C0040:
                                           ; SOURCE LINE # 43
002B E4                CLR     A
002C F500        R     MOV     k,A
002E         ?C0042:
002E 900000      R     MOV     DPTR,#N
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 40  

0031 E0                MOVX    A,@DPTR
0032 14                DEC     A
0033 FF                MOV     R7,A
0034 E500        R     MOV     A,k
0036 D3                SETB    C
0037 9F                SUBB    A,R7
0038 4003              JC      $ + 5H
003A 020000      R     LJMP    ?C0043
                                           ; SOURCE LINE # 44
                                           ; SOURCE LINE # 45
003D 850000      R     MOV     n,k
                                           ; SOURCE LINE # 46
0040 E4                CLR     A
0041 F500        R     MOV     j,A
                                           ; SOURCE LINE # 47
0043 850000      R     MOV     i,m
0046         ?C0045:
0046 E500        R     MOV     A,i
0048 D3                SETB    C
0049 9400              SUBB    A,#00H
004B 4020              JC      ?C0046
                                           ; SOURCE LINE # 48
                                           ; SOURCE LINE # 49
004D E500        R     MOV     A,i
004F 14                DEC     A
0050 FF                MOV     R7,A
0051 E500        R     MOV     A,n
0053 5401              ANL     A,#01H
0055 FE                MOV     R6,A
0056 A807              MOV     R0,AR7
0058 08                INC     R0
0059 8002              SJMP    ?C0183
005B         ?C0182:
005B C3                CLR     C
005C 33                RLC     A
005D         ?C0183:
005D D8FC              DJNZ    R0,?C0182
005F 2500        R     ADD     A,j
0061 F500        R     MOV     j,A
                                           ; SOURCE LINE # 50
0063 E500        R     MOV     A,n
0065 C3                CLR     C
0066 13                RRC     A
0067 F500        R     MOV     n,A
                                           ; SOURCE LINE # 51
0069 1500        R     DEC     i
006B 80D9              SJMP    ?C0045
006D         ?C0046:
                                           ; SOURCE LINE # 52
006D E500        R     MOV     A,k
006F C3                CLR     C
0070 9500        R     SUBB    A,j
0072 5061              JNC     ?C0044
0074 E500        R     MOV     A,j
0076 120000      R     LCALL   L?0203
0079         ?C0184:
0079 C3                CLR     C
007A 33                RLC     A
007B CE                XCH     A,R6
007C 33                RLC     A
007D CE                XCH     A,R6
007E D8F9              DJNZ    R0,?C0184
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 41  

0080 120000      R     LCALL   L?0198
0083 2F                ADD     A,R7
0084 F9                MOV     R1,A
0085 EA                MOV     A,R2
0086 3E                ADDC    A,R6
0087 FA                MOV     R2,A
0088 7800        R     MOV     R0,#LOW t
008A 7C00        R     MOV     R4,#HIGH t
008C 7D00              MOV     R5,#00H
008E 120000      R     LCALL   L?0202
0091         ?C0185:
0091 C3                CLR     C
0092 33                RLC     A
0093 CE                XCH     A,R6
0094 33                RLC     A
0095 CE                XCH     A,R6
0096 D8F9              DJNZ    R0,?C0185
0098 120000      R     LCALL   L?0198
009B 2F                ADD     A,R7
009C F9                MOV     R1,A
009D EA                MOV     A,R2
009E 3E                ADDC    A,R6
009F FA                MOV     R2,A
00A0 C003              PUSH    AR3
00A2 C002              PUSH    AR2
00A4 C001              PUSH    AR1
00A6 E500        R     MOV     A,j
00A8 120000      R     LCALL   L?0203
00AB         ?C0186:
00AB C3                CLR     C
00AC 33                RLC     A
00AD CE                XCH     A,R6
00AE 33                RLC     A
00AF CE                XCH     A,R6
00B0 D8F9              DJNZ    R0,?C0186
00B2 120000      R     LCALL   L?0198
00B5 120000      R     LCALL   L?0222
00B8 D001              POP     AR1
00BA D002              POP     AR2
00BC D003              POP     AR3
00BE 120000      R     LCALL   L?0202
00C1         ?C0187:
00C1 C3                CLR     C
00C2 33                RLC     A
00C3 CE                XCH     A,R6
00C4 33                RLC     A
00C5 CE                XCH     A,R6
00C6 D8F9              DJNZ    R0,?C0187
00C8 120000      R     LCALL   L?0198
00CB 120000      R     LCALL   L?0222
00CE 7A00        R     MOV     R2,#HIGH t
00D0 7900        R     MOV     R1,#LOW t
00D2 120000      R     LCALL   L?0213
                                           ; SOURCE LINE # 53
00D5         ?C0044:
00D5 0500        R     INC     k
00D7 020000      R     LJMP    ?C0042
00DA         ?C0043:
                                           ; SOURCE LINE # 54
00DA 750001      R     MOV     l,#01H
00DD         ?C0049:
00DD E500        R     MOV     A,l
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 42  

00DF D3                SETB    C
00E0 9500        R     SUBB    A,m
00E2 4003              JC      $ + 5H
00E4 020000      R     LJMP    ?C0058
                                           ; SOURCE LINE # 55
                                           ; SOURCE LINE # 56
00E7 AD00        R     MOV     R5,l
00E9 7F02              MOV     R7,#02H
00EB 120000      R     LCALL   _mypow
00EE 8F00        R     MOV     disbuff,R7
                                           ; SOURCE LINE # 57
00F0 E500        R     MOV     A,disbuff
00F2 C3                CLR     C
00F3 13                RRC     A
00F4 F500        R     MOV     dispos,A
                                           ; SOURCE LINE # 58
00F6 750001      R     MOV     j,#01H
00F9         ?C0052:
00F9 E500        R     MOV     A,j
00FB D3                SETB    C
00FC 9500        R     SUBB    A,dispos
00FE 4003              JC      $ + 5H
0100 020000      R     LJMP    ?C0051
                                           ; SOURCE LINE # 59
0103 850000      R     MOV     i,j
0106         ?C0055:
0106 900000      R     MOV     DPTR,#N
0109 E0                MOVX    A,@DPTR
010A FF                MOV     R7,A
010B E500        R     MOV     A,i
010D C3                CLR     C
010E 9F                SUBB    A,R7
010F 4003              JC      $ + 5H
0111 020000      R     LJMP    ?C0054
                                           ; SOURCE LINE # 60
                                           ; SOURCE LINE # 61
0114 E500        R     MOV     A,i
0116 2500        R     ADD     A,dispos
0118 F500        R     MOV     dissec,A
                                           ; SOURCE LINE # 62
011A 120000      R     LCALL   L?0196
011D 120000      R     LCALL   L?0223
0120 7800        R     MOV     R0,#LOW ?ee?BYTE
0122 7C00        R     MOV     R4,#HIGH ?ee?BYTE
0124 7D01              MOV     R5,#01H
0126 120000      R     LCALL   L?0214
0129 E500        R     MOV     A,j
012B 24FF              ADD     A,#0FFH
012D FF                MOV     R7,A
012E E4                CLR     A
012F 34FF              ADDC    A,#0FFH
0131 FE                MOV     R6,A
0132 900000      R     MOV     DPTR,#N
0135 E0                MOVX    A,@DPTR
0136 FD                MOV     R5,A
0137 7C00              MOV     R4,#00H
0139 120000      E     LCALL   ?C?IMUL
013C AD00        R     MOV     R5,disbuff
013E 120000      E     LCALL   ?C?UIDIV
0141 900000      R     MOV     DPTR,#?ee?BYTE+08H
0144 EF                MOV     A,R7
0145 F0                MOVX    @DPTR,A
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 43  

0146 120000      R     LCALL   ee
                                           ; SOURCE LINE # 63
0149 7800        R     MOV     R0,#LOW t
014B 7C00        R     MOV     R4,#HIGH t
014D 7D00              MOV     R5,#00H
014F 7A00        R     MOV     R2,#HIGH temp
0151 7900        R     MOV     R1,#LOW temp
0153 120000      R     LCALL   L?0213
                                           ; SOURCE LINE # 64
0156 120000      R     LCALL   L?0199
0159 120000      R     LCALL   L?0216
015C 85F083            MOV     DPH,B
015F 120000      E     LCALL   ?C?LLDOPTR
0162 AB00        R     MOV     R3,t+03H
0164 AA00        R     MOV     R2,t+02H
0166 A900        R     MOV     R1,t+01H
0168 A800        R     MOV     R0,t
016A 120000      E     LCALL   ?C?FPSUB
016D 120000      R     LCALL   L?0199
0170 F9                MOV     R1,A
0171 E500        R     MOV     A,dissec
0173 120000      R     LCALL   L?0217
0176 85F083            MOV     DPH,B
0179 120000      E     LCALL   ?C?LSTOPTR
                                           ; SOURCE LINE # 65
017C E500        R     MOV     A,i
017E 75F008            MOV     B,#08H
0181 A4                MUL     AB
0182 29                ADD     A,R1
0183 F9                MOV     R1,A
0184 EA                MOV     A,R2
0185 35F0              ADDC    A,B
0187 FA                MOV     R2,A
0188 900004            MOV     DPTR,#04H
018B 120000      E     LCALL   ?C?LLDOPTR
018E AB00        R     MOV     R3,t+07H
0190 AA00        R     MOV     R2,t+06H
0192 A900        R     MOV     R1,t+05H
0194 A800        R     MOV     R0,t+04H
0196 120000      E     LCALL   ?C?FPSUB
0199 C006              PUSH    AR6
019B C007              PUSH    AR7
019D E500        R     MOV     A,dissec
019F 120000      R     LCALL   L?0196
01A2 120000      R     LCALL   L?0223
01A5 900004            MOV     DPTR,#04H
01A8 D007              POP     AR7
01AA D006              POP     AR6
01AC 120000      E     LCALL   ?C?LSTOPTR
                                           ; SOURCE LINE # 66
01AF 120000      R     LCALL   L?0199
01B2 120000      R     LCALL   L?0216
01B5 E9                MOV     A,R1
01B6 2582              ADD     A,DPL
01B8 F9                MOV     R1,A
01B9 EA                MOV     A,R2
01BA 35F0              ADDC    A,B
01BC FA                MOV     R2,A
01BD C003              PUSH    AR3
01BF C002              PUSH    AR2
01C1 C001              PUSH    AR1
01C3 120000      E     LCALL   ?C?LLDPTR
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 44  

01C6 AB00        R     MOV     R3,t+03H
01C8 AA00        R     MOV     R2,t+02H
01CA A900        R     MOV     R1,t+01H
01CC A800        R     MOV     R0,t
01CE 120000      E     LCALL   ?C?FPADD
01D1 D001              POP     AR1
01D3 D002              POP     AR2
01D5 D003              POP     AR3
01D7 120000      E     LCALL   ?C?LSTPTR
                                           ; SOURCE LINE # 67
01DA E500        R     MOV     A,i
01DC 120000      R     LCALL   L?0197
01DF 120000      R     LCALL   L?0224
01E2 E9                MOV     A,R1
01E3 2404              ADD     A,#04H
01E5 F9                MOV     R1,A
01E6 E4                CLR     A
01E7 3A                ADDC    A,R2
01E8 FA                MOV     R2,A
01E9 C003              PUSH    AR3
01EB C002              PUSH    AR2
01ED C001              PUSH    AR1
01EF 120000      E     LCALL   ?C?LLDPTR
01F2 AB00        R     MOV     R3,t+07H
01F4 AA00        R     MOV     R2,t+06H
01F6 A900        R     MOV     R1,t+05H
01F8 A800        R     MOV     R0,t+04H
01FA 120000      E     LCALL   ?C?FPADD
01FD D001              POP     AR1
01FF D002              POP     AR2
0201 D003              POP     AR3
0203 120000      E     LCALL   ?C?LSTPTR
                                           ; SOURCE LINE # 68
0206 E500        R     MOV     A,disbuff
0208 2500        R     ADD     A,i
020A F500        R     MOV     i,A
020C 020000      R     LJMP    ?C0055
020F         ?C0054:
020F 0500        R     INC     j
0211 020000      R     LJMP    ?C0052
                                           ; SOURCE LINE # 69
0214         ?C0051:
0214 0500        R     INC     l
0216 020000      R     LJMP    ?C0049
                                           ; SOURCE LINE # 70
0219         ?C0058:
0219 22                RET     
             ; FUNCTION _fft (END)

             ; FUNCTION processfft (BEGIN)
                                           ; SOURCE LINE # 75
                                           ; SOURCE LINE # 76
                                           ; SOURCE LINE # 77
0000 E4                CLR     A
0001 F500        R     MOV     pt,A
                                           ; SOURCE LINE # 79
0003 750001      R     MOV     pt,#01H
0006         ?C0059:
                                           ; SOURCE LINE # 80
                                           ; SOURCE LINE # 81
0006 120000      R     LCALL   L?0212
0009 120000      E     LCALL   ?C?LSTKXDATA
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 45  

000C 00                DB      00H
000D 00                DB      00H
000E 00                DB      00H
000F 00                DB      00H
                                           ; SOURCE LINE # 82
0010 0500        R     INC     pt
0012 E500        R     MOV     A,pt
0014 B441EF            CJNE    A,#041H,?C0059
0017         ?C0060:
                                           ; SOURCE LINE # 83
0017 7B01              MOV     R3,#01H
0019 7A00        R     MOV     R2,#HIGH dd
001B 7900        R     MOV     R1,#LOW dd
001D 7D40              MOV     R5,#040H
001F 120000      R     LCALL   _fft
                                           ; SOURCE LINE # 85
0022 750001      R     MOV     pt,#01H
0025         ?C0062:
                                           ; SOURCE LINE # 86
                                           ; SOURCE LINE # 87
0025 120000      R     LCALL   L?0212
0028 120000      R     LCALL   L?0209
002B C004              PUSH    AR4
002D C005              PUSH    AR5
002F C006              PUSH    AR6
0031 C007              PUSH    AR7
0033 120000      R     LCALL   L?0204
0036 120000      R     LCALL   L?0209
0039 D003              POP     AR3
003B D002              POP     AR2
003D D001              POP     AR1
003F D000              POP     AR0
0041 120000      E     LCALL   ?C?FPADD
0044 120000      E     LCALL   _sqrt
0047 120000      R     LCALL   L?0204
004A 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 88
004D 0500        R     INC     pt
004F E500        R     MOV     A,pt
0051 C3                CLR     C
0052 9441              SUBB    A,#041H
0054 40CF              JC      ?C0062
0056         ?C0063:
                                           ; SOURCE LINE # 90
0056 E500        R     MOV     A,Menu
0058 6401              XRL     A,#01H
005A 7032              JNZ     ?C0065
                                           ; SOURCE LINE # 91
                                           ; SOURCE LINE # 92
005C 750002      R     MOV     pt,#02H
005F         ?C0066:
005F E500        R     MOV     A,pt
0061 C3                CLR     C
0062 9422              SUBB    A,#022H
0064 4003              JC      $ + 5H
0066 020000      R     LJMP    ?C0100
                                           ; SOURCE LINE # 93
                                           ; SOURCE LINE # 94
0069 120000      R     LCALL   L?0194
006C 8F00        R     MOV     tmp,R7
006E 120000      R     LCALL   L?0219
0071         ?C0069:
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 46  

0071 E500        R     MOV     A,tmp
0073 C3                CLR     C
0074 9401              SUBB    A,#01H
0076 4011              JC      ?C0070
                                           ; SOURCE LINE # 95
                                           ; SOURCE LINE # 96
0078 7400        R     MOV     A,#LOW LEDBuf
007A 2500        R     ADD     A,pt
007C F8                MOV     R0,A
007D C000              PUSH    AR0
007F E6                MOV     A,@R0
0080 25E0              ADD     A,ACC
0082 D000              POP     AR0
0084 F6                MOV     @R0,A
                                           ; SOURCE LINE # 97
0085 1500        R     DEC     tmp
0087 80E8              SJMP    ?C0069
0089         ?C0070:
                                           ; SOURCE LINE # 99
                                           ; SOURCE LINE # 101
0089 120000      R     LCALL   L?0218
008C 80D1              SJMP    ?C0066
                                           ; SOURCE LINE # 102
008E         ?C0065:
                                           ; SOURCE LINE # 103
008E E500        R     MOV     A,Menu
0090 6402              XRL     A,#02H
0092 706E              JNZ     ?C0073
                                           ; SOURCE LINE # 104
                                           ; SOURCE LINE # 107
0094 750002      R     MOV     pt,#02H
0097         ?C0074:
0097 E500        R     MOV     A,pt
0099 C3                CLR     C
009A 9422              SUBB    A,#022H
009C 4003              JC      $ + 5H
009E 020000      R     LJMP    ?C0100
                                           ; SOURCE LINE # 108
                                           ; SOURCE LINE # 109
00A1 120000      R     LCALL   L?0194
00A4 8F00        R     MOV     tmp,R7
                                           ; SOURCE LINE # 110
00A6 120000      R     LCALL   L?0208
00A9 C3                CLR     C
00AA 9500        R     SUBB    A,tmp
00AC 5027              JNC     ?C0077
                                           ; SOURCE LINE # 111
                                           ; SOURCE LINE # 112
00AE 120000      R     LCALL   L?0219
00B1         ?C0078:
00B1 E500        R     MOV     A,tmp
00B3 D3                SETB    C
00B4 9401              SUBB    A,#01H
00B6 4011              JC      ?C0079
                                           ; SOURCE LINE # 113
                                           ; SOURCE LINE # 114
00B8 7400        R     MOV     A,#LOW LEDBuf
00BA 2500        R     ADD     A,pt
00BC F8                MOV     R0,A
00BD C000              PUSH    AR0
00BF E6                MOV     A,@R0
00C0 25E0              ADD     A,ACC
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 47  

00C2 D000              POP     AR0
00C4 F6                MOV     @R0,A
                                           ; SOURCE LINE # 116
00C5 1500        R     DEC     tmp
00C7 80E8              SJMP    ?C0078
00C9         ?C0079:
                                           ; SOURCE LINE # 117
00C9 120000      R     LCALL   L?0195
00CC 7400        R     MOV     A,#LOW refreshflag
00CE 2500        R     ADD     A,pt
00D0 F8                MOV     R0,A
00D1 A607              MOV     @R0,AR7
                                           ; SOURCE LINE # 118
00D3 8026              SJMP    ?C0076
00D5         ?C0077:
                                           ; SOURCE LINE # 120
                                           ; SOURCE LINE # 121
00D5 120000      R     LCALL   L?0208
00D8 D3                SETB    C
00D9 9401              SUBB    A,#01H
00DB 4001              JC      ?C0082
00DD 16                DEC     @R0
00DE         ?C0082:
                                           ; SOURCE LINE # 122
00DE 120000      R     LCALL   L?0207
00E1 F500        R     MOV     tmp,A
00E3         ?C0083:
00E3 E500        R     MOV     A,tmp
00E5 D3                SETB    C
00E6 9401              SUBB    A,#01H
00E8 4011              JC      ?C0076
                                           ; SOURCE LINE # 123
                                           ; SOURCE LINE # 124
00EA 7400        R     MOV     A,#LOW LEDBuf
00EC 2500        R     ADD     A,pt
00EE F8                MOV     R0,A
00EF C000              PUSH    AR0
00F1 E6                MOV     A,@R0
00F2 25E0              ADD     A,ACC
00F4 D000              POP     AR0
00F6 F6                MOV     @R0,A
                                           ; SOURCE LINE # 125
00F7 1500        R     DEC     tmp
00F9 80E8              SJMP    ?C0083
                                           ; SOURCE LINE # 126
                                           ; SOURCE LINE # 127
00FB         ?C0076:
00FB 0500        R     INC     pt
00FD 0500        R     INC     pt
00FF 020000      R     LJMP    ?C0074
                                           ; SOURCE LINE # 128
0102         ?C0073:
                                           ; SOURCE LINE # 129
0102 E500        R     MOV     A,Menu
0104 706A              JNZ     ?C0100
                                           ; SOURCE LINE # 130
                                           ; SOURCE LINE # 133
0106 750002      R     MOV     pt,#02H
0109         ?C0088:
0109 E500        R     MOV     A,pt
010B C3                CLR     C
010C 9422              SUBB    A,#022H
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 48  

010E 5060              JNC     ?C0100
                                           ; SOURCE LINE # 134
                                           ; SOURCE LINE # 135
0110 120000      R     LCALL   L?0195
0113 8F00        R     MOV     tmp,R7
                                           ; SOURCE LINE # 136
0115 120000      R     LCALL   L?0208
0118 C3                CLR     C
0119 9500        R     SUBB    A,tmp
011B 5027              JNC     ?C0091
                                           ; SOURCE LINE # 137
                                           ; SOURCE LINE # 138
011D 120000      R     LCALL   L?0220
0120         ?C0092:
0120 E500        R     MOV     A,tmp
0122 C3                CLR     C
0123 9401              SUBB    A,#01H
0125 4011              JC      ?C0093
                                           ; SOURCE LINE # 139
                                           ; SOURCE LINE # 140
0127 7400        R     MOV     A,#LOW LEDBuf
0129 2500        R     ADD     A,pt
012B F8                MOV     R0,A
012C C000              PUSH    AR0
012E E6                MOV     A,@R0
012F 25E0              ADD     A,ACC
0131 D000              POP     AR0
0133 F6                MOV     @R0,A
                                           ; SOURCE LINE # 142
0134 1500        R     DEC     tmp
0136 80E8              SJMP    ?C0092
0138         ?C0093:
                                           ; SOURCE LINE # 143
0138 120000      R     LCALL   L?0195
013B 7400        R     MOV     A,#LOW refreshflag
013D 2500        R     ADD     A,pt
013F F8                MOV     R0,A
0140 A607              MOV     @R0,AR7
                                           ; SOURCE LINE # 145
0142 8026              SJMP    ?C0095
0144         ?C0091:
                                           ; SOURCE LINE # 147
                                           ; SOURCE LINE # 148
0144 120000      R     LCALL   L?0208
0147 D3                SETB    C
0148 9401              SUBB    A,#01H
014A 4001              JC      ?C0096
014C 16                DEC     @R0
014D         ?C0096:
                                           ; SOURCE LINE # 149
014D 120000      R     LCALL   L?0207
0150 F500        R     MOV     tmp,A
0152         ?C0097:
0152 E500        R     MOV     A,tmp
0154 C3                CLR     C
0155 9401              SUBB    A,#01H
0157 4011              JC      ?C0095
                                           ; SOURCE LINE # 150
                                           ; SOURCE LINE # 151
0159 7400        R     MOV     A,#LOW LEDBuf
015B 2500        R     ADD     A,pt
015D F8                MOV     R0,A
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 49  

015E C000              PUSH    AR0
0160 E6                MOV     A,@R0
0161 25E0              ADD     A,ACC
0163 D000              POP     AR0
0165 F6                MOV     @R0,A
                                           ; SOURCE LINE # 152
0166 1500        R     DEC     tmp
0168 80E8              SJMP    ?C0097
                                           ; SOURCE LINE # 153
016A         ?C0095:
                                           ; SOURCE LINE # 154
                                           ; SOURCE LINE # 155
016A 120000      R     LCALL   L?0218
016D 020000      R     LJMP    ?C0088
                                           ; SOURCE LINE # 156
                                           ; SOURCE LINE # 158
0170         ?C0100:
0170 22                RET     
             ; FUNCTION processfft (END)

             ; FUNCTION PWM_init (BEGIN)
                                           ; SOURCE LINE # 42
                                           ; SOURCE LINE # 43
                                           ; SOURCE LINE # 44
0000 E4                CLR     A
0001 F5D9              MOV     CMOD,A
                                           ; SOURCE LINE # 45
0003 75E9EF            MOV     CL,#0EFH
                                           ; SOURCE LINE # 46
0006 75F9EF            MOV     CH,#0EFH
                                           ; SOURCE LINE # 47
0009 75DA42            MOV     CCAPM0,#042H
                                           ; SOURCE LINE # 48
000C 75EAEF            MOV     CCAP0L,#0EFH
                                           ; SOURCE LINE # 49
000F 75FAFF            MOV     CCAP0H,#0FFH
                                           ; SOURCE LINE # 51
0012 D2DE              SETB    CR
                                           ; SOURCE LINE # 52
0014 22                RET     
             ; FUNCTION PWM_init (END)

             ; FUNCTION _PWM0_set (BEGIN)
                                           ; SOURCE LINE # 54
;---- Variable 'set' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 55
                                           ; SOURCE LINE # 56
0000 8FEA              MOV     CCAP0L,R7
                                           ; SOURCE LINE # 57
0002 8FFA              MOV     CCAP0H,R7
                                           ; SOURCE LINE # 58
0004 22                RET     
             ; FUNCTION _PWM0_set (END)

             ; FUNCTION IOINIT (BEGIN)
                                           ; SOURCE LINE # 61
                                           ; SOURCE LINE # 62
                                           ; SOURCE LINE # 63
0000 75BBFF            MOV     P4SW,#0FFH
                                           ; SOURCE LINE # 64
0003 E4                CLR     A
0004 F5B3              MOV     P4M1,A
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 50  

0006 75B480            MOV     P4M0,#080H
0009 C2C7              CLR     P47
                                           ; SOURCE LINE # 65
000B F593              MOV     P0M1,A
000D 7594FF            MOV     P0M0,#0FFH
0010 F580              MOV     P0,A
                                           ; SOURCE LINE # 66
0012 759143            MOV     P1M1,#043H
0015 759234            MOV     P1M0,#034H
0018 7590B7            MOV     P1,#0B7H
                                           ; SOURCE LINE # 67
001B F595              MOV     P2M1,A
001D 7596FF            MOV     P2M0,#0FFH
0020 F5A0              MOV     P2,A
                                           ; SOURCE LINE # 68
0022 F5B1              MOV     P3M1,A
0024 75B2FF            MOV     P3M0,#0FFH
0027 F5B0              MOV     P3,A
                                           ; SOURCE LINE # 69
0029 759D03            MOV     P1ASF,#03H
                                           ; SOURCE LINE # 85
002C 22                RET     
             ; FUNCTION IOINIT (END)

             ; FUNCTION BufToLED_Refresh (BEGIN)
                                           ; SOURCE LINE # 89
                                           ; SOURCE LINE # 90
                                           ; SOURCE LINE # 92
0000 750001      R     MOV     X,#01H
                                           ; SOURCE LINE # 93
0003 750001      R     MOV     Y,#01H
                                           ; SOURCE LINE # 94
0006 750001      R     MOV     X,#01H
0009 750002      R     MOV     i,#02H
000C         ?C0104:
000C E500        R     MOV     A,X
000E 6016              JZ      ?C0105
                                           ; SOURCE LINE # 95
                                           ; SOURCE LINE # 96
0010 F5A0              MOV     P2,A
                                           ; SOURCE LINE # 97
0012 750001      R     MOV     Y,#01H
0015         ?C0107:
0015 E500        R     MOV     A,Y
0017 6005              JZ      ?C0108
                                           ; SOURCE LINE # 98
                                           ; SOURCE LINE # 99
                                           ; SOURCE LINE # 100
                                           ; SOURCE LINE # 101
                                           ; SOURCE LINE # 102
0019 120000      R     LCALL   L?0206
001C 80F7              SJMP    ?C0107
001E         ?C0108:
                                           ; SOURCE LINE # 103
001E E4                CLR     A
001F F5A0              MOV     P2,A
                                           ; SOURCE LINE # 104
0021 120000      R     LCALL   L?0221
0024 80E6              SJMP    ?C0104
0026         ?C0105:
                                           ; SOURCE LINE # 105
0026 750001      R     MOV     X,#01H
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 51  

0029         ?C0110:
0029 E500        R     MOV     A,X
002B C3                CLR     C
002C 9480              SUBB    A,#080H
002E 5017              JNC     ?C0116
                                           ; SOURCE LINE # 106
                                           ; SOURCE LINE # 107
0030 8500B0      R     MOV     P3,X
                                           ; SOURCE LINE # 108
0033 750001      R     MOV     Y,#01H
0036         ?C0113:
0036 E500        R     MOV     A,Y
0038 6005              JZ      ?C0114
                                           ; SOURCE LINE # 109
                                           ; SOURCE LINE # 110
                                           ; SOURCE LINE # 111
                                           ; SOURCE LINE # 112
                                           ; SOURCE LINE # 113
003A 120000      R     LCALL   L?0206
003D 80F7              SJMP    ?C0113
003F         ?C0114:
                                           ; SOURCE LINE # 114
003F E4                CLR     A
0040 F5B0              MOV     P3,A
                                           ; SOURCE LINE # 115
0042 120000      R     LCALL   L?0221
0045 80E2              SJMP    ?C0110
                                           ; SOURCE LINE # 117
0047         ?C0116:
0047 22                RET     
             ; FUNCTION BufToLED_Refresh (END)

             ; FUNCTION LEDRefresh_INT (BEGIN)
0000 C0E0              PUSH    ACC
0002 C0F0              PUSH    B
0004 C083              PUSH    DPH
0006 C082              PUSH    DPL
0008 C0D0              PUSH    PSW
000A 75D000            MOV     PSW,#00H
000D C000              PUSH    AR0
000F C004              PUSH    AR4
0011 C005              PUSH    AR5
0013 C006              PUSH    AR6
0015 C007              PUSH    AR7
                                           ; SOURCE LINE # 122
                                           ; SOURCE LINE # 127
0017 758B00            MOV     TL1,#00H
                                           ; SOURCE LINE # 128
001A 85008D      R     MOV     TH1,INTTime
                                           ; SOURCE LINE # 130
001D 900000      R     MOV     DPTR,#flag
0020 E0                MOVX    A,@DPTR
0021 6011              JZ      ?C0117
                                           ; SOURCE LINE # 131
                                           ; SOURCE LINE # 132
0023 E4                CLR     A
0024 75F001            MOV     B,#01H
0027 120000      R     LCALL   L?0225
002A F4                CPL     A
002B 4E                ORL     A,R6
002C 7017              JNZ     ?C0119
                                           ; SOURCE LINE # 133
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 52  

                                           ; SOURCE LINE # 134
002E 900000      R     MOV     DPTR,#flag
0031 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 135
                                           ; SOURCE LINE # 136
0032 8011              SJMP    ?C0119
0034         ?C0117:
                                           ; SOURCE LINE # 138
                                           ; SOURCE LINE # 139
0034 74FF              MOV     A,#0FFH
0036 F5F0              MOV     B,A
0038 120000      R     LCALL   L?0225
003B 64CF              XRL     A,#0CFH
003D 4E                ORL     A,R6
003E 7005              JNZ     ?C0119
                                           ; SOURCE LINE # 140
                                           ; SOURCE LINE # 141
0040 900000      R     MOV     DPTR,#flag
0043 04                INC     A
0044 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 142
                                           ; SOURCE LINE # 143
0045         ?C0119:
                                           ; SOURCE LINE # 144
0045 900000      R     MOV     DPTR,#x
0048 A3                INC     DPTR
0049 E0                MOVX    A,@DPTR
004A FF                MOV     R7,A
004B 120000      R     LCALL   _PWM0_set
                                           ; SOURCE LINE # 146
004E 120000      R     LCALL   BufToLED_Refresh
                                           ; SOURCE LINE # 147
0051 D007              POP     AR7
0053 D006              POP     AR6
0055 D005              POP     AR5
0057 D004              POP     AR4
0059 D000              POP     AR0
005B D0D0              POP     PSW
005D D082              POP     DPL
005F D083              POP     DPH
0061 D0F0              POP     B
0063 D0E0              POP     ACC
0065 32                RETI    
             ; FUNCTION LEDRefresh_INT (END)

             ; FUNCTION Timer_INT (BEGIN)
                                           ; SOURCE LINE # 150
                                           ; SOURCE LINE # 151
                                           ; SOURCE LINE # 152
0000 758911            MOV     TMOD,#011H
                                           ; SOURCE LINE # 153
0003 D2AF              SETB    EA
                                           ; SOURCE LINE # 154
0005 E4                CLR     A
0006 F58D              MOV     TH1,A
                                           ; SOURCE LINE # 155
0008 F58B              MOV     TL1,A
                                           ; SOURCE LINE # 156
000A D2AB              SETB    ET1
                                           ; SOURCE LINE # 157
000C D28E              SETB    TR1
                                           ; SOURCE LINE # 159
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 53  

000E 22                RET     
             ; FUNCTION Timer_INT (END)

             ; FUNCTION FullScan (BEGIN)
                                           ; SOURCE LINE # 162
                                           ; SOURCE LINE # 163
                                           ; SOURCE LINE # 164
0000 750001      R     MOV     X,#01H
                                           ; SOURCE LINE # 165
0003 750001      R     MOV     Y,#01H
                                           ; SOURCE LINE # 167
0006 750001      R     MOV     Y,#01H
0009         ?C0123:
0009 E500        R     MOV     A,Y
000B 6032              JZ      ?C0132
                                           ; SOURCE LINE # 168
                                           ; SOURCE LINE # 169
000D F580              MOV     P0,A
                                           ; SOURCE LINE # 170
000F 750001      R     MOV     X,#01H
0012         ?C0126:
0012 E500        R     MOV     A,X
0014 6007              JZ      ?C0127
                                           ; SOURCE LINE # 171
                                           ; SOURCE LINE # 172
0016 F5A0              MOV     P2,A
                                           ; SOURCE LINE # 173
                                           ; SOURCE LINE # 174
0018 120000      R     LCALL   L?0215
001B 80F5              SJMP    ?C0126
001D         ?C0127:
                                           ; SOURCE LINE # 176
001D E4                CLR     A
001E F5A0              MOV     P2,A
                                           ; SOURCE LINE # 177
0020 750001      R     MOV     X,#01H
0023         ?C0129:
0023 E500        R     MOV     A,X
0025 C3                CLR     C
0026 9480              SUBB    A,#080H
0028 5008              JNC     ?C0130
                                           ; SOURCE LINE # 178
                                           ; SOURCE LINE # 179
002A 8500B0      R     MOV     P3,X
                                           ; SOURCE LINE # 180
                                           ; SOURCE LINE # 181
002D 120000      R     LCALL   L?0215
0030 80F1              SJMP    ?C0129
0032         ?C0130:
                                           ; SOURCE LINE # 182
0032 E4                CLR     A
0033 F5B0              MOV     P3,A
                                           ; SOURCE LINE # 183
0035 F580              MOV     P0,A
                                           ; SOURCE LINE # 184
0037 E500        R     MOV     A,Y
0039 25E0              ADD     A,ACC
003B F500        R     MOV     Y,A
003D 80CA              SJMP    ?C0123
                                           ; SOURCE LINE # 185
003F         ?C0132:
003F 22                RET     
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 54  

             ; FUNCTION FullScan (END)

             ; FUNCTION Main (BEGIN)
                                           ; SOURCE LINE # 188
                                           ; SOURCE LINE # 189
                                           ; SOURCE LINE # 190
0000 750002      R     MOV     Count,#02H
0003 7500BC      R     MOV     Count+01H,#0BCH
                                           ; SOURCE LINE # 191
0006 E4                CLR     A
0007 F500        R     MOV     num,A
                                           ; SOURCE LINE # 193
0009 120000      R     LCALL   IOINIT
                                           ; SOURCE LINE # 194
000C 120000      R     LCALL   InitADC
000F         ?C0133:
                                           ; SOURCE LINE # 196
000F E500        R     MOV     A,Count+01H
0011 1500        R     DEC     Count+01H
0013 7002              JNZ     ?C0188
0015 1500        R     DEC     Count
0017         ?C0188:
0017 14                DEC     A
0018 4500        R     ORL     A,Count
001A 6005              JZ      ?C0134
                                           ; SOURCE LINE # 197
001C 120000      R     LCALL   FullScan
001F 80EE              SJMP    ?C0133
0021         ?C0134:
                                           ; SOURCE LINE # 199
0021 E4                CLR     A
0022 F500        R     MOV     i,A
0024         ?C0135:
0024 7400        R     MOV     A,#LOW refreshflag
0026 2500        R     ADD     A,i
0028 F8                MOV     R0,A
0029 7609              MOV     @R0,#09H
002B 0500        R     INC     i
002D E500        R     MOV     A,i
002F B428F2            CJNE    A,#028H,?C0135
0032         ?C0136:
                                           ; SOURCE LINE # 201
0032 C294              CLR     P14
                                           ; SOURCE LINE # 202
0034 7FA0              MOV     R7,#0A0H
0036 7E0F              MOV     R6,#0FH
0038 120000      R     LCALL   _Delays
                                           ; SOURCE LINE # 203
003B D294              SETB    P14
                                           ; SOURCE LINE # 205
003D 120000      R     LCALL   PWM_init
                                           ; SOURCE LINE # 206
0040 7FFB              MOV     R7,#0FBH
0042 120000      R     LCALL   _PWM0_set
                                           ; SOURCE LINE # 208
0045 120000      R     LCALL   Timer_INT
                                           ; SOURCE LINE # 210
0048 E4                CLR     A
0049 F500        R     MOV     i,A
004B         ?C0138:
                                           ; SOURCE LINE # 211
004B 7400        R     MOV     A,#LOW LEDBuf
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 55  

004D 2500        R     ADD     A,i
004F F8                MOV     R0,A
0050 E4                CLR     A
0051 F6                MOV     @R0,A
0052 0500        R     INC     i
0054 E500        R     MOV     A,i
0056 B422F2            CJNE    A,#022H,?C0138
0059         ?C0139:
                                           ; SOURCE LINE # 212
0059 120000      R     LCALL   FontDisp
005C         ?C0141:
                                           ; SOURCE LINE # 214
                                           ; SOURCE LINE # 215
                                           ; SOURCE LINE # 216
005C E4                CLR     A
005D F500        R     MOV     i,A
005F         ?C0143:
                                           ; SOURCE LINE # 217
                                           ; SOURCE LINE # 218
005F 7F01              MOV     R7,#01H
0061 120000      R     LCALL   _GetADCResult
0064 EF                MOV     A,R7
0065 FD                MOV     R5,A
0066 7C00              MOV     R4,#00H
0068 E4                CLR     A
0069 FF                MOV     R7,A
006A 120000      R     LCALL   _GetADCResult
006D EF                MOV     A,R7
006E 2D                ADD     A,R5
006F FF                MOV     R7,A
0070 E4                CLR     A
0071 33                RLC     A
0072 FE                MOV     R6,A
0073 EF                MOV     A,R7
0074 A800        R     MOV     R0,gain
0076 08                INC     R0
0077 8005              SJMP    ?C0190
0079         ?C0189:
0079 C3                CLR     C
007A 33                RLC     A
007B CE                XCH     A,R6
007C 33                RLC     A
007D CE                XCH     A,R6
007E         ?C0190:
007E D8F9              DJNZ    R0,?C0189
0080 FD                MOV     R5,A
0081 AC06              MOV     R4,AR6
0083 EC                MOV     A,R4
0084 120000      E     LCALL   ?C?FCASTI
0087 E500        R     MOV     A,i
0089 120000      R     LCALL   L?0205
008C 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 219
008F 0500        R     INC     i
0091 E500        R     MOV     A,i
0093 C3                CLR     C
0094 9441              SUBB    A,#041H
0096 40C7              JC      ?C0143
0098         ?C0144:
                                           ; SOURCE LINE # 221
0098 120000      R     LCALL   processfft
009B         ?C0146:
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 56  

                                           ; SOURCE LINE # 224
009B 309617            JNB     P16,?C0147
                                           ; SOURCE LINE # 225
                                           ; SOURCE LINE # 226
009E E500        R     MOV     A,CBeep
00A0 6002              JZ      ?C0148
00A2 C294              CLR     P14
00A4         ?C0148:
                                           ; SOURCE LINE # 227
00A4 7800        R     MOV     R0,#LOW TouchKey
00A6 120000      E     LCALL   ?C?LILDIDATA1
00A9 E4                CLR     A
00AA FB                MOV     R3,A
00AB 7AFF              MOV     R2,#0FFH
00AD F9                MOV     R1,A
00AE F8                MOV     R0,A
00AF C3                CLR     C
00B0 120000      E     LCALL   ?C?ULCMP
00B3 50E6              JNC     ?C0146
00B5         ?C0147:
                                           ; SOURCE LINE # 229
00B5 D294              SETB    P14
                                           ; SOURCE LINE # 231
00B7 309619            JNB     P16,?C0150
                                           ; SOURCE LINE # 232
                                           ; SOURCE LINE # 233
00BA 0500        R     INC     Menu
00BC E500        R     MOV     A,Menu
00BE B40403            CJNE    A,#04H,?C0151
00C1 E4                CLR     A
00C2 F500        R     MOV     Menu,A
00C4         ?C0151:
                                           ; SOURCE LINE # 235
00C4 C294              CLR     P14
                                           ; SOURCE LINE # 236
00C6 D2C7              SETB    P47
                                           ; SOURCE LINE # 237
00C8 7F58              MOV     R7,#058H
00CA 7E1B              MOV     R6,#01BH
00CC 120000      R     LCALL   _Delays
                                           ; SOURCE LINE # 238
00CF D294              SETB    P14
                                           ; SOURCE LINE # 239
00D1 C2C7              CLR     P47
                                           ; SOURCE LINE # 240
00D3         ?C0150:
                                           ; SOURCE LINE # 241
00D3 E4                CLR     A
00D4 F500        R     MOV     TouchKey+03H,A
00D6 F500        R     MOV     TouchKey+02H,A
00D8 F500        R     MOV     TouchKey+01H,A
00DA F500        R     MOV     TouchKey,A
                                           ; SOURCE LINE # 244
00DC 20970C            JB      P17,?C0152
00DF E500        R     MOV     A,CBeep
00E1 7004              JNZ     ?C0153
00E3 7F01              MOV     R7,#01H
00E5 8002              SJMP    ?C0154
00E7         ?C0153:
00E7 7F00              MOV     R7,#00H
00E9         ?C0154:
00E9 8F00        R     MOV     CBeep,R7
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 57  

00EB         ?C0152:
                                           ; SOURCE LINE # 246
00EB E4                CLR     A
00EC FF                MOV     R7,A
00ED FE                MOV     R6,A
00EE FD                MOV     R5,A
00EF 7C42              MOV     R4,#042H
00F1 900000      R     MOV     DPTR,#dd+010H
00F4 E0                MOVX    A,@DPTR
00F5 F8                MOV     R0,A
00F6 A3                INC     DPTR
00F7 E0                MOVX    A,@DPTR
00F8 F9                MOV     R1,A
00F9 A3                INC     DPTR
00FA E0                MOVX    A,@DPTR
00FB FA                MOV     R2,A
00FC A3                INC     DPTR
00FD E0                MOVX    A,@DPTR
00FE FB                MOV     R3,A
00FF 120000      E     LCALL   ?C?FPCMP3
0102 502A              JNC     ?C0155
                                           ; SOURCE LINE # 247
                                           ; SOURCE LINE # 248
0104 0500        R     INC     Count+01H
0106 E500        R     MOV     A,Count+01H
0108 7002              JNZ     ?C0191
010A 0500        R     INC     Count
010C         ?C0191:
010C 642C              XRL     A,#02CH
010E 7004              JNZ     ?C0192
0110 E500        R     MOV     A,Count
0112 6401              XRL     A,#01H
0114         ?C0192:
0114 6003              JZ      $ + 5H
0116 020000      R     LJMP    ?C0141
                                           ; SOURCE LINE # 249
                                           ; SOURCE LINE # 250
0119 F500        R     MOV     Count,A
011B F500        R     MOV     Count+01H,A
                                           ; SOURCE LINE # 252
011D 750006      R     MOV     gain,#06H
                                           ; SOURCE LINE # 254
0120 C294              CLR     P14
                                           ; SOURCE LINE # 255
0122 7FE8              MOV     R7,#0E8H
0124 7E03              MOV     R6,#03H
0126 120000      R     LCALL   _Delays
                                           ; SOURCE LINE # 256
0129 D294              SETB    P14
                                           ; SOURCE LINE # 257
                                           ; SOURCE LINE # 258
012B 020000      R     LJMP    ?C0141
012E         ?C0155:
                                           ; SOURCE LINE # 260
                                           ; SOURCE LINE # 261
012E 750000      R     MOV     Count,#00H
0131 750001      R     MOV     Count+01H,#01H
                                           ; SOURCE LINE # 263
0134 0500        R     INC     num
0136 E500        R     MOV     A,num
0138 64AF              XRL     A,#0AFH
013A 6003              JZ      $ + 5H
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 58  

013C 020000      R     LJMP    ?C0141
                                           ; SOURCE LINE # 264
                                           ; SOURCE LINE # 265
013F F500        R     MOV     num,A
                                           ; SOURCE LINE # 267
0141 C294              CLR     P14
                                           ; SOURCE LINE # 268
0143 7FBC              MOV     R7,#0BCH
0145 7E02              MOV     R6,#02H
0147 120000      R     LCALL   _Delays
                                           ; SOURCE LINE # 269
014A D294              SETB    P14
                                           ; SOURCE LINE # 271
014C E4                CLR     A
014D FB                MOV     R3,A
014E FA                MOV     R2,A
014F F9                MOV     R1,A
0150 7842              MOV     R0,#042H
0152 900000      R     MOV     DPTR,#dd+010H
0155 E0                MOVX    A,@DPTR
0156 FC                MOV     R4,A
0157 A3                INC     DPTR
0158 E0                MOVX    A,@DPTR
0159 FD                MOV     R5,A
015A A3                INC     DPTR
015B E0                MOVX    A,@DPTR
015C FE                MOV     R6,A
015D A3                INC     DPTR
015E E0                MOVX    A,@DPTR
015F FF                MOV     R7,A
0160 120000      E     LCALL   ?C?FPDIV
0163 120000      E     LCALL   ?C?CASTF
0166 8F00        R     MOV     Cgain,R7
                                           ; SOURCE LINE # 272
0168 7407              MOV     A,#07H
016A C3                CLR     C
016B 9500        R     SUBB    A,Cgain
016D 5004              JNC     ?C0160
016F 7F01              MOV     R7,#01H
0171 8002              SJMP    ?C0161
0173         ?C0160:
0173 7F00              MOV     R7,#00H
0175         ?C0161:
0175 D3                SETB    C
0176 EF                MOV     A,R7
0177 6480              XRL     A,#080H
0179 9488              SUBB    A,#088H
017B 5006              JNC     ?C0159
                                           ; SOURCE LINE # 273
                                           ; SOURCE LINE # 274
017D 750004      R     MOV     gain,#04H
                                           ; SOURCE LINE # 276
0180 020000      R     LJMP    ?C0141
0183         ?C0159:
                                           ; SOURCE LINE # 277
0183 7404              MOV     A,#04H
0185 C3                CLR     C
0186 9500        R     SUBB    A,Cgain
0188 5004              JNC     ?C0164
018A 7F01              MOV     R7,#01H
018C 8002              SJMP    ?C0165
018E         ?C0164:
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 59  

018E 7F00              MOV     R7,#00H
0190         ?C0165:
0190 D3                SETB    C
0191 EF                MOV     A,R7
0192 6480              XRL     A,#080H
0194 9486              SUBB    A,#086H
0196 5006              JNC     ?C0163
                                           ; SOURCE LINE # 278
                                           ; SOURCE LINE # 279
0198 750005      R     MOV     gain,#05H
                                           ; SOURCE LINE # 281
019B 020000      R     LJMP    ?C0141
019E         ?C0163:
                                           ; SOURCE LINE # 282
019E 7402              MOV     A,#02H
01A0 C3                CLR     C
01A1 9500        R     SUBB    A,Cgain
01A3 5004              JNC     ?C0168
01A5 7F01              MOV     R7,#01H
01A7 8002              SJMP    ?C0169
01A9         ?C0168:
01A9 7F00              MOV     R7,#00H
01AB         ?C0169:
01AB D3                SETB    C
01AC EF                MOV     A,R7
01AD 6480              XRL     A,#080H
01AF 9484              SUBB    A,#084H
01B1 5006              JNC     ?C0167
                                           ; SOURCE LINE # 283
                                           ; SOURCE LINE # 284
01B3 750006      R     MOV     gain,#06H
                                           ; SOURCE LINE # 285
01B6 020000      R     LJMP    ?C0141
01B9         ?C0167:
                                           ; SOURCE LINE # 287
                                           ; SOURCE LINE # 288
01B9 750007      R     MOV     gain,#07H
                                           ; SOURCE LINE # 290
                                           ; SOURCE LINE # 292
                                           ; SOURCE LINE # 294
                                           ; SOURCE LINE # 295
01BC 020000      R     LJMP    ?C0141
             ; FUNCTION Main (END)

C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 60  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


P0M1 . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0093H  1
P1M0 . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0092H  1
P2M0 . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0096H  1
P1M1 . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0091H  1
P0 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0080H  1
P3M0 . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B2H  1
P2M1 . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0095H  1
P1 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0090H  1
P4M0 . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B4H  1
P3M1 . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B1H  1
P2 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00A0H  1
P4M1 . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B3H  1
P3 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B0H  1
DelayTime. . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0000H  1
P4 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00C0H  1
P5 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00C8H  1
EA . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00AFH  1
Main . . . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  Count. . . . . . . . . . . . . . . .  AUTO     DATA   U_INT    0000H  2
  i. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0002H  1
  Cgain. . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0003H  1
  num. . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0004H  1
_SendData. . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  dat. . . . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
CH . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00F9H  1
PWM_init . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
IE . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00A8H  1
CL . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00E9H  1
refreshflag. . . . . . . . . . . . . .  PUBLIC   IDATA  ARRAY    0000H  40
CCAP0H . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00FAH  1
ADC_RES. . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00BDH  1
CCAP0L . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00EAH  1
CR . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00DEH  1
CCAPM0 . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00DAH  1
Menu . . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0001H  1
IP . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B8H  1
FullScan . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  X. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0000H  1
  Y. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0001H  1
TI . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0099H  1
gain . . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0002H  1
CMOD . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00D9H  1
CCON . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00D8H  1
_ShowResult. . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  ch . . . . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0000H  1
compx. . . . . . . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  8
  real . . . . . . . . . . . . . . . .  MEMBER   -----  FLOAT    0000H  4
  imag . . . . . . . . . . . . . . . .  MEMBER   -----  FLOAT    0004H  4
FontDisp . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  i. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0000H  1
  ii . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0001H  1
  count. . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0002H  1
P4SW . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00BBH  1
TouchKey . . . . . . . . . . . . . . .  PUBLIC   DATA   U_LONG   0003H  4
ADC_CONTR. . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00BCH  1
SBUF . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0099H  1
FontLib. . . . . . . . . . . . . . . .  PUBLIC   CODE   ARRAY    0000H  191
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 61  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


SCON . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0098H  1
InitUart . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
BYTE . . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1
TMOD . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0089H  1
TCON . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0088H  1
P14. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0094H  1
P16. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0096H  1
temp . . . . . . . . . . . . . . . . .  PUBLIC   DATA   STRUCT   0007H  8
P17. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0097H  1
P47. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00C7H  1
WORD . . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_INT    -----  2
_mypow . . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  nbottom. . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0002H  1
  ntop . . . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0003H  1
  result . . . . . . . . . . . . . . .  AUTO     DATA   U_INT    0000H  2
  t. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0002H  1
_fft . . . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  xin. . . . . . . . . . . . . . . . .  AUTO     XDATA  PTR      0000H  3
  N. . . . . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0003H  1
  fftnum . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0000H  1
  i. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0001H  1
  j. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0002H  1
  k. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0003H  1
  l. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0004H  1
  m. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0005H  1
  n. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0006H  1
  disbuff. . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0007H  1
  dispos . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0008H  1
  dissec . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0009H  1
  t. . . . . . . . . . . . . . . . . .  AUTO     DATA   STRUCT   000AH  8
CBeep. . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   000FH  1
processfft . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  pt . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0000H  1
  tmp. . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0001H  1
_Delaysms. . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  t. . . . . . . . . . . . . . . . . .  * REG *  DATA   U_INT    0006H  2
  j. . . . . . . . . . . . . . . . . .  * REG *  DATA   U_INT    0004H  2
ACC. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00E0H  1
dd . . . . . . . . . . . . . . . . . .  PUBLIC   XDATA  ARRAY    0003H  520
ee . . . . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  b1 . . . . . . . . . . . . . . . . .  AUTO     XDATA  STRUCT   0000H  8
  b2 . . . . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0008H  1
ET1. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00ABH  1
_sqrt. . . . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
TH1. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   008DH  1
IOINIT . . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
Timer_INT. . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
TL1. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   008BH  1
_PWM0_set. . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  set. . . . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
TR1. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      008EH  1
P1ASF. . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   009DH  1
InitADC. . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
iw . . . . . . . . . . . . . . . . . .  PUBLIC   CODE   ARRAY    00BFH  256
_Delays. . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  t. . . . . . . . . . . . . . . . . .  * REG *  DATA   U_INT    0006H  2
  j. . . . . . . . . . . . . . . . . .  * REG *  DATA   U_INT    0004H  2
C51 COMPILER V9.01   PRJ                                                                   04/25/2011 20:57:51 PAGE 62  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


BufToLED_Refresh . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  i. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0000H  1
  X. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0001H  1
  Y. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0002H  1
_GetADCResult. . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  ch . . . . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
_Delay . . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  n. . . . . . . . . . . . . . . . . .  * REG *  DATA   U_INT    0006H  2
  x. . . . . . . . . . . . . . . . . .  * REG *  DATA   U_INT    0004H  2
LEDBuf . . . . . . . . . . . . . . . .  PUBLIC   DATA   ARRAY    0010H  35
LEDRefresh_INT . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  x. . . . . . . . . . . . . . . . . .  STATIC   XDATA  U_INT    0000H  2
  flag . . . . . . . . . . . . . . . .  STATIC   XDATA  U_CHAR   0002H  1
PSW. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00D0H  1
INTTime. . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0033H  1
P0M0 . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0094H  1


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   2363    ----
   CONSTANT SIZE    =    447    ----
   XDATA SIZE       =    523      14
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     52      36
   IDATA SIZE       =     40    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
